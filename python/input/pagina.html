
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

    <!-- Optimizely Start -->
      <script type='text/javascript'>
  







(function(){



geolocation = {};
geolocation.requestGeo=function(c){geolocation.cdn3Requested=+new Date;var b=document.head||document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=c;b.insertBefore(a,b.firstChild)};


var optly={nativity:{}};optly.nativity.getNativeGetElementsByClassName=function(){var a=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(a))var a=(window.optimizely||{}).getElementsByClassName,b=(window.optly||{}).getElementsByClassName,a=optly.nativity.isNativeFunction(a)?a:optly.nativity.isNativeFunction(b)?b:null;return a};optly.nativity.isNativeFunction=function(a){return a&&-1!==String(a).indexOf("[native code]")};optly.Cleanse={};optly.Cleanse.each=function(a,b,d){var h=!!Object.prototype.__lookupGetter__,e=!!Object.prototype.__lookupSetter__,c;for(c in a)if(a.hasOwnProperty(c)){var f=h?a.__lookupGetter__(c):null,g=e?a.__lookupSetter__(c):null;try{b.call(d,c,!f?a[c]:null,f,g)}catch(i){}}};
optly.Cleanse.finish=function(){if(optly.Cleanse.running){optly.Cleanse.running=!1;optly.Cleanse.each(optly.Cleanse.types,function(a,d){Object.prototype.__defineGetter__&&optly.Cleanse.each(optly.Cleanse.getters[a],function(c,b){d.prototype.__defineGetter__(c,b);optly.Cleanse.log("restored getter",a,c)});Object.prototype.__defineSetter__&&optly.Cleanse.each(optly.Cleanse.setters[a],function(c,b){d.prototype.__defineSetter__(c,b);optly.Cleanse.log("restored setter",a,c)});optly.Cleanse.each(optly.Cleanse.properties[a],
function(b,f){d.prototype[b]=f;optly.Cleanse.log("restored property",a,b)})});optly.Cleanse.unfixGetElementsByClassName();optly.Cleanse.log("finish");var a=window.console;if((-1!==window.location.hash.indexOf("optimizely_log=true")||-1!==window.location.search.indexOf("optimizely_log=true"))&&a&&a.log)for(var b=optly.Cleanse.logs,d=0;d<b.length;d++)a.log(b[d])}};
optly.Cleanse.log=function(a,b,d){b?(b=b.replace(/_/g,""),optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+a+": "+b+"."+d)):optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+a)};
optly.Cleanse.start=function(){var a=window.location.hostname;if(!(-1!==a.indexOf("optimizely")&&-1===a.indexOf("edit")&&-1===a.indexOf("preview")&&-1===a.indexOf("test")))if(optly.Cleanse.running)optly.Cleanse.log("already running so didn't start");else{optly.Cleanse.log("start");optly.Cleanse.running=!0;for(var b in optly.Cleanse.types)optly.Cleanse.types[b]||delete optly.Cleanse.types[b];optly.Cleanse.each(optly.Cleanse.types,function(a,b){optly.Cleanse.getters[a]={};optly.Cleanse.properties[a]=
{};optly.Cleanse.setters[a]={};optly.Cleanse.each(b.prototype,function(e,c,f,g){optly.nativity.isNativeFunction(c)||optly.nativity.isNativeFunction(f)||optly.nativity.isNativeFunction(g)?optly.Cleanse.log("ignore native code",a,e):(f?(optly.Cleanse.getters[a][e]=f,optly.Cleanse.log("cleansed getter",a,e)):(optly.Cleanse.properties[a][e]=c,optly.Cleanse.log("cleansed property",a,e)),g&&(optly.Cleanse.setters[a][e]=g,optly.Cleanse.log("cleansed setter",a,e)),delete b.prototype[e])})});optly.Cleanse.fixGetElementsByClassName();
optly.Cleanse.hasRunStart=!0}};optly.Cleanse.fixGetElementsByClassName=function(){if(!optly.nativity.isNativeFunction(document.getElementsByClassName)){var a=optly.nativity.getNativeGetElementsByClassName();a?(optly.Cleanse.getElementsByClassName=document.getElementsByClassName,document.getElementsByClassName=a):optly.Cleanse.log("Error: native HTMLElement.prototype.getElementsByClassName missing")}};
optly.Cleanse.unfixGetElementsByClassName=function(){optly.Cleanse.getElementsByClassName&&(document.getElementsByClassName=optly.Cleanse.getElementsByClassName,optly.Cleanse.getElementsByClassName=null)};optly.Cleanse.getElementsByClassName=null;optly.Cleanse.getters={};optly.Cleanse.logs=[];optly.Cleanse.properties={};optly.Cleanse.setters={};optly.Cleanse.types={Object_:Object};window.optly=window.optly||{};window.optly.Cleanse={finish:optly.Cleanse.finish,logs:optly.Cleanse.logs,start:optly.Cleanse.start};
optly.Cleanse.start();
var $=jQuery;

var optimizelyCode = function(){
var DATA={"log_host":"log.optimizely.com","goal_expressions":{"7228511104":["^join\\_\\-\\_plan\\_a\\_trip$"],"8315822250":["(https?://)?(www\\.)?search\\_type\\=traveler/?"],"6784571523":["^cc\\_input$"],"6893800325":["^verify\\_with\\_pp\\_\\-\\_header$"],"6788061830":["^month\\_\\/\\_year\\_input$"],"7647080583":["^get\\_verified\\_banner\\_\\#2$"],"7259470729":["^join\\_4\\_\\-\\_plan\\_trip$"],"6808690443":["^meet\\_syril$"],"6610585868":["^ready\\_for\\_adventure\\_\\-\\_plan\\_trip\\_\\(original\\)$"],"8327990828":["(https?://)?(www\\.)?couchsurfing\\.com\\/people/?"],"6526480143":["(https?://)?(www\\.)?\\/get\\_verified/?"],"8312120080":["(https?://)?(www\\.)?search\\_type\\=host/?"],"6452802962":["^(https?://)?(www\\.)?couchsurfing\\.com\\/dashboard/?(\\?.*)?(#.*)?$"],"6604350483":["^plan\\_a\\_trip$"],"6606790932":["^ready\\_for\\_adventure\\_\\-\\_plan\\_a\\_trip\\_\\(variant\\)$"],"6772060566":["^verify\\_my\\_account$"],"6808211482":["^meet\\_lynette$"],"6462350236":["(https?://)?(www\\.)?\\/place/?"],"6800180381":["(https?://)?(www\\.)?couchsurfing\\.com\\/people/?"],"6902831506":["^verify\\_with\\_pp\\_\\-\\_bottom$"],"6910550305":["^verify\\_cc\\_\\-\\-\\_modal$"],"7979640702":["^continue\\_click$"],"8155389814":["^verify\\_clicks$"],"8319380208":["(https?://)?(www\\.)?search\\_type\\=place/?"],"6506050218":["(https?://)?(www\\.)?couchsurfing\\.com\\/dashboard/?\\?new\\_user\\=true"],"7650950955":["^get\\_verified\\_banner\\_click\\_\\#1$"],"6461132460":["^join\\_with\\_email$"],"6880812252":["^form\\_submit$"],"8317278257":["(https?://)?(www\\.)?search\\_type\\=member/?"],"6614315443":["^explore\\_the\\_world\\_\\-\\_plan\\_trip\\_\\(original\\)$"],"7219920440":["^join\\_3\\_\\-\\_plan\\_trip$"],"6600755769":["^ready\\_for\\_adventure\\?\\_plan\\_a\\_trip$"],"8306909756":["(https?://)?(www\\.)?couchsurfing\\.com\\/messages/?"],"6256730429":["^engagement$"],"6901050562":["^verify\\_with\\_cc\\_\\-\\_header$"],"6698981571":["^verify\\_my\\_account\\_\\-\\-\\_cc$"],"7667440326":["^variation\\_\\-\\-\\_second\\_banner\\_click$"],"6918240457":["^verify\\_with\\_pp\\_\\-\\_banner$"],"6804751094":["^meet\\_jason$"],"6908580583":["^verify\\_with\\_cc\\_\\-\\_banner$"],"6891700560":["^verify\\_with\\_cc\\_\\-\\_bottom$"],"8242937214":["(https?://)?(www\\.)?\\/verification\\-success/?"],"8327845446":["^clicks\\_view\\_profile$"],"7707873878":["^cc\\_clicks$"],"6718520152":["^\"next\"\\_on\\_get\\_verified$"],"7255381083":["^first\\_modal\\_fb$"],"6609975516":["^explore\\_the\\_world\\_\\-\\_plan\\_a\\_trip$"],"6435921117":["^join\\_top\\_right\\_button$"],"8307854080":["^clicks\\_download\\_banner$"],"8320251418":["https:\\/\\/www\\.couchsurfing\\.com\\/places\\/.*\\/accommodation"],"8314674401":["(https?://)?(www\\.)?search\\_type\\=event/?"],"8254516854":["(https?://)?(www\\.)?\\/dashboard/?\\?new\\_user\\=true"],"6504321379":["^get\\_verified\\_\\-\\-\\_paypal\\_clicks$"],"7890860132":["^verify\\_account\\_click$"],"7261170789":["^second\\_modal$"],"6458360039":["^fb\\_clicks$"],"6787450089":["^cvc\\_input$"],"6585416682":["^ready\\_for\\_adventure\\_\\-\\_plan\\_a\\_trip\\_\\(variation\\)$"],"7247092075":["^search\\_bar\\_clicks$"],"6519352558":["^get\\_verified\\_\\-\\-\\_cc\\_clicks$"],"6977720687":["^paypal\\_\\-\\-\\_original$"],"6455870311":["^login\\_button$"],"7681593564":["^paypal\\_clicks$"],"6614860018":["^plan\\_a\\_trip\\_bottom$"],"7279132531":["^top\\_right\\_join$"],"7258530493":["^first\\_modal\\_email$"],"6793790582":["(https?://)?(www\\.)?/?\\?modal\\=verify"],"7255760375":["^join\\_email\\_\\-\\_top\\_banner$"],"6503110499":["^join\\_button\\_\\-\\_sign\\_up\\_with\\_email$"],"8306845568":["(https?://)?(www\\.)?search\\_type\\=advice/?"],"7667771770":["^search\\_by\\_map\\_click$"],"7216754043":["^join\\_fb\\_\\-\\_top$"],"8313961705":["(https?://)?(www\\.)?search\\_type\\=group/?"],"7874072980":["^verify\\_account\\_button$"]},"experiments":{"8336340643":{"audiences":[8286302629],"name":"[Verification Page] - Do female members convert better when we change the header image?  (2)","variation_ids":["8330405648","8325279038","8327935524","8327726254","8332624334","8325279039"],"urls":[{"match":"simple","value":"https://www.couchsurfing.com/get_verified"}],"enabled_variation_ids":["8330405648","8325279038","8327935524","8327726254","8332624334","8325279039"]},"8329990629":{"name":"[Dashboard] - Does adding a search bar to a dashboard CTA increase new user engagement?","variation_ids":["8326002190","8325279094"],"urls":[{"match":"simple","value":"http://couchsurfing.com/dashboard?new_user=true"}],"enabled_variation_ids":["8326002190","8325279094"]},"8322463686":{"audiences":[8286302629],"variation_weights":{"8324705664":1667,"8318868933":1667,"8334370427":1667,"8330634225":1665,"8333392016":1667,"8325084218":1667},"name":"[Verification Page] - Do female members convert better when we change the header image? ","enabled":true,"variation_ids":["8333392016","8325084218","8334370427","8324705664","8318868933","8330634225"],"urls":[{"match":"simple","value":"https://www.couchsurfing.com/get_verified"}],"enabled_variation_ids":["8333392016","8325084218","8334370427","8324705664","8318868933","8330634225"]},"8262825863":{"audiences":[8234150295],"name":"[Verification Page] - Do male members convert better when we change the header image?","variation_ids":["8264636187","8261944295","8267872717","8268844053","8274163163","8263065621"],"urls":[{"match":"simple","value":"https://www.couchsurfing.com/get_verified"}],"enabled_variation_ids":["8264636187","8261944295","8267872717","8268844053","8274163163","8263065621"]},"8253621418":{"name":"[Dashboard]: Does changing the copy on the get verified to-do button improve conversion? (1)","variation_ids":["8253294429","8253621419","8249677753","8246063123","8250733936"],"urls":[{"match":"exact","value":"https://www.couchsurfing.com/dashboard?new_user=true"}],"enabled_variation_ids":["8253294429","8253621419","8246063123"]},"8332154923":{"name":"[Rate Limiting] - Does changing our rate limiting modal increase conversion?","variation_ids":["8332642669","8322043799"],"urls":[{"match":"simple","value":"https://api-integration.couchsurfing.com/people/user17"}],"enabled_variation_ids":["8332642669","8322043799"]},"8312940263":{"audiences":[8190871640],"name":"[New User Experience]: Send half of new users to their local city page","variation_ids":["8316425651","8314411816"],"urls":[{"match":"simple","value":"http://couchsurfing.com/dashboard?new_user=true"},{"match":"simple","value":"couchsurfing.com/place/mine"}],"enabled_variation_ids":["8316425651","8314411816"]},"8325832365":{"audiences":[6453262945],"name":"[Host Search] - Does having a clearer \"View profile\" CTA increase engagement?","variation_ids":["8328850290","8333470437","8327174878"],"urls":[{"match":"regex","value":"https://www.couchsurfing.com/members/hosts?utf8=%E2%9C%93&search_type=host&country=&latitude=37.7749295&longitude=-122.4194155&region=&search_query=San+Francisco%2C+CA%2C+USA&button="}],"enabled_variation_ids":["8328850290","8333470437","8327174878"]},"8329712176":{"audiences":[8190871640],"name":"[New User Experience]: Send half of new users to their local city page (1)","variation_ids":["8321344879","8336191124"],"urls":[{"match":"simple","value":"http://couchsurfing.com/dashboard?new_user=true"},{"match":"simple","value":"couchsurfing.com/place/mine"}],"enabled_variation_ids":["8321344879","8336191124"]},"8325832486":{"audiences":[6453262945],"variation_weights":{"8329761485":3333,"8315975091":3333,"8329592139":3334},"name":"[Host Search] - Does having a clearer \"View profile\" CTA increase engagement? (1)","enabled":true,"variation_ids":["8329592139","8315975091","8329761485"],"urls":[{"match":"regex","value":"https:\\/\\/www\\.couchsurfing\\.com\\/members\\/hosts.*search_type=host.*"}],"enabled_variation_ids":["8329592139","8315975091","8329761485"]},"8306071669":{"audiences":[8290604242],"css":".app-banner{\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #ed6504;\n  height: 50px;\n}\n\n.app-banner a{\n  position: absolute;\n  left: 25px;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n\n.app-banner a p{\n  padding-left: 46px;\n  padding-right: 38px;\n  font-size: 16px;\n  line-height: 1em;\n  margin-top: 8px;\n  position:absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  color: white;\n}\n\n.app-banner a p span{\n  display: inline-block;\n}\n\n.app-icon{\n  width: 40px;\n  height: 40px;\n  top: 5px;\n  left: 0px;\n  position: relative;\n}\n\n.app-download{\n  position: absolute;\n  height:20px;\n  width: 20px;\n  right: 10px;\n  top: 15px;\n}\n\n.app-close{\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 20px;\n  padding: 20px 7px;\n  height: 50px;\n  width: 24px;\n}","name":"[Dashboard/Homepage] Mobile App Banner","variation_ids":["8307041733","8307041734"],"urls":[{"match":"exact","value":"www.couchsurfing.com/"},{"match":"exact","value":"www.couchsurfing.com/dasboard?new_user=true"}],"enabled_variation_ids":["8307041733","8307041734"]},"8269693654":{"audiences":[6453262945],"css":".video-tv {\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  width: 100%;\n  height: 100%;\n\tz-index: -1;\n  overflow: hidden;\n}\n\n.video-header{\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n\n    margin: auto;\n\n    opacity: 1;\n    transition: opacity .5s;\n  }","variation_weights":{"8269990849":2000,"8266754606":2000,"8265583649":2000,"8271643850":2000,"8275135060":2000},"name":"[Homepage] - Image Header  (1)","enabled":true,"variation_ids":["8271643850","8266754606","8263065658","8275254785","8265583649","8269990849","8275135060"],"urls":[{"match":"simple","value":"https://www.couchsurfing.com/"}],"enabled_variation_ids":["8271643850","8266754606","8265583649","8269990849","8275135060"]},"8251043128":{"audiences":[6445861176],"name":"[Profile]: How does changing the copy of the \"under-profile\" verification CTA affect conversion?","variation_ids":["8263212289","8251832265","8256983231","8255121880","8256862613","8254066046"],"urls":[{"match":"substring","value":"https://www.couchsurfing.com/people/"}],"enabled_variation_ids":["8263212289","8251832265","8256983231","8255121880","8256862613","8254066046"]},"8311931642":{"audiences":[8290604242],"css":".app-banner{\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #ed6504;\n  height: 50px;\n}\n\n.app-banner a{\n  position: absolute;\n  left: 25px;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n\n.app-banner a p{\n  padding-left: 46px;\n  padding-right: 38px;\n  font-size: 16px;\n  line-height: 1em;\n  margin-top: 8px;\n  position:absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  color: white;\n}\n\n.app-banner a p span{\n  display: inline-block;\n}\n\n.app-icon{\n  width: 40px;\n  height: 40px;\n  top: 5px;\n  left: 0px;\n  position: relative;\n}\n\n.app-download{\n  position: absolute;\n  height:20px;\n  width: 20px;\n  right: 10px;\n  top: 15px;\n}\n\n.app-close{\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 20px;\n  padding: 20px 7px;\n  height: 50px;\n  width: 24px;\n}","name":"[Dashboard/Homepage] Mobile App Banner (1)","variation_ids":["8312753614","8308836576"],"urls":[{"match":"exact","value":"www.couchsurfing.com/"},{"match":"exact","value":"www.couchsurfing.com/dasboard?new_user=true"}],"enabled_variation_ids":["8312753614","8308836576"]},"8282737692":{"audiences":[8290604242],"variation_weights":{"8294283581":3332,"8292393725":3335,"8298141736":3333},"name":"[Verification Page] - Does shorter content convert better on mobile? ","enabled":true,"variation_ids":["8292393725","8298141736","8294283581"],"urls":[{"match":"simple","value":"https://www.couchsurfing.com/get_verified"}],"enabled_variation_ids":["8292393725","8298141736","8294283581"]}},"audiences":{"6453262945":{"conditions":["and",["or",["or",{"dimension_id":6449502995,"value":"desktop"}]]],"name":"Desktop","segment_id":7984360201},"8286302629":{"conditions":["and",["or",["not",["or",{"dimension_id":8207864170,"value":"male"}]]]],"name":"Female Audience"},"8290604242":{"conditions":["and",["or",["or",{"dimension_id":6449502995,"value":"mobile"}],["or",{"dimension_id":6449502995,"value":"iphone"}]]],"name":"Mobile Only"},"8190871640":{"conditions":["and",["or",["or",{"dimension_id":8187103569,"value":"true","match":"exists"}],["or",{"dimension_id":8192563328,"value":"true","match":"exact"}]],["or",["or",{"dimension_id":6449502995,"value":"desktop"}]]],"name":"New User Query or Cookie"},"8234150295":{"conditions":["and",["or",["or",{"dimension_id":8207864170,"value":"male"}]],["or",["or",{"dimension_id":6449502995,"value":"desktop"}]]],"name":"Male Audience","segment_id":8233820440},"6445861176":{"conditions":["and",["or",["or",{"dimension_id":8192563328,"value":"true","match":"exact"}]],["or",["not",["or",{"dimension_id":8332540013,"value":"mobile"}]]]],"name":"New Users & Desktop"}},"www_host":"app.optimizely.com","public_suffixes":{"couchsurfing.com":["couchsurfing.com","api-integration.couchsurfing.com","www.couchsurfing.com"]},"force_variation":true,"dimensions":{"8192563328":{"condition_type":"query","name":"new_user"},"8211530149":{"api_name":"locale","condition_type":"custom_dimension","name":"Locale","segment_id":8203854836},"8207864170":{"api_name":"gender","condition_type":"custom_dimension","name":"Gender","segment_id":8203105736},"8332540013":{"condition_type":"browser"},"8187103569":{"condition_type":"cookies","name":"newUserCookie"},"8200915474":{"api_name":"account_created_date","condition_type":"custom_dimension","name":"Account Creation Date","segment_id":8205911074},"6449502995":{"condition_type":"device"},"8206472341":{"api_name":"is_verified","condition_type":"custom_dimension","name":"Is verified","segment_id":8208640628},"8328534776":{"api_name":"user_id","condition_type":"custom_dimension","name":"User ID","segment_id":8328627670},"8202775607":{"api_name":"birth_date","condition_type":"custom_dimension","name":"Birth date","segment_id":8205962622},"8208234648":{"api_name":"profile_location","condition_type":"custom_dimension","name":"Profile Location","segment_id":8211540624},"8207421977":{"api_name":"has_surfed","condition_type":"custom_dimension","name":"Has surfed","segment_id":8211203043},"8208451834":{"api_name":"has_hosted","condition_type":"custom_dimension","name":"Has hosted","segment_id":8210522224}},"version":"master-pci-150.400538962435722555","admin_account_id":6250770393,"blacklisted_experiments":[8201442306,7709211532,8169948173,8248015887,7704214162,8277122325,7961891354,8169048476,8149565599,8253543968,8000680100,8159635118,8173834544,8321668658,8220844215,7685392954,7593860411,7106520311,7667871426,8189400004,8231131723,8276130384,7942904915,7881983700,8146581005,7048241503,8233182180,7684780391,7257371753,8220011628,8186272109,8264740850,8019182835,7724302708,7631451382,8258495863,7205481848,8197240532],"project_id":6250770393,"revision":1571,"summary_revenue_goal_id":6255090612,"installation_verified":true,"slave":true,"preview_host":"//optimizely.s3.amazonaws.com","api_host":"api.optimizely.com","variations":{"8256983231":{"code":"$(\".profile-sidebar__verification-button\").html(\"<span aria-hidden=\\\"true\\\" data-icon=\\\"\ue600\\\" class=\\\"icon mod-verified mod-big mod-on-left mod-white\\\"></span>Get Verified\");","name":"Get Verified"},"8263212289":{"name":"Original"},"8268844053":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Backpackers+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Backpackers"},"8324705664":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Backpackers+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Backpackers"},"8275254785":{"code":"$(\"section.mod-join\").css({\"background-position\":\"20% 20%\", \"bottom\":\"\", \"width\":\"1000x\"});\n$(\"h1.hero-content-title\").css({\"font-weight\":\"900\"});\n$(\".hero-content-subtitle\").css({\"font-weight\":\"500\"});\n$(\"h1.hero-content-title\").css({\"text-shadow\":\".5\"});\n$(\"h1.hero-content-title\").css({\"color\":\"#ffffff\"});\n$(\".hero-content-subtitle\").css({\"color\":\"#ffffff\"});\n\n\n$(\"section.mod-join\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Shutterstock/shutterstock_412547314.jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\"section.mod-join\").css({\"background-position\":\"40% 40%\"});\n\n$(\"h1.hero-content-title\").css({\"color\":\"#fffff\"});","name":"Sunglasses"},"8326002190":{"name":"Original"},"8330405648":{"name":"Original"},"8246063123":{"code":"$(\".test-to-do-list .mod-bulleted > li:eq(2)\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".test-to-do-list .mod-bulleted > li:eq(0)\").html(\"Find hosts up to 2x faster\");\n$(\".mod-verification\").html(\"Verify\");\n$(\".test-to-do-list .mod-bulleted > li:eq(1)\").html(\"Helps confirm your identity\");\n$(\".test-to-do-list > .box-content > section:eq(0) > div:eq(2) > ul:eq(0) > li:eq(0) > a:eq(0)\").html(\"Get Verified\");","name":"Get Verified"},"8336191124":{"code":"/* _optimizely_variation_url include=\"http://couchsurfing.com/dashboard?new_user=true\" exclude=\"\" include_match_types=\"simple\" exclude_match_types=\"\" id=\"1491323698145\" */\n/* _optimizely_redirect=https://www.couchsurfing.com/place/mine */\nvar _optly={redir:document.createElement(\"a\")};\n_optly.redir.href=\"https://www.couchsurfing.com/place/mine\";\n_optly.cur=window.location.search;\nif (_optly.cur) {_optly.redir.search=_optly.redir.search ? _optly.cur + \"&\" + _optly.redir.search.slice(1) : _optly.cur;}\nwindow.location.replace(_optly.redir.href);\n/* _optimizely_variation_url_end */\n\n/* _optimizely_variation_url include=\"couchsurfing.com/place/mine\" exclude=\"\" include_match_types=\"simple\" exclude_match_types=\"\" id=\"1491336222396\" */\n\n/* _optimizely_variation_url_end */","name":"Variation #1"},"8256862613":{"code":"$(\".profile-sidebar__verification-button\").html(\"<span aria-hidden=\\\"true\\\" data-icon=\\\"\ue600\\\" class=\\\"icon mod-verified mod-big mod-on-left mod-white\\\"></span>Verify\");","name":"Verify"},"8322043799":{"code":"$(\"h2.box-header-title\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".mod-get-unlimited\").html(\"Get More\");\n$(\".mod-spaced-v\").html(\"\\n        You get 10 free intros each week.<br><br> You'll earn your next free intro on Thursday at 10pm UTC.\\n        <br>\\n      <a data-amplitude-click=\\\"rate_limit_learn_more\\\" href=\\\"https://support.couchsurfing.org/hc/en-us/articles/114094192874\\\" target=\\\"_blank\\\">Learn more</a>\\n    \");","name":"Variation #1"},"8263065621":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/SunSmiley+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Sunny Friends"},"8266754606":{"code":"$(\"section.mod-join\").css({\"background-position\":\"20% 20%\", \"bottom\":\"\", \"width\":\"1000x\"});\n$(\"h1.hero-content-title\").css({\"font-weight\":\"900\"});\n$(\".hero-content-subtitle\").css({\"font-weight\":\"500\"});\n$(\"h1.hero-content-title\").css({\"text-shadow\":\".5\"});\n$(\"h1.hero-content-title\").css({\"color\":\"#ffffff\"});\n$(\".hero-content-subtitle\").css({\"color\":\"#ffffff\"});\n\n$(\"section.mod-join\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Shutterstock/shutterstock_326742137.jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\"section.mod-join\").css({\"background-position\":\"40% 40%\"});\n\n$(\"h1.hero-content-title\").css({\"color\":\"#fffff\"});","name":"Bridge"},"8264636187":{"name":"Original"},"8265583649":{"code":"$(\"section.mod-join\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Shutterstock/shutterstock_254849728.jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\"section.mod-join\").css({\"background-position\":\"40% 40%\"});\n\n$(\"h1.hero-content-title\").css({\"color\":\"#fffff\"});","name":"Beach"},"8327935524":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/JeepersCreepers+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Friends in Jeep"},"8318868933":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Friends_BBQ+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Friends BBQ"},"8314411816":{"code":"/* _optimizely_variation_url include=\"http://couchsurfing.com/dashboard?new_user=true\" exclude=\"\" include_match_types=\"simple\" exclude_match_types=\"\" id=\"1491323698145\" */\n/* _optimizely_redirect=https://www.couchsurfing.com/place/mine */\nvar _optly={redir:document.createElement(\"a\")};\n_optly.redir.href=\"https://www.couchsurfing.com/place/mine\";\n_optly.cur=window.location.search;\nif (_optly.cur) {_optly.redir.search=_optly.redir.search ? _optly.cur + \"&\" + _optly.redir.search.slice(1) : _optly.cur;}\nwindow.location.replace(_optly.redir.href);\n/* _optimizely_variation_url_end */\n\n/* _optimizely_variation_url include=\"couchsurfing.com/place/mine\" exclude=\"\" include_match_types=\"simple\" exclude_match_types=\"\" id=\"1491336222396\" */\n\n/* _optimizely_variation_url_end */","name":"Variation #1"},"8253621419":{"code":"$(\".test-to-do-list > .box-content > section:eq(2) > div:eq(1) > h1:eq(0)\").replaceWith(\"<h1 class=\\\"card-content-title\\\">Verify Your Account</h1>\");\n$(\".test-to-do-list .mod-bulleted > li:eq(0)\").html(\"Find hosts up to 2x faster\");\n$(\".test-to-do-list .mod-bulleted > li:eq(1)\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".test-to-do-list .mod-bulleted > li:eq(2)\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".mod-verification\").replaceWith(\"<a class=\\\"card-action mod-verification\\\" data-amplitude-click=\\\"getverified_ad\\\" data-amplitude-properties=\\\"{&quot;placement&quot;:&quot;dashboard_page&quot;}\\\" href=\\\"/get_verified?ctid=1\\\">Verify</a>\");\n$(\".test-to-do-list > .box-content > section:eq(0) > div:eq(2) > ul:eq(0) > li:eq(0) > a:eq(0)\").html(\"Verify Account\");","name":"Verify Account"},"8327726254":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Backpackers+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Backpackers"},"8316425651":{"name":"Original"},"8315975091":{"code":"var $cards = $('.card.mod-user')\nfor(var i = 0; i < $cards.length; i++) {\n  $card = $($cards[i])\n  // Fix card height\n  $card.css({\"min-height\": \"220px\"});\n  // Get user link\n  var link = $card.find('.card-content-title > a').attr('href');\n  // Create Button\n  var newButton = '<a href=\"'+link+'\" class=\"button\" style=\"margin-top: 10px;\">View Profile</a>'\n  // Attach\n  $card.find('.card-actions').append(newButton)\n}","name":"Stronger CTA"},"8249677753":{"code":"$(\".test-to-do-list .mod-bulleted > li:eq(0)\").html(\"Find hosts up to 2x faster\");\n$(\".test-to-do-list .mod-bulleted > li:eq(1)\").html(\"Takes just a minute\");\n$(\".test-to-do-list .mod-bulleted > li:eq(2)\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".mod-verification\").html(\"Verify\");\n$(\".test-to-do-list > .box-content > section:eq(0) > div:eq(2) > ul:eq(0) > li:eq(0) > a:eq(0)\").html(\"Learn More\");","name":"Learn More"},"8263065658":{"code":"$(\"section.mod-join\").css({\"background-position\":\"20% 20%\", \"bottom\":\"\", \"width\":\"1000x\"});\n$(\"h1.hero-content-title\").css({\"font-weight\":\"900\"});\n$(\".hero-content-subtitle\").css({\"font-weight\":\"500\"});\n$(\"h1.hero-content-title\").css({\"text-shadow\":\".5\"});\n$(\"h1.hero-content-title\").css({\"color\":\"#ffffff\"});\n$(\".hero-content-subtitle\").css({\"color\":\"#ffffff\"});\n\n\n$(\"section.mod-join\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Shutterstock/shutterstock_555753631.jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\"section.mod-join\").css({\"background-position\":\"40% 40%\"});\n\n$(\"h1.hero-content-title\").css({\"color\":\"#fffff\"});","name":"Cafe"},"8294283581":{"code":"$(\".verification-people-say\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".company-testimonials\").css({\"display\":\"none\", \"visibility\":\"\"});","name":"Cut Off After Carousel"},"8325279038":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Boat+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Selfie Boat"},"8325279039":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/SunSmiley+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Sunny Friends"},"8269990849":{"code":"$(\"section.mod-join\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Shutterstock/shutterstock_408358303.jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\"section.mod-join\").css({\"background-position\":\"40% 40%\"});\n\n$(\"h1.hero-content-title\").css({\"color\":\"#fffff\"});","name":"Mountains"},"8329761485":{"code":"var $cards = $('.card.mod-user')\nfor(var i = 0; i < $cards.length; i++) {\n  $card = $($cards[i])\n  // Fix card height\n  $card.css({\"min-height\": \"220px\"});\n  // Get user link\n  var link = $card.find('.card-content-title > a').attr('href');\n  // Create Button\n  var newButton = '<a href=\"'+link+'\" target=\"_blank\" class=\"button\" style=\"margin-top: 10px;\">View Profile</a>'\n  // Attach\n  $card.find('.card-actions').append(newButton)\n}","name":"Stronger CTA + New Tab"},"8307041733":{"name":"Original"},"8307041734":{"code":"/* _optimizely_evaluate=force */\nvar iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nwindow.link = \"https://play.google.com/store/apps/details?id=com.couchsurfing.mobile.android&referrer=utm_source%3Dsite%26utm_medium%3Dmobileweb%26utm_campaign%3D0331test\";\nif(iOS){\nwindow.link = \"https://itunes.apple.com/app/apple-store/id525642917?pt=1067410&ct=Mobile%20Web%20Test&mt=8\";\n}\n/* _optimizely_evaluate=safe */\n$('body').append('<div class=\"app-banner\"><img src=\"//cdn.optimizely.com/img/6250770393/2e42c998282745fea9ff7a1a21e6c463.png\" class=\"app-close\"><a href=\"' + window.link + '\"><img class=\"app-icon\" src=\"//cdn.optimizely.com/img/6250770393/027d6b2c08d343729dcb10e4da93f047.png\"><p>Couchsurfing is faster on our mobile app.&nbsp;<span>Get it now.</span></p><img src=\"//cdn.optimizely.com/img/6250770393/be91bd89d3ce4324b5bd82153215947d.png\" class=\"app-download\"></a></div>');\n$('.app-close').on('click tap', function(){ $('.app-banner').hide();});","name":"Variation #1"},"8251832265":{"code":"$(\".profile-sidebar__verification-button\").html(\"<span aria-hidden=\\\"true\\\" data-icon=\\\"\ue600\\\" class=\\\"icon mod-verified mod-big mod-on-left mod-white\\\"></span>Verify Your Profile\");","name":"Verify Your Profile"},"8271643850":{"name":"Original"},"8329592139":{"name":"Original"},"8267872717":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/JeepersCreepers+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Friends in Jeep"},"8332624334":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Friends_BBQ+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Friends BBQ"},"8298141736":{"code":"$(\".verification-members\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".verification-people-say\").css({\"display\":\"none\", \"visibility\":\"\"});\n$(\".company-testimonials\").css({\"display\":\"none\", \"visibility\":\"\"});","name":"Cut Off After Benefits"},"8275135060":{"code":"$(\"section.mod-join\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Shutterstock/shutterstock_496220794.jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\"section.mod-join\").css({\"background-position\":\"40% 40%\"});\n\n$(\"h1.hero-content-title\").css({\"color\":\"#fffff\"});","name":"Ice Cream"},"8255121880":{"code":"$(\".profile-sidebar__verification-button\").html(\"<span aria-hidden=\\\"true\\\" data-icon=\\\"\ue600\\\" class=\\\"icon mod-verified mod-big mod-on-left mod-white\\\"></span>Become Verified\");","name":"Become Verified"},"8312753614":{"name":"Original"},"8274163163":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Friends_BBQ+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Friends BBQ"},"8253294429":{"name":"Original"},"8327174878":{"code":"var $cards = $('.card.mod-user')\nfor(var i = 0; i < $cards.length; i++) {\n  $card = $($cards[i])\n  // Fix card height\n  $card.css({\"min-height\": \"220px\"});\n  // Get user link\n  var link = $card.find('.card-content-title > a').attr('href');\n  // Create Button\n  var newButton = '<a href=\"'+link+'\" target=\"_blank\" class=\"button\" style=\"margin-top: 10px;\">View Profile</a>'\n  // Attach\n  $card.find('.card-actions').append(newButton)\n}","name":"Stronger CTA + New Tab"},"8308836576":{"code":"/* _optimizely_evaluate=force */\nvar iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nwindow.link = \"https://play.google.com/store/apps/details?id=com.couchsurfing.mobile.android&referrer=utm_source%3Dsite%26utm_medium%3Dmobileweb%26utm_campaign%3D0331test\";\nif(iOS){\nwindow.link = \"https://itunes.apple.com/app/apple-store/id525642917?pt=1067410&ct=Mobile%20Web%20Test&mt=8\";\n}\n/* _optimizely_evaluate=safe */\n$('body').append('<div class=\"app-banner\"><img src=\"//cdn.optimizely.com/img/6250770393/2e42c998282745fea9ff7a1a21e6c463.png\" class=\"app-close\"><a href=\"' + window.link + '\"><img class=\"app-icon\" src=\"//cdn.optimizely.com/img/6250770393/027d6b2c08d343729dcb10e4da93f047.png\"><p>Couchsurfing is faster on our mobile app.&nbsp;<span>Get it now.</span></p><img src=\"//cdn.optimizely.com/img/6250770393/be91bd89d3ce4324b5bd82153215947d.png\" class=\"app-download\"></a></div>');\n$('.app-close').on('click tap', function(){ $('.app-banner').hide();});","name":"Variation #1"},"8325084218":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Boat+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Selfie Boat"},"8333470437":{"code":"var $cards = $('.card.mod-user')\nfor(var i = 0; i < $cards.length; i++) {\n  $card = $($cards[i])\n  // Fix card height\n  $card.css({\"min-height\": \"220px\"});\n  // Get user link\n  var link = $card.find('.card-content-title > a').attr('href');\n  // Create Button\n  var newButton = '<a href=\"'+link+'\" class=\"button\" style=\"margin-top: 10px;\">View Profile</a>'\n  // Attach\n  $card.find('.card-actions').append(newButton)\n}","name":"Stronger CTA"},"8333392016":{"name":"Original"},"8261944295":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/Boat+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Selfie Boat"},"8332642669":{"name":"Original"},"8321344879":{"name":"Original"},"8250733936":{"code":"$(\".test-to-do-list .mod-bulleted > li:eq(0)\").html(\"Find hosts up to 2x faster\");\n$(\".test-to-do-list .mod-bulleted > li:eq(1)\").html(\"Have your profile highlighted across the site\");\n$(\".test-to-do-list .mod-bulleted\").replaceWith(\"<ul class=\\\"mod-bulleted\\\">\\n        <li>Find hosts up to 2x faster</li>\\n        <li>Have your profile highlighted across the site</li>\\n    \\n      </ul>\");\n$(\".mod-verification\").html(\"Verify\");\n$(\".test-to-do-list > .box-content > section:eq(0) > div:eq(2) > ul:eq(0) > li:eq(0) > a:eq(0)\").html(\"Upgrade\");","name":"Upgrade"},"8330634225":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/SunSmiley+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Sunny Friends"},"8328850290":{"name":"Original"},"8325279094":{"name":"Variation #1"},"8334370427":{"code":"$(\".hero\").css({\"background-image\":\"none\"});\n$(\".hero\").css({\n  \"background\": \"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(\\\"https://marketing-assets.couchsurfing.com/JeepersCreepers+(1).jpg\\\")\",\n  \"background-position\":\"center-top\",\n  \"background-size\":\"cover\"\n});\n$(\".hero\").css({\"background-position\":\"40% 40%\"});","name":"Friends in Jeep"},"8292393725":{"name":"Original"},"8254066046":{"code":"$(\".profile-sidebar__verification-button\").html(\"<span aria-hidden=\\\"true\\\" data-icon=\\\"\ue600\\\" class=\\\"icon mod-verified mod-big mod-on-left mod-white\\\"></span>Verify Account\");","name":"Verify Account"}},"project_js":"/* pollForDelayedContent function Project JS v1 */\nwindow.pollForDelayedContent=function(e,n,t){var i=+new Date,o=50;t=t||{};var l=t.selectorToHide||e,d=t.unhideDelayInMilliseconds||0,s=1e3*t.timeoutInSeconds||null,a=t.intervalInMilliseconds||o,r=function(e){var n=\"optlyHide_\"+ +new Date;return $(\"head\").prepend(\"<style id='\"+n+\"' type='text/css'>\"+e+\" {visibility:hidden !important;}</style>\"),function(){$(\"#\"+n).remove()}},u=r(l),c=function(){n(),setTimeout(u,d)},v=function(){var n=+new Date;$(e).length?c():s&&n-i>s?u():setTimeout(v,a)};v()};\n\n\n\n\n","segments":{"6262200512":{"segment_value_type":"mobile","api_name":"optimizely_mobile","id":6262200512,"name":"Mobile Visitors"},"8205911074":{"api_name":"account_created_date","is_api_only":true,"dimension_id":8200915474,"id":8205911074,"name":"Account Creation Date"},"8211203043":{"api_name":"has_surfed","is_api_only":true,"dimension_id":8207421977,"id":8211203043,"name":"Has surfed"},"8211540624":{"api_name":"profile_location","is_api_only":true,"dimension_id":8208234648,"id":8211540624,"name":"Profile Location"},"8203105736":{"api_name":"gender","is_api_only":true,"dimension_id":8207864170,"id":8203105736,"name":"Gender"},"6256040619":{"segment_value_type":"source_type","api_name":"optimizely_source_type","id":6256040619,"name":"Source Type"},"8208640628":{"api_name":"is_verified","is_api_only":true,"dimension_id":8206472341,"id":8208640628,"name":"Is verified"},"8210522224":{"api_name":"has_hosted","is_api_only":true,"dimension_id":8208451834,"id":8210522224,"name":"Has hosted"},"8205962622":{"api_name":"birth_date","is_api_only":true,"dimension_id":8202775607,"id":8205962622,"name":"Birth date"},"8203854836":{"api_name":"locale","is_api_only":true,"dimension_id":8211530149,"id":8203854836,"name":"Locale"},"8328627670":{"api_name":"user_id","is_api_only":true,"dimension_id":8328534776,"id":8328627670,"name":"User ID"},"8233820440":{"audience_id":8234150295,"id":8233820440,"name":"Male Audience"},"6256730430":{"segment_value_type":"browser","api_name":"optimizely_browser","id":6256730430,"name":"Browser"},"6272190004":{"segment_value_type":"campaign","api_name":"optimizely_campaign","id":6272190004,"name":"Campaign"}},"click_goals":[{"event_name":"join_top_right_button","experiments":{"7024920224":true,"6525500610":true,"6606712967":true,"6499060331":true,"6496791501":true,"6591230515":true,"6436643735":true},"selector":"a.mod-join"},{"event_name":"login_button","experiments":{"7024920224":true,"6525500610":true,"6606712967":true,"6499060331":true,"6496791501":true,"6591230515":true,"6436643735":true},"selector":".mod-outline"},{"event_name":"fb_clicks","experiments":{"7024920224":true,"6525500610":true,"6606712967":true,"6499060331":true,"6496791501":true,"6591230515":true,"6436643735":true},"selector":".mod-inline-web a.mod-facebook"},{"event_name":"join_with_email","experiments":{"7024920224":true,"6525500610":true,"6606712967":true,"6499060331":true,"6496791501":true,"6591230515":true,"6436643735":true},"selector":".mod-join .mod-couchsurfing"},{"event_name":"join_button_-_sign_up_with_email","experiments":{"7024920224":true,"6499060331":true,"6496791501":true,"6591230515":true},"selector":".mod-full-width"},{"event_name":"get_verified_--_paypal_clicks","experiments":{"6518261711":true,"6729910106":true,"6913840243":true,"6525500610":true,"6988150506":true},"selector":".verification-paypal img"},{"event_name":"get_verified_--_cc_clicks","experiments":{"6518261711":true,"6729910106":true,"6913840243":true,"6525500610":true,"6988150506":true},"selector":".stripe-button-el"},{"event_name":"ready_for_adventure_-_plan_a_trip_(variation)","experiments":{"6606712967":true},"selector":"#how-it-works .mod-couchsurfing"},{"event_name":"ready_for_adventure?_plan_a_trip","experiments":{"6606712967":true},"selector":".mod-adventure .mod-couchsurfing"},{"event_name":"plan_a_trip","experiments":{"7024920224":true,"6591230515":true},"selector":".mod-adventure .mod-couchsurfing"},{"event_name":"ready_for_adventure_-_plan_a_trip_(variant)","experiments":{"6525500610":true},"selector":".mod-margin-top > .mod-inline-web"},{"event_name":"explore_the_world_-_plan_a_trip","experiments":{"6606712967":true},"selector":".mod-margin-top > .mod-couchsurfing,a.mod-join"},{"event_name":"ready_for_adventure_-_plan_trip_(original)","experiments":{"6525500610":true},"selector":".mod-adventure .mod-couchsurfing"},{"event_name":"explore_the_world_-_plan_trip_(original)","experiments":{"6525500610":true},"selector":".mod-margin-top > .mod-couchsurfing"},{"event_name":"verify_my_account","experiments":{"7593010232":true,"7469716625":true,"7285700843":true,"6733276532":true,"7518641517":true},"selector":".verification-form__submit-button,.js-verify-my-account"},{"event_name":"cc_input","experiments":{"6733276532":true},"selector":"#card_number"},{"event_name":"cvc_input","experiments":{"6920930603":true,"7165800331":true,"6896710035":true,"6733276532":true,"6992600662":true,"6918912157":true},"selector":"#card_code"},{"event_name":"month_/_year_input","experiments":{"6733276532":true},"selector":".verification-form__date"},{"event_name":"meet_jason","experiments":{"6799961559":true},"selector":".mod-no-mobile > a:eq(1)"},{"event_name":"meet_lynette","experiments":{"6799961559":true},"selector":".mod-no-mobile > a:eq(0)"},{"event_name":"meet_syril","experiments":{"6799961559":true},"selector":".grid-items > .grid-item"},{"event_name":"verify_with_cc_-_bottom","experiments":{"6920930603":true,"6896710035":true,"6918912157":true,"6992600662":true},"selector":".js-hide-buttons > .js-verify-my-account"},{"event_name":"verify_with_pp_-_header","experiments":{"6920930603":true,"6896710035":true,"6918912157":true,"6992600662":true},"selector":".verification__button-wrapper > .verification__button--paypal"},{"event_name":"verify_with_cc_-_header","experiments":{"6920930603":true,"6896710035":true,"6918912157":true,"6992600662":true},"selector":".verification__button-wrapper > .js-verify-my-account,#cboxClose"},{"event_name":"verify_with_pp_-_bottom","experiments":{"6920930603":true,"6896710035":true,"6918912157":true,"6992600662":true},"selector":".js-hide-buttons > .verification__button--paypal"},{"event_name":"verify_with_cc_-_banner","experiments":{"6920930603":true,"6896710035":true,"6918912157":true,"6992600662":true},"selector":".header-wrapper > .js-verify-my-account"},{"event_name":"verify_with_pp_-_banner","experiments":{"6896710035":true,"6920930603":true,"6918912157":true,"6992600662":true},"selector":".header-wrapper > .verification__button--paypal"},{"event_name":"paypal_--_original","experiments":{"6988150506":true},"selector":"img"},{"event_name":"join_fb_-_top","experiments":{"7248551461":true},"selector":".mod-inline-web a.mod-facebook"},{"event_name":"join_3_-_plan_trip","experiments":{"7248551461":true},"selector":".mod-margin-top > .mod-couchsurfing"},{"event_name":"search_bar_clicks","experiments":{"7248551461":true,"7098110566":true},"selector":".inline-search"},{"event_name":"join_email_-_top_banner","experiments":{"7248551461":true},"selector":".mod-join .mod-couchsurfing"},{"event_name":"join_4_-_plan_trip","experiments":{"7248551461":true},"selector":".mod-adventure .mod-couchsurfing"},{"event_name":"top_right_join","experiments":{"7248551461":true},"selector":"a.mod-join"},{"event_name":"get_verified_banner_#2","experiments":{"7662791639":true,"7633180276":true,"7723441180":true,"7658417828":true},"selector":".mod-no-margin-top > .box-content > a:eq(1) > img:eq(0),.mod-no-margin-top > .box-content > a:eq(1) > div:eq(0),.mod-no-margin-top > .box-content > a:eq(1) > div:eq(0) > p:eq(1),.mod-no-margin-top > .box-content > a:eq(1) > div:eq(0) > p:eq(0)"},{"event_name":"get_verified_banner_click_#1","experiments":{"7662791639":true,"7633180276":true,"7723441180":true,"7658417828":true},"selector":".mod-no-margin-top > .box-content > a:eq(0) > img:eq(0),.mod-no-margin-top > .box-content > a:eq(0) > div:eq(0),.mod-no-margin-top > .box-content > a:eq(0) > div:eq(0) > p:eq(0),.mod-no-margin-top > .box-content > a:eq(0) > div:eq(0) > p:eq(1)"},{"event_name":"variation_--_second_banner_click","experiments":{"7662791639":true,"7763734263":true,"7658417828":true,"7633180276":true,"7723441180":true},"selector":".mod-no-margin-top > .box-content > img:eq(1),.mod-no-margin-top > .box-content > a:eq(1) > div:eq(0) > p:eq(0),.mod-no-margin-top > .box-content > a:eq(1) > div:eq(0) > p:eq(1),.mod-no-margin-top > .box-content > a:eq(1) > div:eq(0)"},{"event_name":"search_by_map_click","experiments":{"7662791639":true,"7763734263":true,"7658417828":true,"7633180276":true,"7723441180":true},"selector":".mod-no-margin-top > .box-content > img:eq(0),.mod-no-margin-top > .box-content > a:eq(0) > div:eq(0),.mod-no-margin-top > .box-content > a:eq(0) > div:eq(0) > p:eq(1),.mod-no-margin-top > .box-content > a:eq(0) > div:eq(0) > p:eq(0)"},{"event_name":"paypal_clicks","experiments":{"7969291904":true,"8036681042":true,"7962900920":true,"8070060762":true,"7970280014":true},"selector":".js-paypal-modal-button,.js-paypal-redirect-button,#paypal-container"},{"event_name":"cc_clicks","experiments":{"7969291904":true,"8036681042":true,"7962900920":true,"8070060762":true,"7970280014":true},"selector":".verification__button-wrapper > .js-verify-my-account,.js-hide-if-mobile > .js-verify-my-account,a.-header"},{"event_name":"verify_account_click","experiments":{"8131032168":true,"8006324202":true,"7881743774":true},"selector":".mod-verification"},{"event_name":"verify_clicks","experiments":{"8146581005":true},"selector":".mod-white"},{"event_name":"clicks_download_banner","experiments":{"8311931642":true,"8306071669":true},"selector":".app-download"},{"event_name":"clicks_view_profile","experiments":{"8325832486":true},"selector":".mod-no-margin-top > .box-content > div:eq(0) > div:eq(1) > div:eq(1) > a:eq(0)"}]};

function h(a){throw a;}var i=void 0,j=!0,k=null,o=!1;function aa(){return function(a){return a}}function ba(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ca(a,b,c){return a.call.apply(a.bind,arguments)}function da(a,b,c){a||h(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ca:da;return p.apply(k,arguments)}function t(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};function u(a){try{return window.JSON.stringify(a)}catch(b){h(Error("JSON: Unable to stringify ("+b.message+")"))}}function ea(a){try{return window.JSON.parse(a)}catch(b){h(Error("JSON: Unable to parse ("+b.message+")"))}};var fa=/\s*;\s*/,ha=/^([^=]+)=?(.*)$/;function v(a){var b=[];w(ia(),function(c){a===c.name&&b.push(ja(c.value))});if(0===b.length)return k;1<b.length&&x("Cookie","Values found for %s: %s",a,b.length);return b.pop()}var ka=o;function ia(){var a,b=[];a=a||"";w((document.cookie||"").split(fa),function(c){var d=c.match(ha);d&&0===d[1].indexOf(a)&&b.push({name:d[1],value:d[2],P:c})});return b}
function y(a,b,c){if(ka)x("Cookie","Already initialized.");else{x("Cookie","Initializing.");var d=document.location.hostname;if(la()){ma=d;for(var d=document.location.hostname.split("."),e=[],f=d.length-1;0<=f;--f){var g=d.slice(f).join("."),l="optimizelyDomainTest-"+Math.random().toString(16).replace("0.",""),m=Math.random().toString(16).replace("0.","");na(l,m,g,3);v(l)===m&&e.push(g)}oa=e;0<oa.length?(ma=oa[0],x("Cookie","Highest level domain: %s",ma)):(x("Cookie","Disabling event tracking because cookies could not be set"),
qa=o)}else e=d.split("."),f=d,g=e[e.length-1],2<e.length&&"appspot"===e[e.length-2]&&"com"===g?f=e[e.length-3]+".appspot.com":1<e.length&&ra(g,ta)&&(f=e[e.length-2]+"."+g),ua=f,x("Cookie","Guessed public suffix: %s",ua),va=wa(d),x("Cookie","Public suffix (from data): %s",va);xa&&x("Cookie","Domain specified by API: %s",xa);ka=j;x("Cookie","Done initializing.")}b=b||"";la()?(w(oa,function(b){ya(a,b)}),d=za(),na(a,b,d,c),c=v(a)===b?"Succeeded":"Failed",x("Cookie","%s setting %s=%s on %s",c,a,b,d)):
(d=za(),e=document.location.hostname,!va&&z("remote_public_suffix")&&Aa.push({yb:c,name:a,value:b}),d&&(d===va&&d!==ua)&&(ya(a,e),ya(a,ua)),na(a,b,d,c),f=v(a),f===b)?x("Cookie","Successfully set %s=%s on %s",a,b,d):(x("Cookie","Setting %s on %s apparently failed (%s != %s)",a,d,f,b),x("Cookie","Setting %s on %s",a,e),na(a,b,e,c),f=v(a),f===b?(x("Cookie","Setting %s on %s worked; saving as new public suffix",a,e),ua=e):(x("Cookie","Could not set cookie %s, disabling event tracking.",a),qa=o))}
function ya(a,b){var c=[a,"=","; ",Ba(b),"; path=/","; expires=",(new Date(0)).toUTCString()];document.cookie=c.join("")}function za(){return la()?xa||ma:xa||va||ua}function Ba(a){var b=[];b.push("domain=");"localhost"!==a&&(b.push("."),b.push(a));return b.join("")}function na(a,b,c,d){a=[a,"=",encodeURIComponent(b),"; ",Ba(c),"; path=/"];d&&a.push("; expires=",(new Date(+new Date+1E3*d)).toUTCString());document.cookie=a.join("")}
function Ca(a){za()!==a&&(xa=String(a)||"",x("Cookie","Api public suffix set to: %s",xa))}var ua="",xa="",ma="",oa=[],va="",Aa=[];var Da=window.OPTIMIZELY_TEST_MODULE,ta="com local net org xxx edu es gov biz info fr nl ca de kr it me ly tv mx cn jp il in iq test".split(" "),Ea=/\/\*\s*_optimizely_variation_url( +include="([^"]*)")?( +exclude="([^"]*)")?( +match_type="([^"]*)")?( +include_match_types="([^"]*)")?( +exclude_match_types="([^"]*)")?( +id="([^"]*)")?\s*\*\//;var Fa=0,Ga=o,B=j,Ha=j,Ia=o,Ja=o,Ka=o,La=o,Ma="",Na=o,Oa=o,Pa=o,Qa=o,Ra=o,Sa=o,qa=j,Ua=31536E4;function Va(){var a=v("optimizelyEndUserId");a||(a="oeu"+ +new Date+"r"+Math.random(),y("optimizelyEndUserId",a,Ua));return a}function Wa(){return v("optimizelyPPID")};function Xa(a,b){var c=j;w(a,function(a){if(!b(a))return c=o});return c}function D(a,b){var c=o;w(a,function(a){if(b(a))return c=j});return c}function E(a,b){for(var c=0;c<a.length;c++)if(b==a[c])return j;return o}function Ya(a,b){var c=Za(arguments,1);return function(){var b=Za(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}
function w(a,b){var c=k;if(F(a))for(var d=a.length,e=0;e<d&&!(c=b.call(i,a[e],e),H(c));++e);else for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&(c=b.call(i,d,a[d]),H(c)))break;return c}function I(a,b){if("function"===typeof a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}function J(a,b){w(b,function(b,d){a[b]=d});return a}function $a(a,b){if(F(b)){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(!ba(c)||!c.hasOwnProperty(e))return;c=c[e]}return c}}
function K(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f)&&c.push(f)}return c}function ra(a,b){return w(b,function(b){if(b===a)return j})||o}function F(a){return!!a&&"object"===typeof a&&"number"===typeof a.length}function H(a){return"undefined"!==typeof a}function ab(a){return"object"===typeof a&&a!==k}function bb(a){return("number"===typeof a||"string"===typeof a)&&Number(a)==a}function cb(a){return"string"===typeof a}
function L(a){L=Object.zb||function(a){var c=[];w(a,function(a){c.push(a)});return c};return L.call(k,a)}
function db(a,b){function c(){var b=document.head||document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("script");c.src=a;c.type="text/javascript";b.appendChild(c)}if(b)try{if("loading"===document.readyState){var d="optimizely_synchronous_script_"+Math.floor(1E5*Math.random());-1!==a.indexOf('"')?M("loadScript","Blocked attempt to load unsafe script: "+a):(document.write('<script id="'+d+'" src="'+a+'"><\/script>'),1!==$("#"+d).length&&h(Error("Document.write failed to append script")))}else h(Error("Not safe to attempt document.write"))}catch(e){try{var f=
new XMLHttpRequest;f.open("GET",a,o);f.onload=function(){eval(f.responseText)};f.onerror=function(){h(Error())};f.send()}catch(g){x("Common","Failed to load %s synchronously",a),c()}}else c()}function x(a,b,c){var d=window.console;if(Pa&&d&&d.log){var e=Za(arguments,1);e[0]="Optimizely / "+a+" / "+b;Function.prototype.apply.call(d.log,d,e)}}function ja(a){try{return decodeURIComponent(a)}catch(b){return a}}function Za(a,b){return Array.prototype.slice.call(a,b||0,a.length)}
function eb(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function fb(a){this.r=a;this.c={totalGets:0,totalGetLength:0,totalGetTime:0,totalSets:0,totalSetLength:0,totalSetTime:0,numKeys:0,totalSize:0}}fb.prototype.get=function(a){try{var b=+new Date,c=this.r.getItem([gb,a].join("$$")),d=ea(c);this.c.totalGetTime+=+new Date-b;this.c.totalGets++;this.c.totalGetLength+=(c||"").length;return d}catch(e){return k}};
fb.prototype.set=function(a,b){try{var c=+new Date,d=u(b);H(b)?this.r.setItem([gb,a].join("$$"),d):this.r.removeItem([gb,a].join("$$"));this.c.totalSetTime+=+new Date-c;this.c.totalSets++;this.c.totalSetLength+=d.length}catch(e){}};fb.prototype.wa=function(){var a=0,b=0,c;for(c in this.r)if(0===c.indexOf(gb)){b++;var d=this.r.getItem(c),a=a+(c.length+(d?d.length:0))}this.c.numKeys=b;this.c.totalSize=a;return this.c};
var hb={get:function(){},set:function(){},wa:function(){return{}}},gb="optimizely_data",N=hb,ib=hb;
try{var N=new fb(window.localStorage),ib=new fb(window.sessionStorage),jb=N,kb=jb.r.getItem(gb),lb={};try{lb=ea(kb)||{}}catch(mb){}if(0!==L(lb).length){var nb=Wa()||v("optimizelyEndUserId"),ob=lb[nb]||{},pb;for(pb in ob)if(ob.hasOwnProperty(pb)){var qb=[nb,pb].join("$$");jb.get(qb)===k&&jb.set(qb,ob[pb])}delete lb[nb];for(pb in lb)lb.hasOwnProperty(pb)&&(jb.get(pb)===k&&jb.set(pb,lb[pb]),delete lb[pb]);try{kb=u(lb)}catch(rb){kb={}}jb.r.setItem(gb,kb)}}catch(sb){};function tb(){return z("admin_account_id")}function ub(a){return z("audiences",a)}function vb(a){a=z("audiences",a,"segment_id");return!a?k:a}
function wb(){if(!xb){var a=z("click_goals")||[];xb=[];for(var b=0,c=a.length;b<c;b++)for(var d=a[b],e=d.selector.split(","),f=0,g=e.length;f<g;f++){var l=e[f];l&&(l={event_name:d.event_name,selector:l},"experiments"in d?l.experiments=d.experiments:"url_conditions"in d&&(l.url_conditions=d.url_conditions),"revenue"in d&&(l.revenue=d.revenue),xb.push(l))}}return xb}function yb(a,b){return z("dimensions",a,b)}function zb(a){a=yb(a,"condition_type");return!a?k:a}
function Ab(a){a=yb(a,"name");return!a?k:a}function Cb(){Db||(Db=K(Eb(),Fb));return Db}function Gb(a){var b=z("goal_expressions"),c=[],d;for(d in b)if(b.hasOwnProperty(d))for(var e=b[d],f=0;f<e.length;f++)try{if(RegExp(e[f],"i").test(a)){c.push(d);break}}catch(g){}return c}function Hb(a){var b=Ib(),c;for(c in b)if(Object.prototype.hasOwnProperty.call(b,c)){var d=b[c];if(d&&d.api_name===a)return String(c)}return k}function Jb(){return z("experiments")||{}}
function Eb(){return L(z("experiments")||{})}function Kb(a){return"manual"===O(a,"activation_mode")}function Lb(a){return"conditional"===O(a,"activation_mode")}function Mb(a){return O(a,"name")||"Exp "+a}function Nb(a){return'experiment "'+Mb(a)+'" ('+a+")"}function Ob(a){return O(a,"section_ids")||[]}function Pb(a){return O(a,"variation_ids")||[]}function Qb(){return z("list_targeted_keys")||{}}function P(){return z("project_id")}function Ib(){return z("segments")||{}}
function Rb(a,b){for(var c=Ob(a),d=0;d<c.length;d++){var e=Sb(c[d]);if(E(e,b))return c[d]}return""}function wa(a){var b={},c=z("public_suffixes")||{};w(c,function(a,c){w(c,function(c){b[c]=a})});wa=function(a){return b[a]||""};return wa.call(k,a)}function Sb(a){return z("sections",a,"variation_ids")||[]}function Tb(a){var b=[];w(a.split("_"),function(a){(a=z("variations",a,"code"))&&b.push(a)});return b.join("\n")}
function Q(a){if(!Ub){var b={};w(Eb(),function(a){w(Ob(a),function(d){w(Sb(d),function(d){b[d]=a})});w(Pb(a),function(d){b[d]=a})});Ub=b}return Ub[a.split("_")[0]]||""}function Vb(a){var b=Q(a),c=Ob(b);if(0===c.length){c=Pb(b);for(b=0;b<c.length;b++)if(c[b]===a)return b}else{for(var a=a.split("_"),b=[],d=0;d<c.length;d++)for(var e=Sb(c[d]),f=0;f<e.length;f++)e[f]===a[d]&&b.push(f);if(b!==[])return b}return-1}function Wb(a){var b;return Xb(a).join(b||", ")}
function Xb(a){var b=[];w(a.split("_"),function(a){b.push(z("variations",a,"name")||"Var "+a)});return b}function Yb(){return z("www_host")}function Fb(a){return!!O(a,"enabled")}function la(){return!!z("simple_cookies")}function O(a,b){return z("experiments",a,b)}function Zb(a){a=O(a,"comscore");return H(a)?a.url:k}function $b(a){return O(a,"google_analytics")}function ac(a,b){var c=O(a,"universal_analytics");return H(c)?c[b]:k}
function z(a){var b=DATA;if(w(arguments,function(a){a=b[a];if(H(a))b=a;else return k})!==k)return b}function bc(a,b){return z("segments",a,b)}function cc(){var a=z("rum_sampling_rate");return H(a)?a:0.003}var xb=k,Db=k,Ub=k;function dc(a,b){function c(a,b){var c=b&65535;return((b-c)*a|0)+(c*a|0)|0}for(var d=a.length,e=b||0,f=d&-4,g,l=0;l<f;l+=4)g=a.charCodeAt(l)&255|(a.charCodeAt(l+1)&255)<<8|(a.charCodeAt(l+2)&255)<<16|(a.charCodeAt(l+3)&255)<<24,g=c(g,3432918353),g=(g&131071)<<15|g>>>17,g=c(g,461845907),e^=g,e=(e&524287)<<13|e>>>19,e=5*e+3864292196|0;g=0;switch(d%4){case 3:g=(a.charCodeAt(f+2)&255)<<16;case 2:g|=(a.charCodeAt(f+1)&255)<<8;case 1:g|=a.charCodeAt(f)&255,g=c(g,3432918353),e^=c((g&131071)<<15|g>>>17,461845907)}e^=
d;e=c(e^e>>>16,2246822507);e=c(e^e>>>13,3266489909);return e^e>>>16};var ec=Math.pow(2,32);function fc(a,b){var c=dc(a,b);return(c>>>16).toString(16)+(c&65535).toString(16)};function gc(){return hc=hc||ic()}function jc(){return gc().aa}function kc(){return gc().ba}function lc(){return gc().F}function mc(a){if(!a)return"";try{return a.match(/:\/\/(?:www[0-9]?\.)?(.[^/:]+)/)[1]}catch(b){return""}}function nc(){return gc().platform}function oc(a){return N.get([Wa()||Va(),a].join("$$"))}function pc(a){N.set([Wa()||Va(),"asyncInfo"].join("$$"),a)}
function qc(){var a="android;blackberry;ipad;iphone;ipod;windows phone".split(";");return E(a,lc().id)?lc().id:E(a,nc().id)?nc().id:rc()?"mobile":"unknown"}function rc(){return lc().w}function sc(){return tc?"returning":"new"}nc=function(){return gc().platform};function uc(a){x("User","Setting current URL to %s",a);vc=a}var vc=i,hc=i,tc=i;function M(a,b,c){wc.push({Fa:new Date,Da:a,message:b,ua:c||o});xc&&yc()}function zc(){Pa=j}function Ac(){Qa=Pa=j}function yc(){Pa&&(w(wc,function(a){if(!a.cb&&(!a.ua||a.ua===Qa)){var b=+a.Fa;x(a.Da,a.message+(" [time "+(Bc?b-Bc:0)+" +"+(Cc?b-Cc:0)+"]"));Cc=b;Bc||(Bc=b);a.cb=j}}),xc=j)}var Cc=k,Bc=k,wc=[],xc=o;var R={};function Dc(a,b){R[a]=b}function Ec(a,b){var c=oc("asyncInfo")||{};c[a]=b;pc(c)}function Gc(){var a=(R.odds||k)&&(R.odds||k).ip||(R.cdn3||k)&&(R.cdn3||k).ip;return a?Hc(a):k}function Ic(){return!R.odds?k:(R.odds||k).lists||{}}
function Jc(a){if(!Ic())return M("Async Info","Invalid response from ODDS"),{value:i,M:o};if(!Ic().hasOwnProperty(a))return M("Async Info","Deduced cachetime value that was checked for presence in list: "+a),{value:i,M:j};var b=!R.odds?k:(R.odds||k).lists_metadata||{};if(!b||!b[a]||!b[a][0])return M("Async Info","Can't find cachetime value that was checked for presence in list: "+a),{value:i,M:o};M("Async Info","Found cachetime value that was checked for presence in list: "+a);return{value:b[a][0].value,
M:j}}function Kc(a){var b=Qb()[a],c=H(b)&&Lc(b);if(c){var d=Mc(b);if(d===k)return M("Async Info","Deduced membership status (false) for list: "+a),o;M("Async Info","Found current value to check for presence in list: "+a)}b=Ic();if(!b)return M("Async Info","No list membership info."),k;if(c&&(c=Jc(a),c.M&&c.value!==d))return M("Async Info","Ignoring out-of-date membership status for list: "+a),k;d=!!b[a];M("Async Info","Found membership status ("+d+") for list: "+a);return d}
function Nc(){if(!R.cdn3)return k;var a=(R.cdn3||k).location||{};return{continent:Hc(a.continent),country:Hc(a.country),region:Hc(a.region),city:Hc(a.city)}}var Oc={get:function(){return R.dcps||k},set:function(a){Ec("dcps",a);R.dcps=a}};function Pc(){var a=Oc.get();return!a||a.rulesResults===k?k:a.rulesResults||{}}function Hc(a){return"string"!==typeof a||"N/A"===a.toUpperCase()?k:a.toUpperCase()};function Qc(a){a=a||{};if(qa){a&&a.sVariable&&(Rc=a.sVariable);var b=Rc||("undefined"!==typeof window.s?window.s:k);if(b)if(Sc){a=Tc;if(a!==k&&b)try{x("Integrator","Fixing SiteCatalyst referrer to %s",a),b.referrer=String(a)}catch(c){x("Integrator","Error setting SiteCatalyst referrer: %s",c)}x("Integrator","Tracking with SiteCatalyst");w(Uc(),function(a){var c=Q(a),a=S(c,a,100,100,25,j),f=a.key+": "+a.value,a=[],g=O(c,"site_catalyst_evar")||k,c=O(c,"site_catalyst_prop")||k;g!==k&&a.push("eVar"+g);
c!==k&&a.push("prop"+c);w(a,function(a){x("Integrator","Setting SiteCatalyst %s='%s'",a,f);b[a]=f})})}else Vc=j;else M("Integrator","Error with SiteCatalyst integration: 's' variable not defined")}}function Wc(a){a=bb(a)?Number(a):-1;if(-1!==[1,2,3].indexOf(a))Xc=a;else return Xc}
function Yc(){if(qa){var a=Tc;if(a!==k)try{x("Integrator","Fixing _gaq._setReferrerOverride with %s",a),_gaq.push(["_setReferrerOverride",a])}catch(b){x("Integrator","Error setting Google Analytics referrer: %s",b)}var c=[];w(Uc(),function(a){var b=Q(a);if(O(b,"chartbeat")){var d=Zc;Zc="";var e=S(b,a,10,10,5,o);Zc=d;d=Vb(a);$c=e.key+": "+String(d);try{x("Integrator","Calling _cbq.push"),_cbq.push(["_optlyx",$c])}catch(n){M("Integrator","Error sending Chartbeat data for "+Nb(b))}}if(Zb(b)){var e=Zb(b),
d=S(b,a,100,100,25,j),r=e+(-1!==e.indexOf("?")?"&":"?")+"optimizely_experiment_id="+b+"&optimizely_experiment_name="+encodeURIComponent(d.key)+"&optimizely_variation_id="+a+"&optimizely_variation_name="+encodeURIComponent(d.value)+"&ns_m_exp=("+b+") "+encodeURIComponent(d.key)+"&ns_m_chs=("+a+") "+encodeURIComponent(d.value)+"&type=hidden";try{$(window).load(function(){M("Integrator","Sending comScore log call");ad(r,k)})}catch(q){M("Integrator","Error sending comScore data for "+Nb(b))}}if(O(b,"crazyegg")){e=
S(b,a,100,100,15,o);try{x("Integrator","Defining CE_SNAPSHOT_NAME"),window.CE_SNAPSHOT_NAME=e.key+": "+e.value}catch(G){M("Integrator","Error sending CrazyEgg data for "+Nb(b))}}if($b(b)){e=$b(b);d=0;H(e)&&(d=e.slot||d);var e=d,d=$b(b),A="";H(d)&&(A=d.tracker||A);d=A;A=S(b,a,28,24,5,j);try{var C="";""!==d&&(C=d+".");x("Integrator","Calling _gaq._setCustomVar for slot %d and scope %d",e,Xc);_gaq.push([C+"_setCustomVar",e,A.key,A.value,Xc])}catch(pa){M("Integrator","Error sending Google Analytics data for "+
Nb(b))}}if(O(b,"inspectlet")){e=Zc;Zc="";d=S(b,a,100,100,25,o);Zc=e;try{M("Integrator","Calling __insp.push for sending data to Inspectlet"),window.__insp=window.__insp||[],window.__insp.push(["tagSession",{"Optimizely Experiment Name":d.key,"Optimizely Variation Name":d.value,"Optimizely Experiment ID":b,"Optimizely Variation ID":a}])}catch(Ta){M("Integrator","Error sending Inspectlet data for "+Nb(b))}}if(z("kissmetrics")){e=S(b,a,100,100,15,j);d={};d[e.key]=e.value;try{x("Integrator","Calling _kmq.set"),
_kmq.push(["set",d])}catch(Be){M("Integrator","Error sending KISSmetrics data for "+Nb(b))}}if(O(b,"mixpanel")){e=S(b,a,100,100,15,o);d={};d[e.key]=e.value;try{x("Integrator","Calling mixpanel.push"),mixpanel.push(["register",d])}catch(Hh){M("Integrator","Error sending Mixpanel data for "+Nb(b))}}if(O(b,"moat")){e=S(b,a,100,100,15,o);e=e.key+": "+e.value;try{x("Integrator","Calling optimizelyMoat.push"),optimizelyMoat.push(e)}catch(Ih){M("Integrator","Error sending Moat data for "+Nb(b))}}O(b,"sessioncam")&&
(c=c.concat(bd(b,a)));O(b,"at_internet")&&(e=S(b,a,28,24,5,j),a=b+"["+encodeURIComponent(e.key)+"]-0-"+a+"["+encodeURIComponent(e.value)+"]",a in cd||(x("Integrator","Queueing AT Internet log call: %s",a),cd[a]=o))});if(0<c.length){a=c;try{M("Integrator","Calling sessioncamConfiguration object"),window.sessioncamConfiguration=window.sessioncamConfiguration||{},window.sessioncamConfiguration.customDataObjects=window.sessioncamConfiguration.customDataObjects||[],window.sessioncamConfiguration.customDataObjects=
window.sessioncamConfiguration.customDataObjects.concat(a)}catch(d){M("Integrator","Error sending sessioncam data "+a)}}0<L(cd).length&&("function"===typeof window.xt_mvt?dd():$(window).bind("load.ATInternet",dd));a=v("optimizelyChartbeat")||"";try{if(a&&$c!=a&&(x("Integrator","Calling _cbq.push for referral"),_cbq.push(["_optlyr",a])),$c!=a)x("Integrator","Set new Chartbeat referral cookie."),y("optimizelyChartbeat",$c)}catch(e){M("Integrator","Error sending Chartbeat referral for "+a)}Sc=j;ed&&
(fd(),ed=o);Vc&&(Qc(),Vc=o)}}
function gd(){if(window.ClickTaleContext){try{window.ClickTaleContext.getAggregationContextAsync("1",function(a){a.Location&&window.optimizely.push(["overrideUrl",a.Location]);for(var b in a.PageEvents){var e=a.PageEvents[b][2].match(/x[0-9]+=[0-9_]+/g);x("Integrator","Playback ClickTale Integration - %s",e);for(b=0;b<e.length;b++){x("Integrator","Playback ClickTale Integration - %s",e[b]);for(var f=e[b].split("=")[0].substr(1),g=e[b].split("=")[1].split("_"),l=0;l<g.length;l++)hd(g[l])?x("Integrator",
"Skip activation for redirect."):window.optimizely.push(["activate",f,g[l],{force:j}])}}})}catch(a){x("Integrator","Playback ClickTale Aggregation Integration failed.")}try{window.ClickTaleContext.getRecordingContextAsync("1.1",function(a){if(a.inSingleRecordingScope){a.location&&window.optimizely.push(["overrideUrl",a.location]);x("Integrator","Playback ClickTale getRecordingContextAsync callback");for(var b in a.fields)x("Integrator","Playback ClickTale Integration - %s=%s",b,a.fields[b]),hd(a.fields[b])?
x("Integrator","Skip activation for redirect."):window.optimizely.push(["activate",b,a.fields[b],{force:j}])}})}catch(b){x("Integrator","Playback ClickTale Recording Integration failed.")}}else x("Integrator","ClickTaleContext not defined.")}
function id(){x("Integrator","Tracking with ClickTale.");"function"==typeof window.ClickTaleField?w(Uc(),function(a){var b=Q(a),c=S(b,a,100,100,15,o),c=c.key+": "+c.value+" (x"+b+"="+a+")";x("Integrator","Setting ClickTale - %s",c);window.ClickTaleField(b,a);window.ClickTaleEvent(c)}):x("Integrator","ClickTaleField() not defined.")}function jd(a){Zc=a}function kd(a){Rc=a}function ld(a,b){return a.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_").substring(0,b)}
function Uc(){var a=md.concat(T),b=[];w(nd(),function(c){var e=Q(c),f=o;if(Fb(e)){var g=Wb(c);E(a,e)&&(x("Integrator",'"%s" relevant because experiment active',g),f=j);f&&b.push(c)}});var c=od;c&&b.push(c);return b}function hd(a){if(a=Tb(a))if(a=pd(a.toString()))return a[1];return k}
function fd(){if(qa)if(Sc){var a=window[window.GoogleAnalyticsObject||"ga"];if(a){var b=Tc;if(b!==k)try{x("Integrator","Fixing Universal Analytics set referrer with %s",b),(0,window[window.GoogleAnalyticsObject||"ga"])("set","referrer",b)}catch(c){x("Integrator","Error setting Universal Analytics referrer: %s",c)}x("Integrator","Tracking with Universal Analytics");w(Uc(),function(b){var c=Q(b);if(ac(c,"slot")){var f=ac(c,"slot"),g=ac(c,"tracker"),l=S(c,b,100,100,25,j),b=l.key+" ("+c+"): "+l.value;
150<b.length&&(b=l.key.substring(0,80)+" ("+c+"): "+l.value,b=b.substring(0,149));c=g?g+".":"";x("Integrator","Calling ua set dimension - ga(%sset, dimension%d, %s)",c,f,b);a(c+"set","dimension"+f,b)}})}else M("Integrator","Error with Universal Analytics integration: 'GoogleAnalyticsObject' not defined")}else ed=j}function bd(a,b){M("Integrator","Preparing to send data to Sessioncam");return[S(a,b,100,100,15,o),{key:"Optimizely Exp "+a,value:"Optimizely Var "+b}]}
function dd(){try{$(window).unbind("load.ATInternet"),window.xt_mvt&&w(cd,function(a,c){c||(x("Integrator","Sending AT Internet log call: %s",a),window.xt_mvt("","",a),cd[a]=j)})}catch(a){M("Integrator","Error sending AT Internet data: "+a.toString())}}function S(a,b,c,d,e,f){a=Zc+Mb(a);b=Xb(b);1<b.length?(b=$.map(b,function(a){return a.substr(0,e-1)}),b=b.join("~")):b=b[0];f?(a=ld(a,c),b=ld(b.replace("#",""),d)):(a=a.substring(0,c),b=b.substring(0,d));return{key:a,value:b}}
function qd(a,b,c){try{var d=N.get(rd)||{},e=d[a],f;if(c&&e){var c={},g;if(e)for(g in e)e.hasOwnProperty(g)&&(c[g]=e[g]);if(b)for(g in b)if(b.hasOwnProperty(g)){var e=c,l=g,m;if(c[g]){var n=c[g],r=b[g];F(n)||(n=[n]);F(r)||(r=[r]);for(var q=[].concat(n),G=i,G=0;G<r.length;G++)ra(r[G],q)||q.push(r[G]);m=q}else m=b[g];e[l]=m}f=c}else f=b;d[a]=f;N.set(rd,d)}catch(A){}}var ed=o,Vc=o,cd={},$c="",Xc=2,Sc=o,Zc="Optimizely ",Rc=k,rd="thirdParty";function sd(a,b,c,d){if(!B)return o;var e="number"===typeof c||"string"===typeof c?String(c):k,f=!!(c===j||c&&c.force===j||d&&d.force===j),d=("object"===typeof c?c:d)||{},c=d.skip===j,g=d.skipPageview===j,d=d.enabledStatus;if(e)try{td(b,e,j)}catch(l){M("Activator","Error while activating experiment "+b+" for variation "+e+" -- proceeding without bucketing user.")}var m=[];bb(b)?m.push(b):w(Eb(),function(a){Kb(a)&&m.push(a)});ud(a,m,{Ha:f,fb:j,Ga:d,ib:c,Aa:g})}
function vd(a,b,c){if(!B)return o;if(!("object"===typeof b&&"string"===typeof c))if("object"===typeof b&&!H(c))c=b.hasOwnProperty("lists")?"odds":"cdn3";else if(H(b)||H(c)){M("Activator","Unrecognized arguments to activateGeoDelayedExperiment: "+arguments);return}if("object"===typeof b&&"string"===typeof c){M("Activator","Saving async info from '"+c+"'");"cdn3"===c&&U("geoArrive");Ec(c,b);var d=(R[c]=b)&&b.lists||{},e={},f,g,l,m,n;for(n in d)d.hasOwnProperty(n)&&(0===n.indexOf("_")&&d[n])&&(f=n.substring(1).split("__"),
g=f.shift(),l=f.shift(),f=f.join("__"),g&&(l&&f)&&(m=e,m[g]||(m[g]={}),m=m[g],m[l]||(m[l]=[]),m=m[l],m.push(f)));for(g in e)qd(g,e[g],o);wd?(M("Activator","Post-timeout; too late to act on new async info."),geolocation.cdn3Requested&&U("geoFailed")):(d=xd.slice(),M("Activator","Trying to activate "+d.length+" delayed segments"),yd(d),d=zd.slice(),M("Activator","Trying to activate "+d.length+" experiments"),ud(a,d,{Aa:Sa}),Ad(),"object"===typeof b&&"string"===typeof c&&"cdn3"===c&&U("geoSuccess"))}else M("Activator",
"Timeout: will not act on future async info."),U("geoTimeout"),wd=j}
function ud(a,b,c){M("Activator","Triaging "+b.length+" experiments.");var d=[],e=[],f=[];w(b,function(b){c.Ha?(M("Activator","Force-ignoring conditions for experiment "+b),d.push(b)):Bd(b)?Cd(b,{manualActivation:c.fb,objectType:"experiment",enabledStatus:c.Ga,visitor:a})?(M("Activator","Passed conditions for experiment "+b),d.push(b)):(M("Activator","Failed conditions for experiment "+b),f.push(b)):(M("Activator","Can't test conditions for experiment "+b),e.push(b))});w(e,Dd);Ed(d);Ed(f);var g=[];
w(d,function(a){Fd(a,c.ib)&&g.push(a)});Gd(g,b);Hd();Yc();B&&!c.Aa&&Id()}
function yd(a){M("Activator","Triaging "+a.length+" segments.");var b=[],c=[],d=[],e=[];w(a,function(a){bc(a,"is_api_only")?(M("Activator","Ignoring API-only segment "+a),e.push(a)):Bd(a)?Cd(a,{objectType:"segment"})?(M("Activator","Passed conditions for segment "+a),b.push(a)):(M("Activator","Failed conditions for segment "+a),d.push(a)):(M("Activator","Can't test conditions for segment "+a),c.push(a))});w(c,Jd);Kd(b);Kd(d);Kd(e);w(b,Ld)}
function Dd(a){M("Activator","Deferring test for experiment "+a);E(zd,a)||zd.push(a)}function Jd(a){M("Activator","Deferring test for segment "+a);E(xd,a)||xd.push(a)}function Ed(a){zd=K(zd,function(b){return!ra(b,a)})}function Kd(a){xd=K(xd,function(b){return!ra(b,a)})}var zd=[],xd=[],wd=o;/*


 UAParser.js v0.7.9
 Lightweight JavaScript-based User-Agent string parser
 https://github.com/faisalman/ua-parser-js

 Copyright ? 2012-2015 Faisal Salman <fyzlman@gmail.com>
 Dual licensed under GPLv2 & MIT
*/
function Md(){}var Nd={extend:function(a,b){for(var c in b)-1!=="browser cpu device engine os".indexOf(c)&&0===b[c].length%2&&(a[c]=b[c].concat(a[c]));return a},has:function(a,b){return"string"===typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):o},N:function(a){return a.toLowerCase()},va:function(a){return"string"===typeof a?a.split(".")[0]:i}};
function Od(){for(var a,b=0,c,d,e,f,g,l,m=arguments;b<m.length&&!g;){var n=m[b],r=m[b+1];if("undefined"===typeof a)for(e in a={},r)f=r[e],"object"===typeof f?a[f[0]]=i:a[f]=i;for(c=d=0;c<n.length&&!g;)if(g=n[c++].exec(this.ra()))for(e=0;e<r.length;e++)l=g[++d],f=r[e],"object"===typeof f&&0<f.length?2==f.length?a[f[0]]="function"==typeof f[1]?f[1].call(this,l):f[1]:3==f.length?a[f[0]]="function"===typeof f[1]&&(!f[1].exec||!f[1].test)?l?f[1].call(this,l,f[2]):i:l?l.replace(f[1],f[2]):i:4==f.length&&
(a[f[0]]=l?f[3].call(this,l.replace(f[1],f[2])):i):a[f]=l?l:i;b+=2}return a}function Sd(a,b){for(var c in b)if("object"===typeof b[c]&&0<b[c].length)for(var d=0;d<b[c].length;d++){if(Nd.has(b[c][d],a))return"?"===c?i:c}else if(Nd.has(b[c],a))return"?"===c?i:c;return a}
var Td={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ud={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,
/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\/([\w\.-]+)/i],["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],
["name","version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],
["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",Sd,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],ca:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",Nd.N]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],
[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",Nd.N]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",Nd.N]]],F:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],["model","vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor",
"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[["model",Sd,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],
["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],
[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[["vendor","Sony"],["model","Xperia Phone"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation\s[3portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",Sd,{HTC:"APA",Sprint:"Sprint"}],["model",
Sd,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type","tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],["model",["vendor","HTC"],["type","tablet"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g,
" "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,
/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/(samsung);smarttv/i],["vendor","model",["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/sie-(\w+)*/i],["model",["vendor","Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],["model",["vendor","Acer"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],
[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+(\w+)\s+build\/hm\1/i,
/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/(mobile|tablet);.+rv\:.+gecko\//i],[["type",Nd.N],"vendor","model"]],ea:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],
[/rv\:([\w\.]+).*(gecko)/i],["version","name"]],xa:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",Sd,Td]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",Sd,Td]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,
/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],"version"],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,
/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],["name","version"],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,
/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]};
function Vd(a,b){if(!(this instanceof Vd))return(new Vd(a,b)).Ua();var c=a||(Md&&Md.navigator&&Md.navigator.userAgent?Md.navigator.userAgent:""),d=b?Nd.extend(Ud,b):Ud;this.u=function(){var a=Od.apply(this,d.browser);a.va=Nd.va(a.version);return a};this.La=function(){return Od.apply(this,d.ca)};this.K=function(){return Od.apply(this,d.F)};this.Qa=function(){return Od.apply(this,d.ea)};this.oa=function(){return Od.apply(this,d.xa)};this.Ua=function(){return{Ab:this.ra(),browser:this.u(),ea:this.Qa(),
xa:this.oa(),F:this.K(),ca:this.La()}};this.ra=function(){return c};this.hb=function(a){c=a};this.hb(c);return this}Vd.VERSION="0.7.9";Vd.kb={e:"name",qb:"major",VERSION:"version"};Vd.mb={jb:"architecture"};Vd.nb={sb:"model",VENDOR:"vendor",g:"type",lb:"console",rb:"mobile",vb:"smarttv",wb:"tablet",xb:"wearable",ob:"embedded"};Vd.pb={e:"name",VERSION:"version"};Vd.ub={e:"name",VERSION:"version"};Md.Ca=Vd;function ic(){var a=new Md.Ca(window.navigator.userAgent),b=a.u(),c=a.oa(),a=a.K(),d=a.model in Wd?Wd[a.model]:"unknown",e=(c.name||"unknown").toLowerCase(),f;a:if(E(["mobile","tablet"],a.type))f=j;else{if(d&&"unknown"!==d)for(f in Wd)if(d===Wd[f]){f=j;break a}f=E(["android","blackberry","ios","windows phone"],e)?j:o}return{aa:Xd(b.name),ba:b.version,platform:{id:e,version:c.version},F:{id:d,type:a.type||(f?"mobile":"desktop"),w:f}}}
function Xd(a){a=(a||"").toLowerCase();if(a in Yd)return a;for(var b in Yd)if(D(Yd[b]||[],function(b){return b.toLowerCase()===a}))return b;return"unknown"}var Yd={gc:["Chrome","chromium","silk","yandex","maxthon"],ie:["Internet Explorer","iemobile"],edge:["Edge"],ff:["Firefox","iceweasel"],opera:["Opera","opera mini","opera tablet"],safari:["Safari","mobile safari","webkit"],ucbrowser:["UC Browser"]},Wd={iPhone:"iphone",iPad:"ipad"};function pd(a){return a.match(/_optimizely_redirect(?:_no_cookie)?=(\S+)/)}function Zd(a){return-1!==a.indexOf("_optimizely_redirect_no_cookie")}function $d(a){var a=a||"",b=v("optimizelyRedirect");return Zd(a)||!b||b&&"true"===b.split("|")[1]?j:o}function ae(){var a;a=H(a)?a:document.referrer;y("optimizelyReferrer",a,5)}
var Tc=k,od="",be=/^\/\* _optimizely_redirect.+\*\/[ ]*\nwindow\.location\.replace\(_optly\.redir\.href.*\)[ ]*[;]?$/,ce=/^\/\* _optimizely_redirect.+\*\/[ ]*\nvar[ ]*_optly[ ]*=[ ]*\{[ ]*redir:document\.createElement\("a"\)\}[;]?\n_optly\.redir\.href=.*\n_optly\.cur=.+\nif \(_optly.cur\)[ ]?\{.+\}[ ]*\nwindow\.location\.replace\(_optly\.redir\.href.*\)[ ]*[;]?$/,de=/^\/\* _optimizely_redirect.+\*\/[ ]*[\n]+window\.location\.replace\([ ]*redirectFirst.*\)[ ]*[;]?$/;var ee,fe;function ge(){var a={disable:he,optOut:ie,setCookieDomain:Ca,setCookieExpiration:je,verifyPreviewProject:function(a){P()!==a&&M("API","Preview projectId ("+P()+") does not match expected ("+a+"), disabling.")}},b=window.optimizely,c=[];F(b)&&(w(b,function(b){var e=b;F(b)?e=b[0]:ab(b)&&(e=b.type);a[e]?ke([a],b,j):c.push(b)}),window.optimizely=c)}function le(a,b,c){qd(a,b,!!c);Ad()}
function me(a,b){var c=Hb(a)||a,d=Ib()[c];d?d.audience_id?V.D(d.audience_id):d.dimension_id?V.B(d.dimension_id,b||j,o):ne(c,b):M("API","Unable to find segment: "+c)}
function td(a,b,c){Ra=j;B&&c!==j&&Id();var a=String(a),b=String(b),d=k,e=b.split("_"),f=Ob(a),b=f&&0!==f.length;if("-1"===e[0]){c=a;oe[c]&&delete oe[c];pe[c]&&delete pe[c];for(e=0;e<W.length;e++)W[e].H===c&&W.splice(e,1);qe()}else if(b&&e.length==f.length)d=[],w(e,function(a,b){256>=Number(a)?d.push(Sb(f[b])[a]):d.push(a)}),d=d.join("_");else if(!b&&1==e.length&&256>=Number(e[0])){var c=String,e=e[0],g=Pb(a),l=k;try{l=g[e]}catch(m){}d=c(l)}else 1==e.length?d=e[0]:M("API","Error: could not bucket user. Unknown arguments.");
d&&(b&&Rb(a,d)?(b=d,c=Rb(a,b),re[a]=re[a]||{},re[a][c]=b,M("Distributor","Preferring variation partial "+b+" of section "+c+" of experiment "+a),a=se(a),1===a.length&&te(a[0],"api.bucketUser",j)):te(d,"api.bucketUser",j));Hd()}function he(a){a&&"tracking"===a||(M("API","Optimizely disabled"),Ha=B=o);qa=o}function ue(){M("API","Finalizing API.");Ad();ee=j}function ve(){if(z("slave"))return SLAVE_CLIENT.optimizely.get.apply(k,Array.prototype.slice.call(arguments))}var we=[];
function xe(a){we.push(a);Ad()}function ke(a,b,c){var d=[],e=b,c=H(c)?c:o,f=0;F(b)?(e=b[0],d=Za(b,1)):ab(b)&&(f=H(b.version)?b.version:1,e=b.type,d=[b]);var a=a[f],g;a&&(g=a[e]);g?(M("API",'Called function "'+e+'"'),g.apply(k,d),ye.R[0===f?e:"v"+f+"."+e]=j):c||M("API",'Error for unknown function "'+e+'"');z("slave")&&SLAVE_CLIENT.optimizely.push(b);yc()}
function ze(a,b){ee?M("API","Error: can't add custom tags after Optimizely loads"):(fe=fe||{},2==arguments.length?fe[a]=b:1==arguments.length&&$.extend(j,fe,a))}function Ae(a,b){var c=Hb(a)||a,b=H(b)?b:j,d=Ib()[c];d?d.audience_id?V.Y(d.audience_id):d.dimension_id?V.B(d.dimension_id,k):Ce(c,b):M("API","Unable find segment for: "+c)}function De(){var a=L(Ib());w(a,function(a){Ae(a,o)});Ee()}
function Ad(){Fe={};Ge={};He={};w(nd(),function(a){var b=Q(a);Fe[b]=a.split("_");Ge[b]=Vb(a);He[b]=Wb(a)});Ie={};var a=z("audiences");X(Ie,"audiences",a||i,"data.audiences");X(Ie,"customTags",fe,"data.customTags");X(Ie,"thirdParty",N.get(rd)||{},"data.thirdParty");for(var b={},c=Eb(),a=0;a<c.length;a++){var d=c[a],e={};e.code=O(d,"code")||"";e.name=Mb(d);e.conditional=Lb(d);e.manual=Kb(d);e.section_ids=Ob(d);e.variation_ids=Pb(d);b[d]=e}X(Ie,"experiments",b,"data.experiments");b={};c=L(Ib());for(a=
0;a<c.length;a++)d=c[a],e={name:bc(d,"name")||"Seg "+d},b[d]=e;X(Ie,"segments",b,"data.segments");b={};c=L(z("sections")||{});for(a=0;a<c.length;a++)d=c[a],e={},e.name=z("sections",d,"name")||"Sec "+d,e.variation_ids=Sb(d),b[d]=e;X(Ie,"sections",b,"data.sections");b={};c=L(z("variations")||{});for(a=0;a<c.length;a++)d=c[a],e={},e.name=Wb(d),e.code=Tb(d),b[d]=e;X(Ie,"variations",b,"data.variations");var a=jc(),a=Yd[a]?Yd[a][0]:a,b=kc(),c=lc().id,d=lc().type,e=nc(),f=rc(),g=qc(),l=nc().id,m={};w(Qb(),
function(a){m[a]=Kc(a)});var b={browser:a,browserVersion:b,device:c,deviceType:d,platform:e,mobile:f,mobileId:g,os:l,lists:m,location:Nc(),ip:Gc(),matchingRules:Pc(),referrer:String(document.referrer),segments:Je(),dimensions:V.t,audiences:V.p},n;for(n in b)X(b,n,b[n],"data.visitor."+n);n={};c=Ke();c.reverse();a=0;for(d=c.length;a<d;a++)try{n[ja(c[a][0])]=ja(c[a][1])}catch(r){M("API","Failed to decode parameter "+c[a][0]+"="+c[a][1])}X(b,"params",n,"data.visitor.params");Ie.visitor=b;n={};X(n,"activeExperiments",
md||[],"data.state.activeExperiments");a:{if(a=od)if(b=Q(a)){a={variationId:a,experimentId:b,referrer:Tc};break a}a=i}X(n,"redirectExperiment",a,"data.state.redirectExperiment");X(n,"variationIdsMap",Fe,"data.state.variationIdsMap");X(n,"variationMap",Ge,"data.state.variationMap");X(n,"variationNamesMap",He,"data.state.variationNamesMap");X(n,"enabled",B,"data.state.enabled");n.integrations={};X(n.integrations,"activeOAuthClientIds",we,"data.state.integrations.activeOAuthClientIds");Ie.state=n;n=
{activeExperiments:md,allExperiments:Jb(),all_experiments:Jb(),variationIdsMap:Fe,variationMap:Ge,variationNamesMap:He,variation_map:Ge};window.optimizely.data=Ie;w(n,function(a,b){X(window.optimizely,a,b)})}function X(a,b,c,d){try{var e="o.",e=d?e+d:e+b;Object.defineProperty(a,b,{configurable:j,enumerable:j,get:function(){ye.R[e]=j;return c},set:function(a){c=a}})}catch(f){a[b]=c}}function Le(a){if(!bb(a))return o;Fa=Number(a)}function Me(){La=j}
function je(a){var b="";"number"!==typeof a?(b="must be a number.",a=31536E4):a=Math.floor(86400*a);7776E3>a&&(b="less then minimum.",a=7776E3);M("API",(b&&"Days argument "+b)+" Cookie expiration set to "+a+" seconds.");Ua=a}function Ne(){Sa=j}function Oe(){v("optimizelyReportableFix")?M("API","skipping because cookie is set"):(w(z("audiences"),function(a){vb(a)&&(M("API","Removing from reportable audience: "+a),V.Y(a))}),y("optimizelyReportableFix","1",7776E3))}
function Pe(a){var b=Wa();!a&&0!==a?(M("API","Clearing PPID"),ya("optimizelyPPID",za())):"string"===typeof a||"number"===typeof a?(M("API","Setting PPID to "+a),a=String(a),y("optimizelyPPID",a,Ua)):M("API","Ignoring non-string, non-number PPID: "+a);Wa()!==b&&(M("API","Clearing plan because of PPID change"),M("Plan","Resetting visitor buckets"),Qe={},oe={},pe={},W=[],Hd())}
var Se={event:function(a){Re(a.eventName,a.tags)},user:function(a){a.userId&&Pe(a.userId);a.attributes&&w(a.attributes,function(a,c){V.B(a,c)})},integration:function(a){a.OAuthClientId&&xe(a.OAuthClientId)}},Ie={},Te={},Fe={},Ge={},He={},V=k;function Re(a,b){var c;a:{c={};var d,e=z("custom_revenue_goals");e&&(a in e&&bb(e[a]))&&(d=Number(e[a]));if(b)if(bb(b))d=Number(b);else if("object"===typeof b){if(c=J({},b),"revenue"in c)if(bb(c.revenue))d=Number(c.revenue),delete c.revenue;else{x("tracker","Revenue field %s not a number.",c.revenue);c=k;break a}}else{x("tracker","Revenue argument %s not a number.",b);c=k;break a}H(d)&&(c.Z=d)}if(c===k)x("tracker","Bad options. Will not track this event.");else{d=Cb();var f={};w(d,function(a){f[a]=
j});$.extend(c,{fa:f});Ue(a,"custom",c)}}function Ue(a,b,c,d){c=c||{};qa&&(Ve.push({name:a,type:b,da:d||+new Date/1E3,options:c}),We?(Xe(),M("Tracker","Tracking event '"+a+"'")):M("Tracker","Queued tracking event '"+a+"'"))}function Ye(){Ze();$("html").bind("mousedown",$e);$("html").bind("touchstart",af)}function Ze(){$("html").unbind("touchstart",af);$("html").unbind("mousedown touchend",$e);$("html").unbind("touchmove",Ye)}
function af(){$("html").bind("touchend",$e);$("html").bind("touchmove",Ye)}function Id(){var a=document.location.href,b=Gb(a);0<b.length?(Ue("optly_activate","activate"),w(b,function(b){Ue(a,"pageview",{sa:[b]},bf)})):Ue(a,"activate")}function cf(){var a=v("optimizelyPendingLogEvents")||"[]",b=[];try{b=ea(a)}catch(c){}if(F(b))for(var a=0,d=b.length;a<d;a++){var e=b[a];if("string"!==typeof e){b=[];break}else try{ea(e);b=[];break}catch(f){}}else b=[];return b}
function df(a){a=I(a.split("&"),function(a){return a.split("=")});a.sort(function(a,c){return a[0]<c[0]?-1:a[0]>c[0]?1:0});return I(a,function(a){return a.join("=")}).join("&")}
function ad(a,b){if(ef&&-1!==a.indexOf(ff))try{var c=new XMLHttpRequest;if("withCredentials"in c){c.onload=b;c.open("GET",a,j);c.withCredentials=j;c.send();return}ef=o;M("Tracker","Found that XHR with credentials is not supported in this browser.")}catch(d){M("Tracker","XHR not supported"),ef=o}var c=a,e=new Image;e.onload=b;c=c.replace("&"+ff,"");e.src=c;gf.push(e)}
function ie(a,b){a=!H(a)||"true"===String(a);H(b)||(b=window.alert);var c=a?"true":"false";a?(y("optimizelyOptOut",c,Ua),y("optimizelyBuckets",c,Ua),b("You have successfully opted out of Optimizely for this domain.")):(y("optimizelyOptOut",c,Ua),b("You are NOT opted out of Optimizely for this domain."))}function jf(){return"true"===v("optimizelyOptOut")}function $e(){Ze();Ue("engagement","engagement")}var Ve=[],We=o;
function Xe(){var a=["a="+P(),"d="+tb(),"y="+!!z("ip_anonymization"),"src=js"];Ra&&a.push("override=true");w(nd(),function(b){var c=Q(b);a.push("x"+c+"="+b)});w(Je(),function(b,c){c=encodeURIComponent(ja(c));a.push("s"+b+"="+c)});a.push("tsent="+ +new Date/1E3);var b=[],c=Va(),d=Wa();w(Ve,function(a){var e=[],f;if(a.options.sa)f=a.options.sa;else if("activate"===a.type){f=md.concat(T);var g=od;g&&(g=Q(g),f.push(g))}else f=a.name?Gb(a.name):[];a.name&&e.push("n="+encodeURIComponent(a.name));a.options.anonymous!==
j&&(e.push("u="+c),d&&e.push("p="+encodeURIComponent(d)));ef&&e.push(ff);a.da&&e.push("time="+a.da);La&&e.push("dtpc="+La);var l=!!a.options&&!!a.options.Z&&a.options.fa||{},g=L(l),Be=K(Cb(),function(a){return!l[a]});f=[{S:g,ta:f.concat([z("summary_revenue_goal_id")||k]),ga:["v="+encodeURIComponent(a.options.Z)]},{S:Be,ta:f,ga:[]}];w(f,function(a){(a.S.length||Ga)&&b.push(e.concat(a.ga).concat(["f="+a.S.join(","),"g="+a.ta.join(",")]).join("&"))});if("custom"===a.type)try{var m=a.name,n=Va(),q=N.get("customEvents")||
{},r=q[n]||(q[n]=[]),r=F(r)?r:[];-1!==$.inArray(m,r)&&r.splice($.inArray(m,r),1);r.push(m);100<r.length&&r.shift();q[n]=r;N.set("customEvents",q);ya("optimizelyCustomEvents",za())}catch(hf){}});var e=b.concat(cf());kf(e);var f=a.join("&"),e=lf?b:e;lf=j;for(var g=0,l=e.length;g<l;g++){var m=e[g],n=f+"&"+m;M("Tracker","Making a log request.");var n=n+("&cx2="+fc(df(n),65259)),r=P(),q=z("log_host");r&&(q=r.toString()+"."+q);ad("https://"+q+"/event?"+n,function(){for(var a=m,b=cf(),c=0,d=b.length;c<d;c++)if(b[c]===
a){b.splice(c,1);break}kf(b);M("Tracker","Removed a pending log event from the pending events cookie.")})}Ve=[];We=j}function kf(a){for(var b=u(a);1536<b.length;)a=a.slice(0,-1),b=u(a);y("optimizelyPendingLogEvents",b,15)}var gf=[],lf=o,ff="wxhr=true",ef=j,bf=+new Date/1E3;var Y={e:"n",b:"t",g:"y",l:"c",m:"r",o:"s",f:"o"};function mf(a,b,c,d,e){this[Y.e]=a;this[Y.g]=b;"string"===typeof c&&0<eb(c).length&&(this[Y.l]=eb(c));d&&0<L(d).length&&(this[Y.f]=d);H(e)&&(this[Y.m]=e)}
mf.prototype.hash=function(){if(this.v)return this.v;var a;a=[];a.push(encodeURIComponent(Y.e)+"="+encodeURIComponent(this[Y.e]));a.push(encodeURIComponent(Y.g)+"="+encodeURIComponent(this[Y.g]));this[Y.l]&&a.push(encodeURIComponent(Y.l)+"="+encodeURIComponent(this[Y.l]));this[Y.m]&&a.push(encodeURIComponent(Y.m)+"="+encodeURIComponent(this[Y.m]));if(this[Y.f])for(var b=this[Y.f]||{},c=K(L(b),function(a){return b.hasOwnProperty(a)}),c=c.sort(),d=0;d<c.length;d++)a.push(encodeURIComponent(c[d])+"="+
encodeURIComponent(b[c[d]]));a=a.join("&");var e=String.fromCharCode;a=a.replace(/[\S\s]/gi,function(a){var a=a.charCodeAt(0),b=e(a&255);255<a&&(b=e(a>>>8&255)+b);65535<a&&(b=e(a>>>16)+b);return b});return this.v=fc(a,2716770798)};
function nf(a,b){if(a.hash()!==b.hash()||a[Y.e]!==b[Y.e]||a[Y.g]!==b[Y.g]||a[Y.l]!==b[Y.l]||a[Y.m]!==b[Y.m])return o;if(!a[Y.f]&&!b[Y.f])return j;var c=a[Y.f]||{},d=b[Y.f]||{},e=K(L(c),function(a){return c.hasOwnProperty(a)}),f=K(L(d),function(a){return d.hasOwnProperty(a)});if(e.length!==f.length)return o;for(f=0;f<e.length;f++){var g=e[f];if(!d.hasOwnProperty(g)||c[g]!==d[g])return o}return j}mf.prototype.k=function(a,b){var c=$a(this,a);return H(c)?c:b};
mf.prototype.Q=function(a,b){if(a===Y.e||a===Y.g||a===Y.l||a===Y.m||a===Y.f)this[a]=b,this.v=k,this.hash()};function of(a,b,c){this.G=a;this[Y.b]=b;H(c)&&(this[Y.o]=c)}of.prototype.k=function(a,b){if(0===a.length)return this;var c={};c[Y.b]=this[Y.b];c[Y.o]=this[Y.o];c=$a(c,a);return H(c)?c:this.G.k(a,b)};of.prototype.Q=function(a,b){a===Y.b||a===Y.o?this[a]=b:this.G.Q(a,b)};var pf={},qf=[];function rf(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=sf(d);b[c]=new of(e,d[Y.b])}return b}function sf(a,b){var c=new mf(a[Y.e],a[Y.g],a[Y.l],a[Y.f],a[Y.m]);H(b)&&(c.v=b);return c}function tf(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c],e=sf(d.eb,d.h),f=d.tb,d=d.ts,g=0;g<d.length;g++){var l=d[g];b[l.i]=new of(e,f+l.d)}return b};function uf(){try{var a;if(z("is_behavior_enabled")){if(0===qf.length&&z("is_behavior_enabled")){var b=oc("events")||[],c=oc("event_queue")||[];if(0===b.length&&0===c.length)qf=[];else{"eb"in(b[0]||c[0])?(b=tf(b),c=tf(c)):(b=rf(b),c=rf(c));qf=b.concat(c);1E3<qf.length&&(qf=qf.slice(-1E3));c=qf;for(b=0;b<c.length;b++){var d=c[b],e;b:{var f=c[b].G,g=f.hash(),l=pf[g];if("undefined"===typeof l)pf[g]=[f];else{for(var m=0;m<l.length;m++)if(nf(f,l[m])){e=l[m];break b}l.push(f)}e=f}d.G=e}}var d=qf,n=d.length;
if(0!==n){d[0].Q(Y.o,d[0].k([Y.b]));for(e=1;e<n;e++){var r=d[e-1],q=d[e];q.Q(Y.o,18E5>Math.abs(r.k([Y.b],0)-q.k([Y.b],0))?r.k([Y.o]):q.k([Y.b]))}}}a=qf.slice(-1E3)}else a=[];return a}catch(G){x("Behavior","Error "+G.toString()+" getting events")}return[]};function vf(){return(new Date).getTime()-(wf||0)}var wf=vf();function xf(a,b,c){for(var a=a.slice(),d=a.length-1;0<d;d--){var e=Math.floor(Math.random()*(d+1)),f=a[d];a[d]=a[e];a[e]=f}for(d=a.join(b);d.length>c;)a.pop(),d=a.join(b);return d}function U(a){var b=ye;b.n[a]||(b.n[a]=vf())}var yf;try{yf=!document.getElementsByTagName("body")[0]}catch(zf){yf=k}var Af=k;try{window.requestAnimationFrame(function(){Af=vf()})}catch(Bf){}
var Cf=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi,ye=new function(){this.n={};this.R={};this.$a=Math.random()<cc();geolocation.cdn3Requested&&(this.n.geoRequest=geolocation.cdn3Requested-wf)};function Fd(a,b){var b=b===j,c,d=k;w(W,function(b){a==b.H&&(d=b.id)});if((c=d)&&0<c.length)return M("Distributor","Not distributing experiment "+a+" (already in plan)"),j;if(b||a in oe)return M("Distributor","Not distributing experiment "+a+" (is ignored)"),o;c=O(a,"enabled_variation_ids")||[];if(0===c.length)return M("Distributor","Permanently ignoring experiment "+a+" (no enabled variations)"),Df(a),o;var e=O(a,"ignore")||0,f=Ef();if(e>Math.floor(1E4*((dc(f+a,0)>>>0)/ec)))return M("Distributor",
"Permanently ignoring experiment "+a+"("+e/100+"% likelihood)"),Df(a),o;e=c;re[a]!==i&&(M("Distributor","Taking into account bucketUser variations for experiment "+a),e=se(a));var f=e,g=[],l=O(a,"variation_weights")||{};w(f,function(a){g.push(l[a])});f=Ff(a,g);e=e[f];M("Distributor","Picked variation "+e+" [index "+f+" of "+c.length+"]");te(e,"distributor");return j}
function Gf(a,b){b=b||{};M("Distributor","Configuring conditionally-activated experiment: "+a);Te[a]?M("Distributor","Not configuring conditionally-activated experiment (already done): "+a):!Fb(a)&&b.force!==j?M("Distributor","Not configuring conditionally-activated experiment (not enabled): "+a):(Hf(a,b),ee&&Ad())}
function Hf(a,b){function c(){sd(V,a,b);m.isActive=E(md.concat(T),a);M("Distributor","Activating conditionally activated experiment "+a)}var d=O(a,"conditional_code"),e=j,f,g;if("function"===typeof d)e=o,f=d;else try{g=eval("(function() {return "+("("+d+")")+";})()"),"function"===typeof g&&(e=o,f=g)}catch(l){}var m={isActive:o,experimentId:a};if(e){if(e={objectType:"experiment",enabledStatus:b.enabledStatus},b.force||!Bd(a)||Cd(a,e)){var n=function(){Bd(a)&&(If(0,{value:d})||g)?c():setTimeout(n,50)};
n();M("Distributor","Set up conditional polling for "+a);Te[a]=j}}else try{f(c,m),M("Distributor","Set up conditional callback for "+a),Te[a]=j}catch(r){M("Distributor","Error running conditional callback function for "+a)}}function Ef(){return Wa()||Va()}function Ff(a,b){var c=b.length;if(0===c)return k;if(1===c)return 0;for(var d=0,e=0;e<c;e++)d+=b[e];e=Ef();d*=(dc(e+a,1)>>>0)/ec;for(e=0;e<c;e++){if(d<b[e])return e;d-=b[e]}d=Ef();return Math.floor((dc(d+a,2)>>>0)/ec*c)}
function se(a){var b=[];w(O(a,"enabled_variation_ids")||[],function(c){var d=j,e;for(e in re[a])-1===c.indexOf(re[a][e])&&(d=o);d&&b.push(c)});return b}var re={};function Jf(){for(var a=z("dcp_keyfield_locators")||[],b=k,c=[],d=0;d<a.length;d++){var e=a[d],f=e.dcp_datasource_id||k,g=e.is_optimizely||o,l=e.type,e=e.name||"";if(f===k)M("DCP","No DCP datasource id specified");else{var m=k;l===Kf?m=Z.I(e):l===Lf?m=Z.la(e):l===Mf?m=Z.j(e):l===Nf&&(m=Of());if(bb(m)||"string"===typeof m)f={datasourceId:f,id:m},g?b=f:c.push(f)}}return{q:b,z:c}}var Of=Ef;function Pf(){var a=Jf(),b=Oc.get()||{};if(Qf(a.z,b.aliases||{}))return o;b.rulesResults=k;Oc.set(b);return j}
function Qf(a,b){b=b||{};return Xa(a,function(a){return b[a.datasourceId]===a.id})}var Kf="cookie",Lf="js_variable",Mf="query_param",Nf="uid";function Mc(a){if(!Lc(a))return M("Async Request","Can't determine a value for this list-targeted key: "+a),k;var b=a.split("_"),c=b[0],b=b.slice(1).join("_"),d=i;if("c"===c)d=Z.I(b);else if("j"===c)d=Z.la(b);else if("q"===c)d=Z.j(b);else return M("Async Request","Can't determine a value for this list-targeted key: "+a),k;if("string"===typeof d||"number"===typeof d||"boolean"===typeof d)d=d.toString();else return d===k||"undefined"===typeof d?M("Async Request","No value is set for this list-targeted key: "+
a):M("Async Request","Unacceptable value (must be string, number, or boolean) for this list-targeted key: "+a),k;if(100<d.length)return M("Async Request","Withholding the overlong value for this list-targeted key: "+a),k;M("Async Request","Returning a value for this list-targeted key: "+a);return d}function Lc(a){return-1!==a.indexOf("_")?E(["c","j","q"],a.split("_")[0]):o};function Rf(a){if(0===$("body").length)setTimeout(function(){Rf(a)},20);else{var b;b='<div id="optimizely-loading" style="position:absolute;top:0;right:0;left:0;bottom:0;background-color:white;opacity:0.9;z-index: 3271000;"><h2 style="color:#9a9a9a;top:40%;position:absolute;font-size:2.25em;text-align:center;width:100%;font-family:\'Lucida Grande\',sans-serif;">'+a+"</h2></div>";$("#optimizely-loading").remove();$("body").append(b)}}var Sf=z("preview_host");function Ke(){var a=window.location.search||"";0===a.indexOf("?")&&(a=a.substring(1));for(var a=a.split("&"),b=[],c=0;c<a.length;c++){var d="",e="",f=a[c].split("=");0<f.length&&(d=f[0]);1<f.length&&(e=f[1]);b.push([d,e])}return b}function Tf(){for(var a=window.location.search,b,c=/optimizely_([^=]+)=([^&]*)/g,d={};b=c.exec(a);)d[b[1]]=b[2];return d}var Uf=/x(\d+)/;function Vf(a){return a&&-1!==String(a).indexOf("[native code]")};function Wf(a){var b=a||Xf;M("Segmenter","Loading segments cookie.");if(a=v("optimizelySegments")){try{a=ea(a)}catch(c){a={}}w(a,function(a,c){var d=Ib()[a];M("Segmenter","Segments cookie contains segment id: "+a);d&&d.audience_id?b.D(d.audience_id):d&&d.dimension_id?b.B(d.dimension_id,c,o):Yf[a]=c})}yd(L(Ib()));Zf.push($f);Ee();M("Integrator","Loading third-party segments.");if(window.bk_results){a=window.bk_results;M("Integrator","Loading BlueKai segments.");try{w(a.campaigns,function(a){a=a.seg_id;
Ib()[a]?ne(a,j):ub(a)&&b.D(a)})}catch(d){M("Integrator","Error loading BlueKai segments.")}}}function $f(){var a={};w(Yf,function(b,c){c&&(a[b]=c)});y("optimizelySegments",u(a),Ua)}function ne(a,b){a&&!isNaN(parseInt(a,10))?(!b&&""!==b&&(b=j),Yf[a]=b,Ee()):M("Segmenter","Unable to find segment for ID: "+a)}function Ee(){w(Zf,function(a){a()})}function Ld(a){M("Segmenter","Evaluating Segment "+a);var b=ag(a);b!==k&&ne(a,b)}
function ag(a){if(bc(a,"is_api_only"))return k;var b=k,c=k;switch(bc(a,"segment_value_type")||""){case "browser":b=Z.ia();c="unknown";break;case "campaign":b=Z.Ma();c="none";break;case "country":b=Z.L().country;c="unknown";break;case "language":b=Z.T();c="none";break;case "mobile":b=Z.w();break;case "os":b=Z.pa().id;c="unknown";break;case "referrer":b=Z.Ta();c="none";break;case "source_type":b=Z.Va();c="direct";break;default:return"true"}if(b===k){if(Yf.hasOwnProperty(a))return k;b=c}return bg(b)}
function cg(){var a=Z.V();if(Z.j("utm_source")||Z.j("utm_campaign")||Z.j("gclid")||Z.j("otm_source"))return"campaign";for(var b=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","https://(www\\.)?google\\..*?/$","http(s)?://www\\.bing\\.\\w{2,3}(\\.\\w{2,3})?/","r\\.search\\.yahoo\\.\\w{2,3}(\\.\\w{2,3})?/","baidu\\.\\w{2,3}(\\.\\w{2,3})?/"],c=0;c<b.length;c++){var d=b[c];try{if(a.match(d))return"search"}catch(e){x("Segmenter","%s: %s while matching %s",e.name,e.message,d)}}return a&&mc(a)!==mc(Z.J())?
"referral":k}function dg(){var a=[];w(Yf,function(b,c){c&&a.push(b)});return a}function Je(){var a={};w(Yf,function(b,c){c&&(a[String(b)]=c)});return a}function eg(a){return w(Yf,function(b,c){if((bc(b,"segment_value_type")||"")==a)return c})}function Ce(a,b){var c=Hb(a)||a;Yf[c]?(Yf[c]=o,("undefined"===typeof b||b)&&Ee()):M("Segmenter","Not removing "+a+", not found")}
function bg(a,b){var c,b=H(b)?b:j;c=c||fg;a=ja(a);a=String(a);b&&(a=a.toLowerCase());a=a.substring(0,c);return encodeURIComponent(a)}var Zf=[],Yf={},fg=20;function gg(){}
J(gg.prototype,{ia:jc,Ka:kc,Sa:qc,w:rc,u:function(){return{id:this.ia(),version:this.Ka(),mobileId:this.Sa()}},Ma:function(){return this.j("utm_campaign")},I:v,K:lc,U:Gc,la:function(a){try{return window[a]}catch(b){return k}},Ja:uf,T:function(){var a="";try{a=navigator.userLanguage||window.navigator.language,a=a.toLowerCase()}catch(b){a=""}return a},Oa:function(){return(oc("visitor_profile")||{}).defaultBehavior||{}},L:Nc,J:function(){return vc||window.location.href},na:sc,Ra:function(){return!tc?j:
!!ib.get("first_session")},Ia:Ke,pa:nc,V:function(){return v("optimizelyReferrer")||document.referrer||""},Wa:function(a){var a=a.split("."),b=a[0];a:{for(var a=a.slice(1),b=(N.get(rd)||{})[b],c=0,d=a.length;c<d;c++)if(ba(b)&&b.hasOwnProperty(a[c]))b=b[a[c]];else{a=i;break a}a=b}return a},Ya:function(){return Wa()!==k},Ta:function(){return mc(this.V())},qa:dg,Va:cg,Pa:function(){return document.referrer},j:function(a){a:{for(var b=this.Ia(),b=b||Ke(),c=0;c<b.length;c++){var d=b[c];if(d[0]===a){a=
d[1];a=a.replace(/\+/g," ");a=ja(a);break a}}a=k}return a},Na:function(){return fe},ja:function(a){return(this.Na()||{})[a]},Xa:function(){var a=(N.get("customEvents")||{})[Va()]||[];return F(a)?a:[]},Za:function(a){var b=this.qa();return E(b,a)},Ba:function(a){return E(this.Xa(),a)},getDate:function(){return new Date},ma:Kc,ka:Pc});var Z=new gg;function hg(a,b,c){if(a.k)return a.k(b,c);a=$a(a,b);"undefined"===typeof a&&(a=c);return a}function ig(a){return"string"===typeof a?eb(a).toLowerCase():a}
var jg=["*"],lg={eq:function(a){a=I(a,ig);return a[0]==a[1]},is:function(a){return a[0]===a[1]},gt:function(a){return a[0]>a[1]},lt:function(a){return a[0]<a[1]},gte:function(a){return a[0]>=a[1]},lte:function(a){return a[0]<=a[1]},"in":function(a){var b=I(a[1]||[],ig);return E(b,ig(a[0]))},between:function(a){return a[1]<=a[0]&&a[0]<=a[2]},contains:function(a){a=I(a,function(a){return"string"===typeof a?a.toLowerCase():a});return-1!==(a[0]||"").indexOf(a[1])},regex:function(a){try{var b,c;"string"===
typeof a[1]?(b=a[1],c="i"):(b=a[1][0]||"",c=a[1][1]||"");return RegExp(b,c).test(a[0])}catch(d){return x("Rules",'In operator "regex", error: '+(d.message||"invalid RegExp /"+[b,c].join("/"))),o}},exists:function(a){return"undefined"!==typeof a[0]},and:function(a){return Xa(a,aa())},or:function(a){return D(a,aa())},not:function(a){return!a[0]}},mg={"+":function(a){return(a[0]||0)+(a[1]||0)},"-":function(a){return(a[0]||0)-(a[1]||0)},"/":function(a){return(a[0]||0)/(a[1]||1)},"%":function(a){return(a[0]||
0)%(a[1]||1)}},ng={sum:function(a,b){for(var c=a[0]||jg,d=0,e=0;e<b.length;e++)d+=hg(b[e],c,0);return d},avg:function(a,b){if(0==b.length)return 0;for(var c=a[0]||jg,d=0,e=0;e<b.length;e++)d+=hg(b[e],c,0);return d/b.length},max:function(a,b){for(var c=a[0]||jg,d=Number.NEGATIVE_INFINITY,e=0;e<b.length;e++)d=Math.max(d,hg(b[e],c,Number.NEGATIVE_INFINITY));return d},min:function(a,b){for(var c=a[0]||jg,d=Number.POSITIVE_INFINITY,e=0;e<b.length;e++)d=Math.min(d,hg(b[e],c,Number.POSITIVE_INFINITY));return d},
count:function(a,b){return b.length}},og={now:function(){return+new Date}};
function pg(a,b){if(b.hasOwnProperty("value"))return b.value;if(b.hasOwnProperty("field"))return hg(a,b.field);if(b.hasOwnProperty("eval")){if(!(b.eval in og)){x("Rules","Unknown function: "+b.eval);return}return og[b.eval]()}if(b.op){var c=b.op in lg?lg[b.op]:b.op in mg?mg[b.op]:k;if(c){var d=t(pg,a),e=I(b.args||[],function(a){return d(a)});return c(e,a)}x("Rules","Unknown operator: "+b.op)}else x("Rules","No operator specified: "+u(b))}
function qg(a){function b(a,e){F(a)&&("and"!==a[0]&&("or"!==a[0]&&"not"!==a[0])&&x("Rules","Unexpected operation "+a[0]+". Continuing optimistically."),a={op:a[0],args:a.slice(1)});if(a.hasOwnProperty("field")||a.hasOwnProperty("value")||a.hasOwnProperty("eval"))return a;if(e&&a.op in ng){var f="_"+a.op+"_"+((a.args&&a.args[0]||{}).field||jg).join(".");f in d||(c.push({op:a.op,args:a.args}),d[f]=j);return{field:[f]}}for(var f=[],g=a.args||[],q=0;q<g.length;q++)f[q]=b(g[q],e);return{op:a.op,args:f}}
var c=[],d={},e={};a.hasOwnProperty("where")&&(e.where=b(a.where,o));a.hasOwnProperty("having")&&(e.having=b(a.having,j));if(a.hasOwnProperty("aggregate")||0<c.length)e.aggregate=(a.aggregate||[]).concat(c);for(var f=["groupBy","orderBy","select","limit"],g=0;g<f.length;g++)a.hasOwnProperty(f[g])&&(e[f[g]]=a[f[g]]);a.hasOwnProperty("from")&&(e.from=qg(a.from));return e}
function rg(a,b){var b=b||0,c=[];a.hasOwnProperty("where")?a.where.op?a.where.op in lg||c.push("Non-boolean WHERE clause operator"):c.push("Missing WHERE clause operator"):c.push("Missing WHERE clause");a.hasOwnProperty("having")&&(a.having.op?a.having.op in lg||c.push("Non-boolean HAVING clause operator"):c.push("Missing HAVING clause operator"));a.hasOwnProperty("groupBy")&&!a.hasOwnProperty("aggregate")&&c.push("No AGGREGATE clause specified with GROUP_BY clause");if(a.hasOwnProperty("select")){var d=
a.select;if(F(d))for(var e=0;e<d.length;e++)d[e].op&&d[e].op in ng&&c.push('In SELECT clause, aggregate operator "'+d[e].op+'" specified in selector at index '+e);else c.push("SELECT clause must be an array")}a.hasOwnProperty("limit")&&(d=a.limit,(!bb(d)||0>=Number(d)||Number(d)!=Math.floor(Number(d)))&&c.push("LIMIT must be a positive integer"));0<b&&(c=I(c,function(a){return"Sub-rule "+b+": "+a}));a.hasOwnProperty("from")&&(c=c.concat(rg(a.from,b+1)));return c}
function sg(a,b){var c=b;a.hasOwnProperty("from")&&(c=sg(a.from,c));c=K(c,function(b){return pg(b,a.where)});if(a.hasOwnProperty("aggregate")){var d=a.groupBy;if("undefined"===typeof d||!F(d)||0===d.length){var d={},e={};e[jg]="_";d[jg+"=_"]={ha:e,n:c};c=d}else{for(var d=I(d,function(a){return a.field}),e={},f=0;f<c.length;f++){for(var g=c[f],l=[],m={},n=0;n<d.length;n++){var r=d[n],q=hg(g,r,"_"),r=r.join(".");m[r]=q;l.push(encodeURIComponent(r)+"="+encodeURIComponent(String(q)))}l=l.join("&");e.hasOwnProperty(l)||
(e[l]={ha:m,n:[]});e[l].n.push(g)}c=e}var G=a.aggregate,A={};w(c,function(a,b){A[a]={};for(var c=0;c<G.length;c++){var d=G[c],e=d.op;if(e in ng){var f=(d.args&&d.args[0]||{}).field||jg,d="_"+e+"_"+f.join("."),e=ng[e]([f],b.n);A[a][d]=e}else x("Rules","Unknown aggregate operator "+e)}});var C=[];w(c,function(a,b){var c=J({},b.ha);J(c,A[a]||{});C.push(c)});c=C}a.hasOwnProperty("having")&&(c=K(c,function(b){return pg(b,a.having)}));if(a.hasOwnProperty("orderBy")){var pa=a.orderBy;F(pa)?c=0==pa.length?
c:c.sort(function(a,b){for(var c=0;c<pa.length;c++){var d=pa[c],e="ASC"===(d.direction||"ASC")?1:-1,f=d.field,d=hg(a,f,0),f=hg(b,f,0);if(d<f)return-e;if(d>f)return e}return 0}):x("Rules","groupBy rule must be an array")}a.hasOwnProperty("limit")&&(c=c.slice(0,Number(a.limit)));if(a.hasOwnProperty("select"))var Ta=a.select,c=I(c,function(a){return I(Ta,function(b){return pg(a,b)})});return c}
function tg(a,b){try{var c;c=qg(a);var d=rg(c);0<d.length&&h(Error("Rule "+u(c)+" has violations: "+d.join("\n")));return 0<sg(c,b).length}catch(e){return x("Rules","Error "+e.toString()+" while evaluating rule "+u(a)),o}};function ug(){this.p={};this.t={};this.A={};this.za={}}ug.prototype.bb=function(a){var b=this.A.hasOwnProperty(a)||this.za.hasOwnProperty(a);if(!this.p.hasOwnProperty(a)||!b)try{var c=this.p,d=ub(a);d||h(Error("Unable to find audience for id: "+a));var e=vg(this,d.conditions);M("Visitor","Checking if in audience "+a+": "+e);c[a]=e}catch(f){M("Visitor","Error: "+f.message)}return this.p[a]};
function wg(a,b,c,d){d=J({O:j,ya:j,C:j},d);if(ub(b)){a.p[b]=c;var e=vb(b);e?a.za[b]=c:d.O?a.A[b]=c:delete a.A[b];e&&d.C&&a.C(e,c);if(!e&&d.O&&d.ya){var f=[];w(a.A,p(function(a){this.p[a]&&f.push(a)},a));f.sort();y("optimizelyAudiences",f.join(","),31536E4)}}else M("Visitor","Unable to find audience "+b)}ug.prototype.D=function(a){wg(this,a,j)};ug.prototype.Y=function(a){wg(this,a,o)};ug.prototype.gb=function(){w(this.p,p(function(a){wg(this,a,o,{O:!!this.A.hasOwnProperty(a)})},this))};
function xg(a,b,c,d){d=!H(d)||d;H(c)&&c!==k&&String(c)?(d&&(c=bg(String(c),o)),a.t[b]=c):delete a.t[b];return a.t[b]}ug.prototype.B=function(a,b,c){var d;a:{for(d in z("dimensions")||{}){var e=a,f=yb(d,"api_name");if(e===(!f?k:f))break a}d=k}d=d||a;z("dimensions",d)?"custom_dimension"===zb(d)?(b=xg(this,d,b,c),a=yb(d,"segment_id"),(a=!a?k:a)&&this.C(a,b),M("Visitor",'Set dimension "'+d+'" to "'+b+'"')):M("Visitor",'Unknown dimension "'+d+'"'):M("Visitor","Unable to find dimension "+a)};
ug.prototype.C=function(a,b){b?ne(a,b):Ce(a)};var Xf=new ug;function yg(a,b){cb(b)&&(b=[b]);b=b||jg;return["_"+a+"_"+b.join(".")]}function zg(a){cb(a)&&(a=[a]);a=a||jg;return[a.join(".")]}var Ag={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"};function Bg(a){a=eb((a||"").toString());return Ag[a]||a}function Cg(a,b,c){cb(b)&&(b=[b]);return{op:Bg(a),args:[{field:b},{value:c}]}}function Dg(a){for(var b=[],c=0;c<a.length;c++)b[c]={field:a[c]};return b}function Eg(a,b){cb(b)&&(b=[b]);b=b||jg;return{op:a,args:[{field:b}]}}var Fg={};
w(Y,function(a,b){Fg[b]=j});function Gg(a,b){var c=[];cb(a)?(c=[a],"events"===(b||"events")&&!(a in Fg)&&(c=[Y.f,a])):c=a;return c};function Hg(a){var b=a.split(":");2!==b.length&&h(Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+a));return 60*parseInt(b[0],10)+parseInt(b[1],10)};function Cd(a,b){var c=!!b.manualActivation,d=b.objectType?b.objectType:"experiment",e="experiment"===d,f=b.enabledStatus,g=b.visitor||Xf;M("Condition","Testing "+d+" "+a);var f=e&&(H(f)?!!f:Fb(a)),l=e&&Kb(a),m;a:switch(d){case "experiment":m=O(a,"conditions");break a;case "segment":m=bc(a,"add_condition");break a;default:m=[]}if(e&&!f)return M("Condition","Failed for "+d+" "+a+" (paused)"),o;if(e&&!c&&l)return M("Condition"," Failed for "+d+" "+a+" (manual activation mode)"),o;if(m){var n="experiment"===
(d||"experiment"),r=j;w(m,function(b){var c=b.type;if(n&&b.only_first_time&&Ig(a))M("Condition",c+" condition passed because it only gets checked when bucketing",j);else{var d=!b.not,b=(0,Jg[c])(b),e=b!==d;M("Condition","Found that "+("the visitor "+(b?"passed":"failed")+" a "+c+" targeting condition  when it needed to "+(d?"pass":"fail")),!e);if(e)return r=o}});if(!r)return M("Condition","Failed for "+d+" "+a+" (condition failed)"),o}else{a:{c=[];e=[];if("experiment"===d)c=O(a,"audiences")||[],e=
O(a,"urls")||[];else if("segment"===d)(f=bc(a,"audience_id"))&&(c=[f]);else{M("Condition","Not a valid objectType: "+d);d=o;break a}if(0<c.length&&(M("Condition","Testing audiences for "+d+" "+a+": "+c),!D(c,p(g.bb,g)))){M("Condition","Failed to match any audiences for "+d+" "+a);d=o;break a}if(0<e.length){M("Condition","Testing URLs for "+d+" "+a);var g=e,q=Z.J(),G=[],A=[];w(g,function(a){a.negate?A.push(a):G.push(a)});g=function(a){return D(a,function(a){return Kg(q,a)})};if(g(A)||!(0===G.length||
g(G))){M("Condition","Failed to match any URL for "+d+" "+a);d=o;break a}}d=j}if(!d)return o}return j}function Lg(a,b){if(!b)return 0;for(var c=b.toString().split("."),d=a.toString().split("."),e=0;e<c.length;e++)if(H(d[e]))if(isNaN(Number(d[e]))){if(d[e]!==c[e])return-1}else{if(Number(d[e])<Number(c[e]))return-1;if(Number(d[e])>Number(c[e]))return 1}else return-1;return 0}
function Mg(a,b){var c=b.value,d=a.id,e=a.version,f=a.mobileId;return f&&"unknown"!==f?(M("Condition",f,j),"mobile"===c||c===f):0===c.indexOf(d)?0===Lg(e,c.substr(d.length)):o}function If(a,b){var c=b.value;if(c===i)return j;try{return Boolean(Ng(c))}catch(d){return o}}function Og(a,b){return Pg(b.value,b.match,a)}function Qg(a,b){return Pg(b.value,b.match,a)}
function Rg(a,b){if(a===k)return o;var c=b.value;switch(b.match){case "exact":if(a==c&&""!=a)return j;break;case "prefix":if(0==a.indexOf(c))return j;break;case "regex":try{var d=RegExp(c)}catch(e){break}if(d.test(a))return j;break;case "cidr":try{var f;a:{var g=new Sg(c),l=Tg(a);l===k&&h(Error("Invalid ip: "+a));for(c=0;4>c;c++)if((l[c]&g.W[c])!==g.X[c]){f=o;break a}f=j}return f}catch(m){}}return o}function Ug(a,b){var c=b.value;return"any"===c||0===a.indexOf(c)}
function Vg(a,b){if(a===k)return o;var c=b.value.split("|"),d=$.trim(c[0]),e=$.trim(c[1]),f=$.trim(c[2]),g=$.trim(c[3]);switch(c.length){case 1:if(a.country===d)return j;break;case 2:if(a.region===e&&a.country===d)return j;break;case 3:if(a.city===f&&(a.region===e||""===e)&&a.country===d)return j;break;case 4:if(a.continent===g)return j}return o}function Wg(a,b){return Pg(b.value,b.match,a)}
function Xg(a,b){var c=b.value,d=b.match;M("Condition","Testing referrer "+a+" against  "+c+" ("+d+")",j);return Yg(a,c,d)}function Zg(a){return!!a}function $g(a){var b=Z.J();return D(a.values,t(Kg,b))}function Kg(a,b){var c=b.value,d=b.match;M("Condition","Testing URL "+a+" against  "+c+" ("+d+")",j);return Yg(a,c,d)}function ah(a,b){switch(b.value){case "new":if("returning"===a)return o;break;case "returning":return"returning"===a}return j}
function vg(a,b){var c={and:function(b){return Xa(b,t(vg,a))},or:function(b){return D(b,t(vg,a))},not:function(b){1!==b.length&&h(Error('"not" argument too long: '+u(b)));return!vg(a,b[0])}};if(F(b)){if(b[0]in c)return c[b[0]](b.slice(1));h(Error("Not an operator"))}var c=b.dimension_id,d=zb(c),e=b.value;d||h(Error("No dimension type for dimension: "+c));var f=bh[d];f||h(Error("Unknown dimension type: "+d));d=i;if(a.t.hasOwnProperty(c))d=a.t[c];else try{var g=zb(c)||"",l,m;z("dimensions",c)||h(Error("Unable to find dimension for id: "+
c));"custom_dimension"===g&&h(Error("calculateDimensionValue called on custom dimension "+c));(l={browser:p(Z.u,Z),browser_version:p(Z.u,Z),behavior:p(Z.Ja,Z),campaign:t(eg,"campaign"),cookies:p(Z.I,Z),custom_tag:p(Z.ja,Z),default_behavior:p(Z.Oa,Z),device:p(Z.K,Z),event:p(Z.Ba,Z),first_session:p(Z.Ra,Z),has_ppid:p(Z.Ya,Z),ip:p(Z.U,Z),language:p(Z.T,Z),list:p(Z.ma,Z),location:p(Z.L,Z),query:p(Z.j,Z),platform:p(Z.pa,Z),referrer:p(Z.V,Z),segment:p(Z.Za,Z),source_type:t(eg,"source_type"),third_party_dimension:p(Z.Wa,
Z),time_and_day:p(Z.getDate,Z),url:p(Z.J,Z),visitor:p(Z.na,Z),dynamic_customer_profile:p(Z.ka,Z)}[g])&&(m=l(Ab(c)));M("Visitor","Got dimension ("+g+") value "+c+": "+u(m));d=m}catch(n){M("Visitor","Error: "+n.message)}return f(d,{value:e,match:b.match||"exact"})}
function Bd(a){var b=j;!O(a,"conditions")&&!bc(a,"add_condition")?(b=[bc(a,"audience_id")],b[0]||(b=O(a,"audiences")||[]),b=Xa(b,function(a){a=ub(a);return!a.conditions?j:ch(a.conditions)})):(O(a,"uses_geotargeting")||bc(a,"uses_geotargeting"))&&(b=dh.ip(k)||dh.location(k));b||M("Condition","Not ready to test (geotargeting): "+a);return b}function ch(a){if(F(a))return Xa(a.slice(1),ch);var b=zb(a.dimension_id)||"";return(b=dh[b])?b(a):j}
var Jg={browser:function(a){var b=Z.u();return D(a.values,function(a){return Mg(b,{value:a})})},code:function(a){return If(0,a)},cookies:function(a){for(var b=a.names||[],a=a.values||[],c,d=0;d<b.length;d++)if(c=b[d],Og(Z.I(c),{value:a[d]||i}))return j;return o},custom_tag:function(a){return D(a.values,function(a){return Qg(Z.ja(a.key),{value:a.value})})},event:function(a){return D(a.values,function(a){return Z.Ba(a)})},ip:function(a){var b=Z.U();return D(a.values,t(Rg,b))},language:function(a){var b=
Z.T();return D(a.values,function(a){return Ug(b,{value:a})})},location:function(a){var b=Z.L();return D(a.values,function(a){return Vg(b,{value:a})})},query:function(a){return 0===a.values.length?j:D(a.values,function(a){return Wg(Z.j(a.key),{value:a.value})})},referrer:function(a){return D(a.values,t(Xg,Z.Pa()))},segment:function(a){var b=Z.qa();return D(a.values,function(a){return Zg(ra(a,b))})},url:$g,visitor:function(a){var b=Z.na();return ah(b,a)}},bh={browser:Mg,browser_version:function(a,b){var c=
b.value,d=a.id,e=a.version;return 0===c.indexOf(d)?0===Lg(e,c.substr(d.length)):o},behavior:function(a,b){try{var c=ea(b.value),d;if(H(c.version)){!c.action&&(!c.filters||0===c.filters.length)&&h(Error('Audience spec must have an "action" field or at least one "filter" '+u(c)));var e=Cg("gt",Y.b,0),f=[],g=[];c.action&&(g.push(Cg("eq",Y.e,c.action.value)),c.action.type&&g.push(Cg("eq",Y.g,c.action.type)));if(c.time)if("last_days"===c.time.type)g.push({op:Bg("lte"),args:[{op:"-",args:[{eval:"now"},
{field:[Y.b]}]},{value:864E5*c.time.days}]});else if("range"===c.time.type){var l;var m=[c.time.start,c.time.stop];F(m)?l={op:"between",args:[{field:[Y.b]},{value:m[0]||+new Date(0)},{value:m[1]||+new Date}]}:(M("Rule builder","rangeTimeComparison passed invalid range "+u(m)),l=k);l&&g.push(l)}else M("Rule builder",'Audience spec has bad "time" type',c.time.type);e={op:"and",args:g};c.count&&f.push({where:Cg(c.count.comparator,"0",c.count.value),from:{select:[{field:yg("count")}],where:e,aggregate:[Eg("count")]}});
c.filters&&w(c.filters,function(a){var b=Gg(a.name,c.source),d,l;if(a.modifier==="most_frequent"){d=Eg("count");l=yg("count")}else if(a.modifier==="most_recent"){d=Eg("max",Y.b);l=yg("max",Y.b)}if(d){var m=zg(b);f.push({where:Cg(a.comparator,"0",a.value),from:{select:[{field:m}],where:e,groupBy:Dg([b]),aggregate:[d],orderBy:[{field:l,direction:"DESC"}],limit:1}})}else g.push(Cg(a.comparator,b,a.value))});if(c.pick){0<f.length&&h(Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+
u(c)));var n;var r=c.pick,q=c.source;l={where:e};r.count&&(l.limit=r.count);if("most_frequent"===r.modifier){var G=Gg(r.name,q);n=J(l,{select:[{field:zg(G)}],groupBy:Dg([G]),aggregate:[Eg("count")],orderBy:[{field:yg("count"),direction:"DESC"}]})}else n=J(l,{orderBy:[{field:[Y.b],direction:"DESC"}]});d=[n]}else d=0<f.length?f:[{where:e}]}else d=[c];return Xa(d,function(b){return tg(b,a)})}catch(A){}return o},campaign:function(a,b){var c=b.value;"string"===typeof c&&("regex"===b.match?a=ja(a):c=bg(c));
"none"===a&&(a=k);return Pg(c,b.match,a)},code:If,cookies:Og,custom_dimension:function(a,b){var c=b.value;return!H(c)?H(a):c==a},custom_tag:Qg,default_behavior:function(a,b){try{var a=a||{},c=ea(b.value);return tg(c,[a])}catch(d){}return o},device:function(a,b){var c=b.value;return"unknown"!==a.id?a.id===c:"tablet"===c?"tablet"===a.type:"mobile"===c?a.w&&"tablet"!==a.type:"desktop"===c?!a.w:o},event:aa(),first_session:aa(),ip:Rg,language:Ug,list:function(a,b){if(a===k||!H(a))return o;var c=b.value;
return!H(c)?""===a||a!==o:a.toString()===c},location:Vg,query:Wg,platform:function(a,b){var c=b.value.split("_"),d=c[0],c=c.slice(1);return d===a.id?0===c.length?j:1<c.length?0<=Lg(a.version,c[0])&&0>=Lg(a.version,c[1]):0===Lg(a.version,c[0]):o},referrer:Xg,segment:Zg,source_type:function(a,b){return b.value===a},time_and_day:function(a,b){var c,d,e;c=b.value;e=c.split("_");3!==e.length&&h(Error("Invalid time and day string "+c));c=e[0];d=e[1];e=e[2].split(",");c=Hg(c);d=Hg(d);var f=60*a.getHours()+
a.getMinutes(),g="sunday monday tuesday wednesday thursday friday saturday".split(" ")[a.getDay()];return f>=c&&f<=d&&-1!==$.inArray(g,e)},third_party_dimension:function(a,b){return F(a)?D(a,t(Pg,b.value,b.match)):Pg(b.value,b.match,a)},url:Kg,visitor:ah,dynamic_customer_profile:function(a,b){return a===k?o:!!a[b.value]},has_ppid:aa()},dh={ip:function(){U("checkGeo");return Z.U()!==k},location:function(){U("checkGeo");return Z.L()!==k},list:function(a){return Z.ma(Ab(a.dimension_id)||"")!==k},dynamic_customer_profile:function(a){var b=
Z.ka();return ab(b)&&a.value in b}};function Pg(a,b,c){var d=H(c)&&c!==k,e=H(a)&&a!==k;switch(b||(e?"exact":"exists")){case "exists":return d;case "exact":return d&&String(c)===a;case "substring":return d&&-1!==String(c).indexOf(a);case "regex":try{return e&&d?Boolean(String(c).match(RegExp(a))):o}catch(f){return o}case "range":return a=a.split(":"),b=parseFloat(a[1]),c=parseFloat(c),c>=parseFloat(a[0])&&c<=b;default:return o}};var eh=[function(){var a=ic();if("ie"===a.aa){try{var b=Number(a.ba)}catch(c){return}7>b&&h(Error("IE is only supported on version 8+ (detected "+b+")"));8>b&&("windows"===a.platform.id&&a.platform.version&&E(["xp","vista"],a.platform.version.toLowerCase()))&&h(Error("IE7 is not supported"))}},function(){return ea(u({a:123}))}];function te(a,b,c){var d;d=o===j;var c=c===j,e=o,f=Q(a);if(f&&(c||!Ig(f))){e=j;if(c&&Ig(f))for(c=0;c<W.length;c++)W[c].H===f&&W.splice(c,1);W.push({H:f,id:a,source:b});d&&(T=T||[],T.push(f));pe[f]=j;qe();M("Plan","Added experiment "+f+" and variation id "+a+" to the plan, source is "+b,j)}return e}function Ig(a){return a in oe||a in pe}function nd(a){var b=[],c=!H(a),a=a||[];w(W,function(d){(c||E(a,d.H))&&b.push(d.id)});return b}function Df(a){var b;if(b===j||!Ig(a))oe[a]=j,qe()}
function Hd(){var a={};w(Qe,function(b,c){a[b]=c});w(W,function(b){var c=Q(b.id);a[c]=b.id});w(oe,function(b){a[b]="0"});w(z("blacklisted_experiments")||{},function(b){b in a&&delete a[b]});y("optimizelyBuckets",u(a),Ua)}function qe(){w(fh,function(a){a()})}
function gh(a,b,c,d){if(-1!==a.indexOf("_optimizely_redirect"))b.push({code:a,type:"code forced (redirect)",variationId:d});else{for(var a=a.split("\n"),e=o,f=o,g=[],l=[];0<a.length;){var m=eb(a.shift()),n=0<l.length;if(m)if(Boolean(m.match(/_optimizely_evaluate\s{0,9}=\s{0,9}force/i)))f=j;else if(Boolean(m.match(/_optimizely_evaluate\s{0,9}=\s{0,9}safe/i))||Boolean(m.match(/_optimizely_evaluate\s{0,9}=\s{0,9}end_force/i)))f=o;else if(Boolean(m.match(/_optimizely_evaluate\s{0,9}=\s{0,9}editor_only/i)))e=
j;else if(Boolean(m.match(/_optimizely_evaluate\s{0,9}=\s{0,9}end_editor_only/i)))e=o;else if(!hh.exec(m)&&!e)if(f)g.push(m);else{if(!n){var r=ih.exec(m),q=[];r?(q.push(r[1].replace(/^['"]|['"]$/g,"")),(r=jh.exec(m))&&4<r.length&&q.push(r[4]),c.push({code:m,selector:q,type:"safe jquery",waitUntilSelectorReady:j,variationId:d})):n=j}n&&l.push(m)}}0<g.length&&b.push({code:g.join("\n"),type:"forced evaluation",variationId:d});0<l.length&&c.push({code:l.join("\n"),type:"safe non-jquery",waitUntilDocumentReady:j,
variationId:d})}}function kh(a,b,c){for(var d={values:[]},e=0,f=a.length;e<f;e++)d.values.push({value:a[e],match:b[e]||c});return d}var fh=[],Qe={},oe={},jh=/^\$j?\(['"](.+?)['"]\)\.detach\(\)\.(appendTo|insertAfter|insertBefore|prependTo)\(['"](.+?)['"]\);(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,hh=/^(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,ih=/^\$j?\((['"].+?['"]|document)\)\..+;(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,pe={},W=[];function lh(a){Yf={};Wf(a)};function mh(a,b){if(a&&b)if(nh)M("Evaluator","Bound event "+b+" to selector "+a),oh(a,b);else{var c={eventName:b,selector:a,type:"event '"+b+"' (click goal)",waitUntilSelectorReady:j};M("Evaluator","Add step to bind event "+c.eventName+" to selector "+c.selector);ph.push(c)}}
function Gd(a,b){if(B){F(a)?qh(a):(a=[],qh(b));a=a.concat(T);T=[];for(var c=0;c<a.length;c++)E(md,a[c])||md.push(a[c]);c=a;c===i?c=[]:bb(c)&&(c=[c]);for(var d=nd(c),e=[],f=[],g=[],l=[],m=K(wb(),function(a){return a.experiments?o:$g(a.url_conditions||[])}),n=0,r=m.length;n<r;n++){var q={eventName:m[n].event_name,selector:m[n].selector,type:"event '"+m[n].event_name+"' (click goal)",waitUntilSelectorReady:j};"revenue"in m[n]&&(q.revenue=m[n].revenue);e.push(q)}w(c,function(a){var b={},c=O(a,"events")||
{};w(c,function(a,c){b[a]=[c]});var c=K(wb(),function(b){return"experiments"in b?a in b.experiments:o}),d=0;for(;d<c.length;d++){var m=c[d];b[m.selector]||(b[m.selector]=[]);b[m.selector].push({eventName:m.event_name,revenue:m.revenue,experimentIds:m.experiments})}w(b,function(b,c){w(c,function(c){e.push({eventName:c.eventName,experimentIds:c.experimentIds,revenue:c.revenue,selector:b,type:"event '"+c.eventName+"' (experiment "+a+")",waitUntilSelectorReady:j})})});var n=O(a,"css")||"";n&&g.push({code:function(){$("body").append("<style>"+
n+"</style>")},selector:"body",type:"global css (experiment "+a+")",waitUntilSelectorReady:j});if(c=O(a,"steps")){w(c.forced,function(a){f.push(a)});w(c.safe,function(a){l.push(a)})}else(c=O(a,"code")||"")&&gh(c,f,l)});w(d,function(a){var b=z("variations",a,"pages");if(b)w(b,function(a){if(a.steps&&(!a.includes||$g({values:a.includes}))&&(!a.excludes||!$g({values:a.excludes}))){f.push.apply(f,a.steps.forced);l.push.apply(l,a.steps.safe)}});else{for(var b=Tb(a),b=b.split("\n"),c=[],d=j,e=0,g=b.length;e<
g;e++){var m=$.trim(b[e]);if(m==="/* _optimizely_variation_url_end */")d=j;else if(m!==""){var n=Ea.exec(m);if(n&&n.length===13){var q=n[2]?n[2].split(" "):[],m=n[4]?n[4].split(" "):[],r=n[6]?n[6]:"substring",hf=n[8]?n[8].split(" "):[],n=n[10]?n[10].split(" "):[];if(q.length>0){d=kh(q,hf,r);d=$g(d)}if(d&&m.length>0){d=kh(m,n,r);d=!$g(d)}}else d&&c.push(m)}}b=c.join("\n");gh(b,f,l,a)}});c=[];c.push.apply(c,f);c.push.apply(c,g);c.push.apply(c,l);c.push.apply(c,e);ph.push.apply(ph,c);rh()}}
function rh(){var a=o;sh=k;for(M("Evaluator",th+" times waited");!a&&0<ph.length;){M("Evaluator",ph.length+" steps remaining");var b=ph.shift(),c=b,a=o;if(c.waitUntilDocumentReady&&!nh)M("Evaluator","Document not ready yet"),a=j;else if(c.waitUntilSelectorReady&&!nh&&(c=c.selector))for(var c=F(c)?c:[c],d=0;d<c.length;d++){var e=c[d];if(!(e===k||e===i||!e.length))if(0===("document"==e?$(document):$(e)).length)M("Evaluator","'"+e+"' not found"),a=j}a?ph.unshift(b):b.eventName?(uh(),M("Evaluator","Bound event "+
b.eventName+" to selector "+b.selector),c={},b.revenue&&(c={Z:b.revenue,fa:b.experimentIds}),oh(b.selector,b.eventName,c)):b.code&&(M("Evaluator","Run code: "+b.code.toString()),vh(b.code,b.variationId))}a?(sh=setTimeout(rh,0===th?10:50),th++):(M("Evaluator",th+" total times waited"),uh())}function Ng(a){return"string"===typeof a?eval(a):a()}function uh(){U("flash");0<zd.length||U("flashGeo")}
function vh(a,b){if(a){var c=o,d;"string"===typeof a?(d=a,c=j):d=a.toString();if(pd(d))if(M("Evaluator","Redirect detected"),$d(d)){M("Evaluator","OK to redirect");var e=Zd(d);M("Evaluator","setting a redirect cookie"+(b?" for variation: "+b:""));y("optimizelyRedirect",(b||"unknown variation")+"|"+(e?"true":"false"),5);ae()}else{M("Evaluator","NOT OK to redirect");return}c&&eval("var $j = $;");try{if(pd(d)){$("head").append("<style type='text/css'>body{display:none;visibility:hidden;}</style>");M("Evaluator",
"Hiding body before redirect");var f=ce.test(d)||be.test(d)||de.test(d),g=/_keep_body_hidden=(\S+)/.test(d);f||g?M("Evaluator","Standard redirect detected - Will not unhide body."):setTimeout(function(){if(document.body){document.body.style.visibility="visible";document.body.style.display="block";M("Evaluator","Unhiding body -- did not redirect");U("bodyUnhidden")}},1700)}Ng(a)}catch(l){c=Pa,Pa=j,M("Evaluator","Error: "+l.message),M("Evaluator","Code: "+d),Pa=c,M("Evaluator","Failed to run code: "+
l.message)}}}
function oh(a,b,c){c=c||{};if(!wh[a]||!wh[a][b]){var d=function(){Ue(b,"custom",c)},e=$(a);if(0<e.length){var f=function(){e.unbind("touchend",d);e.unbind("touchmove",f);e.unbind("mousedown",d)},g=function(){f();e.bind("touchmove",f);e.bind("touchend",d)};e.bind("mousedown",d);e.bind("touchstart",g)}else e=$("html"),f=function(){e.undelegate(a,"touchend",d);e.undelegate(a,"touchmove",f);e.undelegate(a,"mousedown",d)},e.delegate(a,"touchstart",function(){f();e.delegate(a,"touchend",d);e.delegate(a,
"touchmove",f)}),e.delegate(a,"mousedown",d);wh[a]||(wh[a]={});wh[a][b]="mousedown touchstart"}}function xh(a){yh=a}function qh(a){a||(a=Eb());for(var b=0;b<a.length;b++)Nb(a[b])}var wh={},md=[],T=T||[],yh=0,nh=o,ph=[],sh=k,th=0;$(function(){setTimeout(function(){U("docReady");nh=j;sh!==k&&(M("Evaluator","Document is ready"),clearTimeout(sh),0<yh?setTimeout(rh,yh):rh())},50)});function Sg(a){this.Ea=$.trim(a);a=zh(this.Ea);a===k&&h(Error("Invalid CIDR specification"));this.X=a.X;this.W=a.W}function zh(a){a=a.split("/");if(2!=a.length)return k;var b=parseInt(a[1],10);if(isNaN(b)||0>b||32<b)return k;a=Tg(a[0]);if(a===k)return k;if(0>b||32<b)b=k;else{for(var c=[],d=0;4>d;d++)c[d]=0;for(var e=Math.floor(b/8),d=0;d<e;d++)c[d]=255;4>e&&(c[e]=Ah[b%8]);b=c}for(c=0;4>c;c++)a[c]&=b[c];return{X:a,W:b}}
function Tg(a){a=a.split(".");if(4!=a.length)return k;for(var b=[],c=0;4>c;c++){var d;d=a[c];if(3<d.length)d=k;else{var e=parseInt(d,10);d=isNaN(e)||d!==e.toString()||0>e||255<e?k:e}if(d===k)return k;b[c]=d}return b}var Ah=[0,128,192,224,240,248,252,254,255];function Yg(a,b,c){var d=a.split("?");if(d[1]){var e=[];$.each(d[1].split("&"),function(){0!==this.indexOf(Bh)&&e.push(this)});d[1]=e.join("&");a=d.join("?")}switch(c){case "exact":return a=Ch(a),a===Ch(b);case "regex":try{return Boolean(a.match(b))}catch(f){return o}case "simple":return a=Ch(Dh(a)),b=Ch(Dh(b)),a===b;case "substring":return a=Ch(a,j),b=Ch(b,j),-1!==a.indexOf(b);default:return o}}
function Dh(a){var b=a.indexOf("?");-1!==b&&(a=a.substring(0,b));b=a.indexOf("#");-1!==b&&(a=a.substring(0,b));return a}function Ch(a,b){var a=a.replace("/?","?"),a=a.toLowerCase().replace(/[/&?]+$/,""),c=Eh.slice(0);b||(c=c.concat(Fh));for(var d=c.length,e=0;e<d;e++)a=a.replace(RegExp("^"+c[e]),"");return a}
var Eh=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"],Fh=["www."],Bh="optimizely_";function Gh(a){return function(b){if("object"===typeof b&&Jh()){var c=k,d;for(d in b)b.hasOwnProperty(d)&&(c=a.call(this,d,b[d]));return c}return a.apply(this,arguments)}}function Jh(){for(var a in{})return j;return o};function Kh(){if(!Da){var a=$;a.fn.attr=Gh(a.fn.attr);a.fn.css=Gh(a.fn.css);a.fn.extend=Gh(a.fn.extend);var b=a.each;a.each=function(c,d,e){if(!(c.length===i||a.isFunction(c))||!Jh())b.apply(this,arguments);else if(e)for(var f in c){if(c.hasOwnProperty(f)&&d.apply(c[f],e)===o)break}else for(f in c)if(c.hasOwnProperty(f)&&!d.call(c[f],f,c[f])===o)break;return c};var c=a.fn.ab,d=function(a,b,d){return new c(a,b,d)},e,f=document.getElementsByClassName;if(!Vf(f))var f=(window.optimizely||{}).getElementsByClassName,
g=(window.optly||{}).getElementsByClassName,f=Vf(f)?f:Vf(g)?g:k;e=f;a.fn.ab=function(b,c,f){var g=d,l=document.getElementsByClassName;!Vf(l)&&e&&(g=function(a,b,c){document.getElementsByClassName=e;a=d(a,b,c);document.getElementsByClassName=l;return a});if(!("string"===typeof b&&c&&"object"===a.type(c)&&Jh()))return g(b,c,f);b=g(b,i,f);b.attr(c);return b}}M("Main","Started, revision "+z("revision"));try{var l=[];w(eh,function(a){try{a()}catch(b){l.push(b.message)}});0<l.length&&h(Error("Feature(s) not supported: "+
l.join("; ")))}catch(m){M("Main","Disabling: "+m.message);return}var f=Tf(),g=o,n;for(n in f)if(Uf.exec(n)){g=j;break}("true"===f.opt_out||"false"===f.opt_out)&&ie("true"===f.opt_out);Ga="true"===f.force_tracking;"true"===f.disable||"true"===f.opt_out||jf()?Ha=B=o:"classic"===f.disable?B=o:"new"===f.disable&&(Ha=o);Ia="true"===f.editor;Ja="true"===f.p13n;Oa="true"===f.show_preview;Ka=(n=window.optlyDesktop)&&H(n.p13nInner);(n=v("optimizelyToken"))&&y("optimizelyToken",n,15);n=f.token||n;z("insecure_preview")&&
n?Ma="public/"+P():/^[0-9a-f]{64}$/.test(n)?Ma=n:/^[0-9a-f]{32}$/.test(n)?(M("Query","Using legacy MD5 token"),Ma=n):(ya("optimizelyToken",za()),M("Query","Blocked request to load unsafe script: "+n));Pa="true"===f.log;Qa="true"===f.verbose;qa=!(Oa||g)||Ga;if(Ia||Ja)window.optimizelyDataApi={getProjectId:P};if(Ka)M("Main","Disabling because in desktop app editor.");else if(Ja)M("Main","Disabling because personalization editor flag is set."),db("https://"+Yb()+"/js/innie.js?_="+ +new Date);else if(ge(),
jf())M("Main","Disabling because opted out"),yc();else if(Ma){if(!window.optimizelyPreview){if(!window.optimizely||!window.optimizely.unshift)window.optimizely=[];window.optimizely.unshift(["verifyPreviewProject",P()]);db([Sf,"/js/preview/",Ma,".js"].join(""),j);Oa&&Rf('Loading Preview<br /><img alt="loading" src="//'+Yb()+'/static/img/loading-32.gif" style="padding-top:20px; width: 32px; margin: 0 auto;" />')}}else if(Oa&&!Ma)Rf("This preview link has expired. Please return to Optimizely and preview again to get a new link.");
else{if(B||Ha)if(f=z("project_js"))M("Evaluator","Running project level javascript."),vh(f);ge();if(B){f=v("optimizelyEndUserId");tc=f!==i&&f!==k;a:{f="googlebot;yahoo! slurp;bingbot;bingpreview;msnbot;keynote;ktxn;khte;gomezagent;alertsite;yottaamonitor;pingdom.com_bot;aihitbot;baiduspider;adsbot-google;mediapartners-google;applebot".split(";");g=navigator.userAgent;g=g.toLowerCase();for(n=0;n<f.length;n++)if(-1!==g.indexOf(f[n])){f=j;break a}f=o}f?qa=o:tc||ib.set("first_session",j)}if(f=N.get("asyncInfo"))oc("asyncInfo")||
pc(f),N.set("asyncInfo",k);(f=oc("asyncInfo"))&&w(f,Dc);if(z("uses_list_targeting")){var f="https://odds.optimizely.com/js/geo2.js",r={};w(Qb(),function(a,b){var c=Mc(b);typeof c==="string"&&(r[b]=c)});r.project=P().toString();var g=[],q;for(q in r)r.hasOwnProperty(q)&&g.push(encodeURIComponent(q)+"="+encodeURIComponent(r[q]));g.length&&(f+="?"+g.join("&"));db(f)}z("uses_dynamic_customer_profile_targeting")&&(Pf(),q=Jf(),!q.q||!q.q.datasourceId?(M("DCP","No Optimizely datasource found in data."),
q=k):(f=q.q.datasourceId,g=q.q.id,f=I([P().toString(),f,g],encodeURIComponent),f=["https://tapi.optimizely.com/api/targetingEmbed"].concat(f).join("/"),g=(Oc.get()||{}).aliases||{},Qf(q.z,g)||(q=I(q.z,function(a){return encodeURIComponent(a.datasourceId)+"="+encodeURIComponent(a.id)}),f+="?"+q.join("&")),q=f),q!==k&&db(q));(z("dcp_service_id")||k)!==k&&setTimeout(function(){var a=z("dcp_service_id")||k;if(a!==k){var b=Jf();if(b.q)if(b.z.length===0)M("DCP","Must specify at least one non-Optimizely datasource to alias");
else if(Pf()){var a=I([a,b.q.datasourceId,b.q.id],encodeURIComponent).join("/"),c=b.z;try{var d=new XMLHttpRequest;d.open("POST",["https://vis.optimizely.com/api/alias",a].join("/"));if("withCredentials"in d)d.withCredentials=j;d.setRequestHeader("Content-Type","application/json;charset=UTF-8");var e={};w(c,function(a){e[a.datasourceId]=a.id});d.onerror=function(){M("DCP","Failed to POST alias request")};d.onload=function(){if(d.status>=200&&d.status<300){var a=Oc.get()||{},b=a.aliases||{},b=b||{};
w(c,function(a){b[a.datasourceId]=a.id});a.aliases=b;Oc.set(a)}else M("DCP","Alias POST failed with",d.statusText)};d.send(u({data:e}))}catch(f){M("DCP","Exception %s trying to POST alias request",f)}}else M("DCP","Duplicate alias request; skipping.");else M("DCP","Must specify Optimizely datasource in alias")}},0);if(q=v("optimizelyBuckets")){try{q=ea(q)}catch(G){q={}}var A={};w(q,function(a,b){var b=String(b),c=Q(b);if(Ob(c).length>1&&b.indexOf("_")===-1){A[c]=A[c]||{};A[c][a]=b}else b!=="0"?te(b,
"cookie")||(Qe[a]=b):Df(a)});w(A,function(a,b){var c;a:{c=[];for(var d=Ob(a),e=0;e<d.length;e++){var f=b[d[e]];if(f==="0"){c="";break a}c.push(f)}c=c.join("_")}c.length>0?te(c,"cookie"):Df(a)})}Wf();od=(v("optimizelyRedirect")||"|").split("|")[0];q=v("optimizelyReferrer");q!==k&&(Tc=0==q.length?"":q,y("optimizelyReferrer",""));q=Xf;M("Visitor","Initializing");(f=v("optimizelyAudiences"))&&0<f.length&&w(f.split(","),p(function(a){wg(this,a,j,{O:j,ya:o})},q));w(dg(),p(function(a){M("Visitor","Found segment "+
a);var b=Ib()[a];if(b&&b.audience_id){M("Visitor","Adding to audience "+b.audience_id);wg(this,b.audience_id,j,{C:o})}else if(b&&b.dimension_id){M("Visitor","Setting dimension value "+b.dimension_id);xg(this,b.dimension_id,Yf[a],o)}},q));V=Xf;ee=o;Zf.push(Ad);fh.push(Ad);q={$:$,activeExperiments:md||[],allExperiments:Jb(),all_experiments:Jb(),allVariations:z("variations")||{},getElementsByClassName:document.getElementsByClassName,revision:z("revision"),variationIdsMap:Fe,variation_map:Ge,variationMap:Ge,
variationNamesMap:He};for(var C in q)X(q,C,q[C]);q.data=Ie;C={};var pa=Ya(ke,[C,Se]);J(C,{activate:t(sd,V),activateGeoDelayedExperiments:t(vd,V),activateSiteCatalyst:Qc,activateUniversalAnalytics:fd,addOAuthClientId:xe,addToAudience:p(V.D,V),addToSegment:me,bindTrackElement:mh,bucketUser:td,bucketVisitor:td,clickTaleRecord:id,clickTalePlayback:gd,customTag:ze,delayDomReadyEval:xh,delayPageviewTracking:Le,disable:he,log:zc,getAccountId:tb,getProjectId:P,googleAnalyticsCustomVariableScope:Wc,integrationPrefix:jd,
optOut:ie,overrideUrl:uc,push:pa,removeFromAllAudiences:p(V.gb,V),removeFromAllSegments:De,removeFromAudience:p(V.Y,V),removeFromSegment:Ae,sc_activate:Qc,sc_svar:kd,skipPageTracking:Ne,optOutThirdPartyCookies:Me,setDimensionValue:p(V.B,V),setUserId:Pe,storeThirdPartyData:le,timeout:he,trackEvent:Re,verbose:Ac});z("slave")&&J(C,{get:ve});C.removeFromReportableAudiences=Oe;J(q,C);C=window.optimizely;F(C)&&w(C,function(a){pa(a)});window.optimizely=q;U("apiInitialize");window.optimizely.iapi={evaluateSegments:t(lh,
i)};var Ta=!z("force_variation");C=Tf();w(C,function(a,b){var c=Uf.exec(a);if(c)if(Ta){Na=j;x("Query","Ignored parameter %s",a)}else{c=c[1];td(c,b,j);Lb(c)?Gf(c,{force:j,skipPageviewTracking:j}):Cd(c,{})||sd(V,c,{force:j,skipPageviewTracking:j})}});Na?Rf("Force parameters are disabled for this project. See Project Code Settings."):(Kh.log(),Ia&&db("https://"+Yb()+"/js/innie.js?_="+ +new Date),B&&(U("distributeExperiments"),w(Eb(),function(a){if(!ra(a,T))if(Lb(a))Gf(a);else if(Bd(a)){if(Cd(a,{objectType:"experiment"})){M("Distributor",
"Going to distribute "+Nb(a));if(Fd(a)){T=T||[];T.push(a)}}}else!Kb(a)&&!E(md,a)&&Dd(a)}),Hd(),Ye(),Sa||(0<Fa?setTimeout(function(){Id()},Fa):Id()),Xe(),Yc()),Pa&&(w(oe,function(a){var b=Mb(a);M("Plan","Ignore experiment '"+b+"' ("+a+")")}),w(W,function(a){var b=Q(a.id),c=Wb(a.id);M("Plan",Nb(b)+' in variation "'+c+'" ('+a.id+")")})),Ia?ue():B&&(U("beginEvaluate"),Gd(),ue(),yc(),!z("installation_verified")&&qa&&(C="https://"+Yb()+"/account/snippet_installed?project_id="+P()+"&wxhr=true",M("Tracker",
"Making snippet verification request."),ad(C,k))),setTimeout(function(){vd(V)},2E3),setTimeout(function(){if(qa){var a=ye;if(a.$a){var b=Va(),c=Wa(),d=P(),e=z("revision"),f=yf,g=wf,l=Af,m=cc(),n=md.concat(T).length,q=uf().length,r;r=oc("events")||[];var C=oc("event_queue")||[];r=u(r).length+u(C).length;var A;a:{try{A=window.optimizely.get("behavior").getEvents()[0].timestamp;break a}catch(G){}A=i}var b={user:b,ppid:c,project:d,revision:e,sync:f,timebase:g,render:l,sampleRate:m,numExps:n,numBehaviorEvents:q,
behaviorEventsSize:r,oldestBehaviorEventAge:!A?0:(new Date).getTime()-A.getTime(),integrationOAuthClientIds:xf(we,",",64),codeVersion:z("version"),hasSlave:!!z("slave"),docVisibilityState:document.Bb||document.webkitVisibilityState,wxhr:j,apis:xf(L(a.R),"!",1E3)},sa;a:{c=k;try{sa=K(window.performance.getEntries(),function(a){return!!Cf.test(a.name)})[0]}catch(pa){sa=c;break a}if(sa){var c={},Bb;for(Bb in sa)typeof sa[Bb]==="number"&&sa[Bb]!==0&&(c[Bb]=sa[Bb])}sa=c}J(b,sa||{});J(b,a.n);var Ta=["optimizelyAudiences",
"optimizelyBuckets","optimizelyCustomEvents","optimizelyPendingLogEvents","optimizelyReferrer","optimizelySegments"],Pd={},Qd=0,Rd=0;w(ia(),function(a){if(a.name.indexOf("optimizely")===0){if(E(Ta,a.name)){M("RUM","Cookie size for "+a.name+": "+a.P.length);Pd[a.name+"Len"]=a.P.length}Qd=Qd+a.P.length}Rd=Rd+a.P.length});J(Pd,{allOptimizelyCookiesLen:Qd,allCookiesLen:Rd});J(b,Pd||{});var kg={};w(N.wa()||{},function(a,b){kg["ls"+a]=b});J(b,kg);var a=[],Fc;for(Fc in b)Object.prototype.hasOwnProperty.call(b,
Fc)&&a.push(window.encodeURIComponent(Fc)+"="+window.encodeURIComponent(b[Fc]));ad("https://rum.optimizely.com/rum?"+a.join("&"),k)}}},3E3),M("Main","End of main"),U("mainEnd"))}}
Kh.log=function(){M("Info","Is Classic Optimizely enabled: "+B);M("Info","Diagnostic enabled: false");M("Info","Force variation enabled: "+!!z("force_variation"));M("Info","Browser type: "+jc());M("Info","Browser version: "+kc());var a=qc();"unknown"!==a&&M("Info","Mobile browser type: "+a);M("Info","New vs returning: "+sc());M("Info","Source type: "+cg());M("Info","User ID: "+Va())};Kh();
};
var SLAVE_CLIENT = {optimizely:[]};
optimizelyCode();
optly.Cleanse.finish();

var PROJECT_ID_FOR_SLAVE_PREVIEW = 6250770393;
!(function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([(function(e,t,n){function i(){function e(e){var t=n(124),i=[t];i.push(n(126)),i.push(n(132)),i.push(n(135)),i.push(n(138)),i.push(n(140)),i.push(n(149)),i.push(n(153)),i.push(n(156)),i.push(n(160)),i.push(n(164)),i.push(n(168)),i.push(n(173)),i.push(n(175)),v.initialize({clientData:e,plugins:i})}function t(e,t,n){return"/dist/preview_data.js?token=__TOKEN__&preview_layer_ids=__PREVIEW_LAYER_IDS__".replace("__TOKEN__",e).replace("__PROJECT_ID__",t).replace("__PREVIEW_LAYER_IDS__",n.join(",")).replace("__GET_ONLY_PREVIEW_LAYERS__",!0)}window.performance&&window.performance.mark&&window.performance.mark("optimizely:blockBegin");var i=n(1),r=n(58),a=n(5),o=n(11);a.onPreAction(r.onPreAction),a.onPostAction(r.onPostAction);var s=n(19),u=s.get("stores/directive"),c=n(59);if(!c.isCORSSupported())throw new Error("CORS is not supported on this browser, aborting.");var l,d=n(66),f=n(71),g=n(72),p={"layers": [], "listTargetingCookies": [], "views": [{"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "couchsurfing.com/dashboard", "match": "simple"}]], "name": "couchsurfing.com/dashboard", "tags": [], "apiName": "couchsurfingcomdashboard", "id": "7936226313"}], "projectId": "6250770393", "namespace": "6250770393", "integrationSettings": [], "dimensions": [{"segmentId": "8205911074", "id": "8200915474", "apiName": "account_created_date", "name": "Account Creation Date"}, {"segmentId": "8205962622", "id": "8202775607", "apiName": "birth_date", "name": "Birth date"}, {"segmentId": "8208640628", "id": "8206472341", "apiName": "is_verified", "name": "Is verified"}, {"segmentId": "8211203043", "id": "8207421977", "apiName": "has_surfed", "name": "Has surfed"}, {"segmentId": "8203105736", "id": "8207864170", "apiName": "gender", "name": "Gender"}, {"segmentId": "8211540624", "id": "8208234648", "apiName": "profile_location", "name": "Profile Location"}, {"segmentId": "8210522224", "id": "8208451834", "apiName": "has_hosted", "name": "Has hosted"}, {"segmentId": "8203854836", "id": "8211530149", "apiName": "locale", "name": "Locale"}, {"segmentId": "8328627670", "id": "8328534776", "apiName": "user_id", "name": "User ID"}], "audiences": [], "anonymizeIP": false, "visitorAttributes": [], "accountId": "6250770393", "events": [], "revision": "1571"},v=n(73);if(d.populateDirectiveData(),u.clientHasAlreadyInitialized())return void o.warn("Main / Disabling because Optimizely has already initialized on this page load. Are there multiple snippets on the page?");if(u.shouldBailForDesktopApp())return void o.log("Main / Disabling because of desktop app.");if(u.shouldLoadInnie())g.registerFunction("getProjectId",(function(){return p.projectId})),f.addScriptAsync("https://app.optimizely.com/js/innie.js"),o.log("Main / Disabling in favor of the editor client.");else if(u.shouldLoadPreview()){var h;h=u.isSlave()?window.optimizely:SLAVE_CLIENT.optimizely=SLAVE_CLIENT.optimizely||[],h.push({type:"load",data:p}),o.log("Main / Disabling in favor of the preview client."),n(123).setupPreviewGlobal(),n(123).pushToPreviewGlobal({type:"pushPreviewData",name:"liveCommitData",data:p}),u.isSlave()||(g.registerFunction("getProjectId",(function(){return p.projectId})),f.addScriptSync(""))}else if(u.shouldBootstrapDataForPreview()){g.registerFunction("initializeOptimizelyPreview",e);var _=u.isSlave()?PROJECT_ID_FOR_SLAVE_PREVIEW:g.getFunction("getProjectId")();l=t(u.getProjectToken(),_,u.getPreviewLayerIds()),f.addScriptSync(l),n(123).setupPreviewGlobal(),f.addScriptAsync("/dist/js/preview_ui.js")}else u.shouldBootstrapDataForEditor()?(g.registerFunction("initializeOptimizelyPreview",e),f.addScriptAsync(window.optimizely_editor_data_endpoint)):u.shouldInitialize()&&e(p);i.timeEnd("block")}try{i()}catch(e){try{n(121).handleError(e)}catch(e){console.log(e)}}}),(function(e,t,n){function i(){return u.getGlobal("performance")}var r=n(2),a=n(5),o=n(11),s=n(14),u=n(16),c=n(17),l=n(12),d="optimizely:",f=t.Error=r("PerformanceError");t.time=function(e){var t=i();if(t&&t.mark){var n=d+e;t.clearMarks(n+"Begin"),t.mark(n+"Begin")}},t.timeEnd=function(e){var t=i();if(t&&t.mark){var n=d+e,r=t.getEntriesByName(n+"Begin");if(0===r.length)throw new f("Called timeEnd without matching time: "+e);t.clearMarks(n+"End"),t.mark(n+"End");var s=t.getEntriesByName(n+"End"),u=e+"Time";if(a.dispatch(c.SET_PERFORMANCE_MARKS_DATA,{name:u,data:{start:r[0].startTime,end:s[0].startTime}}),o.shouldLog(l.LogLevel.INFO)){var g=d+u;t.measure(g,n+"Begin",n+"End")}else t.clearMarks(n+"Begin"),t.clearMarks(n+"End")}},t.now=function(){var e=i();return e?e.now():s.now()}}),(function(e,t,n){function i(e,t){function n(t){if(!(this instanceof n))return new n(t);try{throw new Error(t)}catch(t){t.name=e,this.stack=t.stack}r&&this.stack&&(this.stack=a(this.stack,e,t)),this.message=t||"",this.name=e}return n.prototype=new(t||Error),n.prototype.constructor=n,n.prototype.inspect=function(){return this.message?"["+e+": "+this.message+"]":"["+e+"]"},n.prototype.name=e,n}var r=n(3)(),a=n(4);e.exports=i}),(function(e,t){"use strict";e.exports=function(){var e=new Error("yep");return!!e.stack&&"Error: yep\n"===e.stack.substr(0,11)}}),(function(e,t){"use strict";e.exports=function(e,t,n){var i=t;return n&&(i+=": "+n),e=i+e.slice(e.indexOf("\n"))}}),(function(e,t,n){var i=n(6);e.exports=i.create()}),(function(e,t,n){function i(e){e=e||{},this.e={},this.t={},this.i=0,this.a=[],this.u=[]}function r(e,t){return function(){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}}var a=n(7),o=n(8);i.prototype.registerStores=function(e){o.forOwn(e,function(e,t){this.e[t]=new a(t,this,e)}.bind(this))},i.prototype.getStore=function(e){return this.e[e]},i.prototype.dispatch=function(e,t){this.dispatchId++,o.each(this.a,function(n){n.call(this,e,t)}.bind(this)),o.forOwn(this.e,(function(n){n.l(e,t)})),o.each(this.u,function(n){n.call(this,e,t)}.bind(this)),o.forOwn(this.e,function(e,t){e.hasChanges()&&this.t[t]&&(e.resetChange(),o.each(this.t[t],(function(t){t(e)})))}.bind(this))},i.prototype.reset=function(){this.t={},o.forOwn(this.e,(function(e,t){e.d()}))},i.prototype.getState=function(){var e={};return o.forOwn(this.e,(function(t,n){e[n]=t.f()})),e},i.prototype.onPreAction=function(e){var t=this.a;return t.push(e),r(t,e)},i.prototype.onPostAction=function(e){var t=this.u;return t.push(e),r(t,e)},i.prototype.g=function(e,t){this.t[e]||(this.t[e]=[]),this.t[e].push(t);var n=this.t[e];return r(n,t)},e.exports={create:function(e){return new i(e)}}}),(function(e,t,n){function i(e,t,n){this.v=e,this.h=t,this.I=0,this.S=!1,this.A={},r.extend(this,n),this.T={},this.initialize&&this.initialize()}var r=n(8);i.prototype.l=function(e,t){var n=this.A[e];n&&"function"==typeof n&&n.call(this,t,e)},i.prototype.f=function(){return r.cloneDeep(this.T)},i.prototype.on=function(e,t){this.A[e]=t.bind(this)},i.prototype.observe=function(e){return this.h.g(this.v,e)},i.prototype.emitChange=function(){this.S=!0,this.I++},i.prototype.hasChanges=function(){return this.S},i.prototype.resetChange=function(){this.S=!1},i.prototype.getStateId=function(){return this.I},i.prototype.d=function(){this.reset&&"function"==typeof this.reset&&this.reset(),this.initialize()},e.exports=i}),(function(e,t,n){e.exports=n(9)._.noConflict()}),(function(e,t,n){(function(e,n){(function(){function i(e,t){return e.set(t[0],t[1]),e}function r(e,t){return e.add(t),e}function a(e,t){return u(be(e),gn)}function o(e,t){return!!e.length&&f(e,t,0)>-1}function s(e,t,n){for(var i=-1,r=e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function u(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function c(e,t,n){for(var i=-1,r=e.length;++i<r;){var a=e[i],o=t(a);if(null!=o&&(s===Tn?o===o:n(o,s)))var s=o,u=a}return u}function l(e,t,n,i){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=i?n:e,!1})),r}function d(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function f(e,t,n){if(t!==t)return I(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function g(e,t,n,i,r){return r(e,(function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)})),n}function p(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function v(e){return function(t){return e(t)}}function h(e,t){return me(t,(function(t){return e[t]}))}function _(e){return e&&e.Object===Object?e:null}function E(e,t){if(e!==t){var n=null===e,i=e===Tn,r=e===e,a=null===t,o=t===Tn,s=t===t;if(e>t&&!a||!r||n&&!o&&s||i&&s)return 1;if(e<t&&!n||!s||a&&!i&&r||o&&r)return-1}return 0}function m(e){return pi[e]}function I(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var a=e[r];if(a!==a)return r}return-1}function y(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function S(e,t){return e="number"==typeof e||di.test(e)?+e:-1,t=null==t?Vn:t,e>-1&&e%1==0&&e<t}function A(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function T(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function D(e){if(zt(e)&&!dr(e)){if(e instanceof b)return e;if(bi.call(e,"__wrapped__"))return tt(e)}return new b(e)}function b(e,t){this.w=e,this.D=[],this.b=!!t}function O(){}function R(e,t){return N(e,t)&&delete e[t]}function L(e,t){if(Qi){var n=e[t];return n===On?Tn:n}return bi.call(e,t)?e[t]:Tn}function N(e,t){return Qi?e[t]!==Tn:bi.call(e,t)}function P(e,t,n){e[t]=Qi&&n===Tn?On:n}function C(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function V(){this.O={hash:new O,map:qi?new qi:[],string:new O}}function k(e){var t=this.O;return Ze(e)?R("string"==typeof e?t.string:t.hash,e):qi?t.map.delete(e):W(t.map,e)}function F(e){var t=this.O;return Ze(e)?L("string"==typeof e?t.string:t.hash,e):qi?t.map.get(e):Q(t.map,e)}function x(e){var t=this.O;return Ze(e)?N("string"==typeof e?t.string:t.hash,e):qi?t.map.has(e):X(t.map,e)}function M(e,t){var n=this.O;return Ze(e)?P("string"==typeof e?n.string:n.hash,e,t):qi?n.map.set(e,t):J(n.map,e,t),this}function U(e){var t=-1,n=e?e.length:0;for(this.O=new C;++t<n;)this.push(e[t])}function G(e,t){var n=e.O;if(Ze(t)){var i=n.O,r="string"==typeof t?i.string:i.hash;return r[t]===On}return n.has(t)}function B(e){var t=this.O;if(Ze(e)){var n=t.O,i="string"==typeof e?n.string:n.hash;i[e]=On}else t.set(e,On)}function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function z(){this.O={array:[],map:null}}function H(e){var t=this.O,n=t.array;return n?W(n,e):t.map.delete(e)}function Y(e){var t=this.O,n=t.array;return n?Q(n,e):t.map.get(e)}function q(e){var t=this.O,n=t.array;return n?X(n,e):t.map.has(e)}function K(e,t){var n=this.O,i=n.array;i&&(i.length<Dn-1?J(i,e,t):(n.array=null,n.map=new C(i)));var r=n.map;return r&&r.set(e,t),this}function W(e,t){var n=$(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():ji.call(e,n,1),!0}function Q(e,t){var n=$(e,t);return n<0?Tn:e[n][1]}function X(e,t){return $(e,t)>-1}function $(e,t){for(var n=e.length;n--;)if(Lt(e[n][0],t))return n;return-1}function J(e,t,n){var i=$(e,t);i<0?e.push([t,n]):e[i][1]=n}function Z(e,t,n,i){return e===Tn||Lt(e,wi[n])&&!bi.call(i,n)?t:e}function ee(e,t,n){(n===Tn||Lt(e[t],n))&&("number"!=typeof t||n!==Tn||t in e)||(e[t]=n)}function te(e,t,n){var i=e[t];bi.call(e,t)&&Lt(i,n)&&(n!==Tn||t in e)||(e[t]=n)}function ne(e,t){return e&&ir(t,sn(t),e)}function ie(e){return"function"==typeof e?e:hn}function re(e,t,n,i,r,a,o){var s;if(i&&(s=a?i(e,r,a,o):i(e)),s!==Tn)return s;if(!jt(e))return e;var u=dr(e);if(u){if(s=Qe(e),!t)return be(e,s)}else{var c=We(e),l=c==Gn||c==Bn;if(fr(e))return Le(e,t);if(c==Hn||c==kn||l&&!a){if(y(e))return a?e:{};if(s=Xe(l?{}:e),!t)return s=ne(s,e),n?Me(e,s):s}else{if(!gi[c])return a?e:{};s=$e(e,c,t)}}o||(o=new j);var d=o.get(e);return d?d:(o.set(e,s),(u?tr:fe)(e,(function(r,a){te(s,a,re(r,t,n,i,a,e,o))})),n&&!u?Me(e,s):s)}function ae(e){return jt(e)?Gi(e):{}}function oe(e,t,n){if("function"!=typeof e)throw new TypeError(bn);return setTimeout((function(){e.apply(Tn,n)}),t)}function se(e,t,n,i){var r=-1,a=o,u=!0,c=e.length,l=[],d=t.length;if(!c)return l;n&&(t=me(t,v(n))),i?(a=s,u=!1):t.length>=Dn&&(a=G,u=!1,t=new U(t));e:for(;++r<c;){var f=e[r],g=n?n(f):f;if(u&&g===g){for(var p=d;p--;)if(t[p]===g)continue e;l.push(f)}else a(t,g,i)||l.push(f)}return l}function ue(e,t){var n=!0;return tr(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function ce(e,t){var n=[];return tr(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function le(e,t,n,i){i||(i=[]);for(var r=-1,a=e.length;++r<a;){var o=e[r];t>0&&Vt(o)&&(n||dr(o)||Pt(o))?t>1?le(o,t-1,n,i):u(i,o):n||(i[i.length]=o)}return i}function de(e,t){return null==e?e:nr(e,t,un)}function fe(e,t){return e&&nr(e,t,sn)}function ge(e,t){return ce(t,(function(t){return Gt(e[t])}))}function pe(e,t,n,i,r){return e===t||(null==e||null==t||!jt(e)&&!zt(t)?e!==e&&t!==t:ve(e,t,pe,n,i,r))}function ve(e,t,n,i,r,a){var o=dr(e),s=dr(t),u=Fn,c=Fn;o||(u=Li.call(e),u=u==kn?Hn:u),s||(c=Li.call(t),c=c==kn?Hn:c);var l=u==Hn&&!y(e),d=c==Hn&&!y(t),f=u==c;a||(a=[]);var g=ht(a,(function(t){return t[0]===e}));if(g&&g[1])return g[1]==t;if(a.push([e,t]),f&&!l){var p=o||$t(e)?He(e,t,n,i,r,a):Ye(e,t,u,n,i,r,a);return a.pop(),p}if(!(r&Pn)){var v=l&&bi.call(e,"__wrapped__"),h=d&&bi.call(t,"__wrapped__");if(v||h){var p=n(v?e.value():e,h?t.value():t,i,r,a);return a.pop(),p}}if(!f)return!1;var p=qe(e,t,n,i,r,a);return a.pop(),p}function he(e){var t=typeof e;return"function"==t?e:null==e?hn:("object"==t?Ie:we)(e)}function _e(e){return Hi(Object(e))}function Ee(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function me(e,t){var n=-1,i=Ct(e)?Array(e.length):[];return tr(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Ie(e){var t=sn(e);return function(n){var i=t.length;if(null==n)return!i;for(n=Object(n);i--;){var r=t[i];if(!(r in n&&pe(e[r],n[r],Tn,Nn|Pn)))return!1}return!0}}function ye(e,t,n,i,r){if(e!==t){var a=dr(t)||$t(t)?Tn:un(t);tr(a||t,(function(o,s){if(a&&(s=o,o=t[s]),jt(o))r||(r=new j),Se(e,t,s,n,ye,i,r);else{var u=i?i(e[s],o,s+"",e,t,r):Tn;u===Tn&&(u=o),ee(e,s,u)}}))}}function Se(e,t,n,i,r,a,o){var s=e[n],u=t[n],c=o.get(u);if(c)return void ee(e,n,c);var l=a?a(s,u,n+"",e,t,o):Tn,d=l===Tn;d&&(l=u,dr(u)||$t(u)?dr(s)?l=s:Vt(s)?l=be(s):(d=!1,l=re(u,!a)):Wt(u)||Pt(u)?Pt(s)?l=tn(s):!jt(s)||i&&Gt(s)?(d=!1,l=re(u,!a)):l=s:d=!1),o.set(u,l),d&&r(l,u,i,a,o),o.delete(u),ee(e,n,l)}function Ae(e,t){return e=Object(e),It(t,(function(t,n){return n in e&&(t[n]=e[n]),t}),{})}function Te(e,t){var n={};return de(e,(function(e,i){t(e,i)&&(n[i]=e)})),n}function we(e){return function(t){return null==t?Tn:t[e]}}function De(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(r);++i<r;)a[i]=e[i+t];return a}function be(e){return De(e,0,e.length)}function Oe(e,t){var n;return tr(e,(function(e,i,r){return n=t(e,i,r),!n})),!!n}function Re(e,t){var n=e;return It(t,(function(e,t){return t.func.apply(t.thisArg,u([e],t.args))}),n)}function Le(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function Ne(e){var t=new e.constructor(e.byteLength);return new Fi(t).set(new Fi(e)),t}function Pe(e){return It(T(e),i,new e.constructor)}function Ce(e){var t=new e.constructor(e.source,ci.exec(e));return t.lastIndex=e.lastIndex,t}function Ve(e){return It(w(e),r,new e.constructor)}function ke(e){return er?Object(er.call(e)):{}}function Fe(e,t){var n=t?Ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function xe(e,t,n,i){n||(n={});for(var r=-1,a=t.length;++r<a;){var o=t[r],s=i?i(n[o],e[o],o,n,e):e[o];te(n,o,s)}return n}function Me(e,t){return ir(e,ar(e),t)}function Ue(e){return bt((function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:Tn;for(a="function"==typeof a?(r--,a):Tn,t=Object(t);++i<r;){var o=n[i];o&&e(t,o,i,a)}return t}))}function Ge(e,t){return function(n,i){if(null==n)return n;if(!Ct(n))return e(n,i);for(var r=n.length,a=t?r:-1,o=Object(n);(t?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}function Be(e){return function(t,n,i){for(var r=-1,a=Object(t),o=i(t),s=o.length;s--;){var u=o[e?s:++r];if(n(a[u],u,a)===!1)break}return t}}function je(e){return function(){var t=arguments,n=ae(e.prototype),i=e.apply(n,t);return jt(i)?i:n}}function ze(e,t,n,i){function r(){for(var t=-1,s=arguments.length,u=-1,c=i.length,l=Array(c+s),d=this&&this!==Ai&&this instanceof r?o:e;++u<c;)l[u]=i[u];for(;s--;)l[u++]=arguments[++t];return d.apply(a?n:this,l)}if("function"!=typeof e)throw new TypeError(bn);var a=t&Rn,o=je(e);return r}function He(e,t,n,i,r,a){var o=-1,s=r&Pn,u=r&Nn,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;for(var d=!0;++o<c;){var f,g=e[o],p=t[o];if(f!==Tn){if(f)continue;d=!1;break}if(u){if(!Oe(t,(function(e){return g===e||n(g,e,i,r,a)}))){d=!1;break}}else if(g!==p&&!n(g,p,i,r,a)){d=!1;break}}return d}function Ye(e,t,n,i,r,a,o){switch(n){case xn:case Mn:return+e==+t;case Un:return e.name==t.name&&e.message==t.message;case zn:return e!=+e?t!=+t:e==+t;case Yn:case Kn:return e==t+""}return!1}function qe(e,t,n,i,r,a){var o=r&Pn,s=sn(e),u=s.length,c=sn(t),l=c.length;if(u!=l&&!o)return!1;for(var d=u;d--;){var f=s[d];if(!(o?f in t:bi.call(t,f)))return!1}for(var g=!0,p=o;++d<u;){f=s[d];var v,h=e[f],_=t[f];if(!(v===Tn?h===_||n(h,_,i,r,a):v)){g=!1;break}p||(p="constructor"==f)}if(g&&!p){var E=e.constructor,m=t.constructor;E!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof E&&E instanceof E&&"function"==typeof m&&m instanceof m)&&(g=!1)}return g}function Ke(e,t){var n=e[t];return Yt(n)?n:Tn}function We(e){return Li.call(e)}function Qe(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&bi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Xe(e){return"function"!=typeof e.constructor||et(e)?{}:ae(Mi(e))}function $e(e,t,n){var i=e.constructor;switch(t){case Xn:return Ne(e);case xn:case Mn:return new i(+e);case $n:case Jn:case Zn:case ei:case ti:case ni:case ii:case ri:case ai:return Fe(e,n);case jn:return Pe(e);case zn:case Kn:return new i(e);case Yn:return Ce(e);case qn:return Ve(e);case Wn:return ke(e)}}function Je(e){var t=e?e.length:Tn;return Bt(t)&&(dr(e)||Xt(e)||Pt(e))?p(t,String):null}function Ze(e){var t=typeof e;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=e||null==e}function et(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||wi;return e===n}function tt(e){var t=new b(e.w,e.b);return t.D=be(e.D),t}function nt(e){return ce(e,Boolean)}function it(e,t){return e&&e.length?d(e,he(t,3)):-1}function rt(e){var t=e?e.length:0;return t?le(e,1):[]}function at(e){var t=e?e.length:0;return t?le(e,Cn):[]}function ot(e){return e?e[0]:Tn}function st(e,t,n){var i=e?e.length:0;n="number"==typeof n?n<0?Yi(i+n,0):n:0;for(var r=(n||0)-1,a=t===t;++r<i;){var o=e[r];if(a?o===t:o!==o)return r}return-1}function ut(e){var t=e?e.length:0;return t?e[t-1]:Tn}function ct(e,t,n){var i=e?e.length:0;return t=null==t?0:+t,n=n===Tn?i:+n,i?De(e,t,n):[]}function lt(e){var t=D(e);return t.b=!0,t}function dt(e,t){return t(e),e}function ft(e,t){return t(e)}function gt(){return Re(this.w,this.D)}function pt(e,t,n){return t=n?Tn:t,ue(e,he(t))}function vt(e,t){return ce(e,he(t))}function ht(e,t){return l(e,he(t),tr)}function _t(e,t){return tr(e,ie(t))}function Et(e,t,n,i){e=Ct(e)?e:gn(e),n=n&&!i?gr(n):0;var r=e.length;return n<0&&(n=Yi(r+n,0)),Xt(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&f(e,t,n)>-1}function mt(e,t){return me(e,he(t))}function It(e,t,n){return g(e,he(t),n,arguments.length<3,tr)}function yt(e){return null==e?0:(e=Ct(e)?e:sn(e),e.length)}function St(e,t,n){return t=n?Tn:t,Oe(e,he(t))}function At(e,t){var n=0;return t=he(t),me(me(e,(function(e,i,r){return{value:e,index:n++,criteria:t(e,i,r)}})).sort((function(e,t){return E(e.criteria,t.criteria)||e.index-t.index})),we("value"))}function Tt(e,t){var n;if("function"!=typeof t)throw new TypeError(bn);return e=gr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=Tn),n}}function wt(e){if("function"!=typeof e)throw new TypeError(bn);return function(){return!e.apply(this,arguments)}}function Dt(e){return Tt(2,e)}function bt(e,t){if("function"!=typeof e)throw new TypeError(bn);return t=Yi(t===Tn?e.length-1:gr(t),0),function(){for(var n=arguments,i=-1,r=Yi(n.length-t,0),a=Array(r);++i<r;)a[i]=n[t+i];var o=Array(t+1);for(i=-1;++i<t;)o[i]=n[i];return o[t]=a,e.apply(this,o)}}function Ot(e){return jt(e)?dr(e)?be(e):ir(e,sn(e)):e}function Rt(e){return re(e,!0,!0)}function Lt(e,t){return e===t||e!==e&&t!==t}function Nt(e,t){return e>t}function Pt(e){return Vt(e)&&bi.call(e,"callee")&&(!Bi.call(e,"callee")||Li.call(e)==kn)}function Ct(e){return null!=e&&Bt(rr(e))&&!Gt(e)}function Vt(e){return zt(e)&&Ct(e)}function kt(e){return e===!0||e===!1||zt(e)&&Li.call(e)==xn}function Ft(e){return zt(e)&&Li.call(e)==Mn}function xt(e){if(Ct(e)&&(dr(e)||Xt(e)||Gt(e.splice)||Pt(e)))return!e.length;for(var t in e)if(bi.call(e,t))return!1;return!0}function Mt(e,t){return pe(e,t)}function Ut(e){return"number"==typeof e&&zi(e)}function Gt(e){var t=jt(e)?Li.call(e):"";return t==Gn||t==Bn}function Bt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Vn}function jt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function zt(e){return!!e&&"object"==typeof e}function Ht(e){return Kt(e)&&e!=+e}function Yt(e){return null!=e&&(Gt(e)?Pi.test(Di.call(e)):zt(e)&&(y(e)?Pi:li).test(e))}function qt(e){return null===e}function Kt(e){return"number"==typeof e||zt(e)&&Li.call(e)==zn}function Wt(e){if(!zt(e)||Li.call(e)!=Hn||y(e))return!1;var t=Mi(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&Di.call(n)==Ri}function Qt(e){return jt(e)&&Li.call(e)==Yn}function Xt(e){return"string"==typeof e||!dr(e)&&zt(e)&&Li.call(e)==Kn}function $t(e){return zt(e)&&Bt(e.length)&&!!fi[Li.call(e)]}function Jt(e){return e===Tn}function Zt(e,t){return e<t}function en(e){return Ct(e)?e.length?be(e):[]:gn(e)}function tn(e){return ir(e,un(e))}function nn(e){return"string"==typeof e?e:null==e?"":e+""}function rn(e,t){var n=ae(e);return t?vr(n,t):n}function an(e,t){return e&&fe(e,ie(t))}function on(e,t){return null!=e&&bi.call(e,t)}function sn(e){var t=et(e);if(!t&&!Ct(e))return _e(e);var n=Je(e),i=!!n,r=n||[],a=r.length;for(var o in e)!bi.call(e,o)||i&&("length"==o||S(o,a))||t&&"constructor"==o||r.push(o);return r}function un(e){for(var t=-1,n=et(e),i=Ee(e),r=i.length,a=Je(e),o=!!a,s=a||[],u=s.length;++t<r;){var c=i[t];o&&("length"==c||S(c,u))||"constructor"==c&&(n||!bi.call(e,c))||s.push(c)}return s}function cn(e,t){var n={};return t=he(t,3),fe(e,(function(e,i,r){n[i]=t(e,i,r)})),n}function ln(e,t){return t=he(t),Te(e,(function(e,n){return!t(e,n)}))}function dn(e,t){return null==e?{}:Te(e,he(t))}function fn(e,t,n){var i=null==e?Tn:e[t];return i===Tn&&(i=n),Gt(i)?i.call(e):i}function gn(e){return e?h(e,sn(e)):[]}function pn(e){return e=nn(e),e&&si.test(e)?e.replace(oi,m):e}function vn(e){return function(){return e}}function hn(e){return e}function _n(e){return Ie(vr({},e))}function En(e,t,n){var i=sn(t),r=ge(t,i);null!=n||jt(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=ge(t,sn(t)));var a=!(jt(n)&&"chain"in n)||n.chain,o=Gt(e);return tr(r,(function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t=this.b;if(a||t){var n=e(this.w),r=n.D=be(this.D);return r.push({func:i,args:arguments,thisArg:e}),n.b=t,n}return i.apply(e,u([this.value()],arguments))})})),e}function mn(){return Ai._===this&&(Ai._=Ni),this}function In(){}function yn(e){var t=++Oi;return nn(e)+t}function Sn(e){return e&&e.length?c(e,hn,Nt):Tn}function An(e){return e&&e.length?c(e,hn,Zt):Tn}var Tn,wn="4.6.1",Dn=200,bn="Expected a function",On="__lodash_hash_undefined__",Rn=1,Ln=32,Nn=1,Pn=2,Cn=1/0,Vn=9007199254740991,kn="[object Arguments]",Fn="[object Array]",xn="[object Boolean]",Mn="[object Date]",Un="[object Error]",Gn="[object Function]",Bn="[object GeneratorFunction]",jn="[object Map]",zn="[object Number]",Hn="[object Object]",Yn="[object RegExp]",qn="[object Set]",Kn="[object String]",Wn="[object Symbol]",Qn="[object WeakMap]",Xn="[object ArrayBuffer]",$n="[object Float32Array]",Jn="[object Float64Array]",Zn="[object Int8Array]",ei="[object Int16Array]",ti="[object Int32Array]",ni="[object Uint8Array]",ii="[object Uint8ClampedArray]",ri="[object Uint16Array]",ai="[object Uint32Array]",oi=/[&<>"'`]/g,si=RegExp(oi.source),ui=/[\\^$.*+?()[\]{}|]/g,ci=/\w*$/,li=/^\[object .+?Constructor\]$/,di=/^(?:0|[1-9]\d*)$/,fi={};fi[$n]=fi[Jn]=fi[Zn]=fi[ei]=fi[ti]=fi[ni]=fi[ii]=fi[ri]=fi[ai]=!0,fi[kn]=fi[Fn]=fi[Xn]=fi[xn]=fi[Mn]=fi[Un]=fi[Gn]=fi[jn]=fi[zn]=fi[Hn]=fi[Yn]=fi[qn]=fi[Kn]=fi[Qn]=!1;var gi={};gi[kn]=gi[Fn]=gi[Xn]=gi[xn]=gi[Mn]=gi[$n]=gi[Jn]=gi[Zn]=gi[ei]=gi[ti]=gi[jn]=gi[zn]=gi[Hn]=gi[Yn]=gi[qn]=gi[Kn]=gi[Wn]=gi[ni]=gi[ii]=gi[ri]=gi[ai]=!0,gi[Un]=gi[Gn]=gi[Qn]=!1;var pi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},vi={function:!0,object:!0},hi=vi[typeof t]&&t&&!t.nodeType?t:Tn,_i=vi[typeof e]&&e&&!e.nodeType?e:Tn,Ei=_i&&_i.exports===hi?hi:Tn,mi=_(hi&&_i&&"object"==typeof n&&n),Ii=_(vi[typeof self]&&self),yi=_(vi[typeof window]&&window),Si=_(vi[typeof this]&&this),Ai=mi||yi!==(Si&&Si.window)&&yi||Ii||Si||Function("return this")(),Ti=Array.prototype,wi=Object.prototype,Di=Function.prototype.toString,bi=wi.hasOwnProperty,Oi=0,Ri=Di.call(Object),Li=wi.toString,Ni=Ai._,Pi=RegExp("^"+Di.call(bi).replace(ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ci=Ei?Ai.Buffer:Tn,Vi=Ai.Reflect,ki=Ai.Symbol,Fi=Ai.Uint8Array,xi=Vi?Vi.enumerate:Tn,Mi=Object.getPrototypeOf,Ui=Object.getOwnPropertySymbols,Gi=Object.create,Bi=wi.propertyIsEnumerable,ji=Ti.splice,zi=Ai.isFinite,Hi=Object.keys,Yi=Math.max,qi=Ke(Ai,"Map"),Ki=Ke(Ai,"Set"),Wi=Ke(Ai,"WeakMap"),Qi=Ke(Object,"create"),Xi=qi?Di.call(qi):"",$i=Ki?Di.call(Ki):"",Ji=Wi?Di.call(Wi):"",Zi=ki?ki.prototype:Tn,er=Zi?Zi.valueOf:Tn,tr=Ge(fe),nr=Be();xi&&!Bi.call({valueOf:1},"valueOf")&&(Ee=function(e){return A(xi(e))});var ir=xe,rr=we("length"),ar=Ui||function(){return[]};(qi&&We(new qi)!=jn||Ki&&We(new Ki)!=qn||Wi&&We(new Wi)!=Qn)&&(We=function(e){var t=Li.call(e),n=t==Hn?e.constructor:null,i="function"==typeof n?Di.call(n):"";if(i)switch(i){case Xi:return jn;case $i:return qn;case Ji:return Qn}return t});var or=bt((function(e,t){return dr(e)||(e=null==e?[]:[Object(e)]),t=le(t,1),a(e,t)})),sr=bt((function(e,t,n){return ze(e,Rn|Ln,t,n)})),ur=bt((function(e,t){return oe(e,1,t)})),cr=bt((function(e,t,n){return oe(e,pr(t)||0,n)})),lr=bt((function(e,t){return ze(e,Ln,Tn,t)})),dr=Array.isArray,fr=Ci?function(e){return e instanceof Ci}:vn(!1),gr=Number,pr=Number,vr=Ue((function(e,t){ir(t,sn(t),e)})),hr=Ue((function(e,t){ir(t,un(t),e)})),_r=Ue((function(e,t,n,i){xe(t,un(t),e,i)})),Er=bt((function(e){return e.push(Tn,Z),_r.apply(Tn,e)})),mr=Ue((function(e,t,n){ye(e,t,n)})),Ir=bt((function(e,t){return null==e?{}:(t=me(le(t,1),String),Ae(e,se(un(e),t)))})),yr=bt((function(e,t){return null==e?{}:Ae(e,le(t,1))})),Sr=he;b.prototype=ae(D.prototype),b.prototype.constructor=b,O.prototype=Qi?Qi(null):wi,C.prototype.clear=V,C.prototype.delete=k,C.prototype.get=F,C.prototype.has=x,C.prototype.set=M,U.prototype.push=B,j.prototype.clear=z,j.prototype.delete=H,j.prototype.get=Y,j.prototype.has=q,j.prototype.set=K,D.assign=vr,D.assignIn=hr,D.before=Tt,D.bind=sr,D.chain=lt,D.compact=nt,D.concat=or,D.create=rn,D.defaults=Er,D.defer=ur,D.delay=cr,D.filter=vt,D.flatten=rt,D.flattenDeep=at,D.iteratee=Sr,D.keys=sn,D.map=mt,D.mapValues=cn,D.matches=_n,D.merge=mr,D.mixin=En,D.negate=wt,D.omit=Ir,D.omitBy=ln,D.once=Dt,D.partial=lr,D.pick=yr,D.pickBy=dn,D.slice=ct,D.sortBy=At,D.tap=dt,D.thru=ft,D.toArray=en,D.values=gn,D.extend=hr,En(D,D),D.clone=Ot,D.cloneDeep=Rt,D.escape=pn,D.every=pt,D.find=ht,D.findIndex=it,D.forEach=_t,D.forOwn=an,D.has=on,D.head=ot,D.identity=hn,D.includes=Et,D.indexOf=st,D.isArguments=Pt,D.isArray=dr,D.isBoolean=kt,D.isDate=Ft,D.isEmpty=xt,D.isEqual=Mt,D.isFinite=Ut,D.isFunction=Gt,D.isNaN=Ht,D.isNull=qt,D.isNumber=Kt,D.isObject=jt,D.isRegExp=Qt,D.isString=Xt,D.isUndefined=Jt,D.last=ut,D.max=Sn,D.min=An,D.noConflict=mn,D.noop=In,D.reduce=It,D.result=fn,D.size=yt,D.some=St,D.uniqueId=yn,D.each=_t,D.first=ot,En(D,(function(){var e={};return fe(D,(function(t,n){bi.call(D.prototype,n)||(e[n]=t)})),e})(),{chain:!1}),D.VERSION=wn,tr(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],(function(e){var t=(/^(?:replace|split)$/.test(e)?String.prototype:Ti)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(e);D.prototype[e]=function(){var e=arguments;return i&&!this.b?t.apply(this.value(),e):this[n]((function(n){return t.apply(n,e)}))}})),D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=gt,(yi||Ii||{})._=D,hi&&_i&&(Ei&&((_i.exports=D)._=D),hi._=D)}).call(this)}).call(t,n(10)(e),(function(){return this})())}),(function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}),(function(e,t,n){function i(e){e=a.extend({logLevel:"ERROR",logMatch:""},e),this.setLogMatcher(e.logMatch),this.setLogLevel(e.logLevel),this.logs=[],this.timebase=s.now()}function r(){var e=u.getQueryParamValue("optimizely_log");if(e){var t=e.split(":"),n=""===t[0]?"OFF":String(t[0]).toUpperCase(),i="undefined"==typeof t[1]?"":t[1];return{logLevel:n,logMatch:i}}return{logLevel:"OFF",logMatch:""}}var a=n(8),o=n(12),s=n(14),u=n(15),c=n(5),l=n(17),d=n(18);i.prototype.setLogLevel=function(e){var t=this.R(e),n=this.logLevel;null===t?console.error("Unknown log level: "+e):(this.logLevel=t,this.logLevel>o.LogLevel.OFF&&(console.log("Setting log level to "+t),a.isUndefined(n)||this.flush()))},i.prototype.setLogMatcher=function(e){a.isString(e)?this.logMatcher=e:this.logMatcher="",this.logGroup=0},i.prototype.shouldLog=function(e){return this.logLevel>=e},i.prototype.matchesLogMessage=function(e,t){var n=this.logMatcher;if(!this.logMatcher)return!0;if(this.logGroup)return"GROUPSTART"===e?this.logGroup++:"GROUPEND"===e&&this.logGroup--,!0;var i=a.some(t,(function(e){if(!a.isString(e))try{e=d.stringify(e)}catch(e){}return a.isString(e)&&a.includes(e,n)}));return i&&"GROUPSTART"===e&&this.logGroup++,i},i.prototype.storeLog=function(e,t){var n={logLevel:e,logMessage:t};c.dispatch(l.LOG,n)},i.prototype.flush=function(){var e=n(19),t=e.get("stores/log");this.logGroup=0;var i=t.getLogs();a.each(i,function(e){this.L(e.logLevel,e.logMessage,!0)}.bind(this))},i.prototype.L=function(e,t,n){var i,r=e;if(console)switch(e){case"GROUPSTART":i=console.groupCollapsed,r=o.LogLevel.DEBUG;break;case"GROUPEND":i=console.groupEnd,r=o.LogLevel.DEBUG;break;case o.LogLevel.ERROR:i=console.error;break;case o.LogLevel.WARN:i=console.warn;break;case o.LogLevel.DEBUG:i=console.debug;break;default:i=console.log}try{!n&&this.shouldLog(r)&&(a.isArray(t)&&a.isString(t[0])&&(t=this.N(t)),this.storeLog(e,t)),i&&this.shouldLog(r)&&this.matchesLogMessage(e,t)&&i.apply(console,t)}catch(e){console&&(console.error?console.error(e):console.log(e))}},i.prototype.debug=function(){this.L(o.LogLevel.DEBUG,[].slice.call(arguments))},i.prototype.log=function(){this.L(o.LogLevel.INFO,[].slice.call(arguments))},i.prototype.logAlways=function(){var e=this.N([].slice.call(arguments));console&&console.log&&console.log.apply&&console.log.apply(console,e),this.storeLog(o.LogLevel.INFO,e)},i.prototype.warn=function(){this.L(o.LogLevel.WARN,[].slice.call(arguments))},i.prototype.error=function(e){var t=[].slice.call(arguments);1===t.length&&e.stack?(this.L(o.LogLevel.ERROR,[this.P(),e]),this.L(o.LogLevel.INFO,[e.stack])):this.L(o.LogLevel.ERROR,t)},i.prototype.groupCollapsed=function(){this.L("GROUPSTART",[].slice.call(arguments))},i.prototype.groupEnd=function(){this.L("GROUPEND",[].slice.call(arguments))},i.prototype.N=function(e){var t=this.P().toString();return t.length<6&&(t=("     "+t).slice(-6)),[t+"| Optly / "+e[0]].concat(e.slice(1))},i.prototype.P=function(){return this.timebase?s.now()-this.timebase:0},i.prototype.R=function(e){return e&&(e=e.toUpperCase(),"TRUE"===e&&(e="INFO"),"FALSE"===e&&(e="OFF"),!a.isUndefined(o.LogLevel[e]))?o.LogLevel[e]:null},e.exports=new i(r())}),(function(e,t,n){var i=n(13);t.COOKIES={OPT_OUT:"optimizelyOptOut",PREVIEW:"optimizelyPreview",REDIRECT:"optimizelyRedirectData",SESSION_STATE:"optimizelySessionState",TOKEN:"optimizelyToken",VISITOR_ID:"optimizelyEndUserId",VISITOR_UUID:"optimizelyPPID"},t.LayerActivationTypes={CONDITIONAL:"conditional",IMMEDIATE:"immediate",MANUAL:"manual",READY:"ready",TIMEOUT:"timeout"},t.LogLevel={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4,ALL:5},t.Lifecycle=i({preActivate:null,postVisitorProfileLoad:null,postViewsActivated:null,postActivate:null}),t.ViewActivationTypes=i({immediate:null,manual:null,callback:null,polling:null}),t.StorageKeys={PENDING_EVENTS:"pending_events"},t.PluginTypes=i({visitorProfileProviders:null,viewProviders:null,audienceMatchers:null,viewMatchers:null,analyticsTrackers:null,viewTagLocators:null,userFeatureDefs:null,apiModules:null,changeAppliers:null,deciders:null,eventImplementations:null}),t.ResourceTimingAttributes=i({connectStart:null,connectEnd:null,decodedBodySize:null,domainLookupStart:null,domainLookupEnd:null,duration:null,encodedBodySize:null,fetchStart:null,
requestStart:null,responseStart:null,responseEnd:null,secureConnectionStart:null,startTime:null,transferSize:null}),t.RUMPerformanceTimingAttributes=i({blockTime:null}),t.AttributionTypes=i({FIRST_TOUCH:null,LAST_TOUCH:null}),t.SandboxedFunctions=i({XMLHttpRequest:null}),t.PerformanceData=i({performance_marks:null,resource_timing:null,performance_timing:null}),t.VisitorStorageKeys={EVENTS:"events",EVENT_QUEUE:"event_queue",LAYER_STATES:"layer_states",SESSION_STATE:"session_state",VISITOR_PROFILE:"visitor_profile",VARIATION_MAP:"variation_map"}}),(function(e,t){"use strict";var n=function(e){var t,n={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=n}),(function(e,t){t.now=function(){return+new Date}}),(function(e,t,n){var i=n(8),r=n(16);t.getQueryParams=function(){var e=r.getLocationSearch()||"";if(0===e.indexOf("?")&&(e=e.substring(1)),0===e.length)return[];for(var t=e.split("&"),n=[],i=0;i<t.length;i++){var a="",o="",s=t[i].split("=");s.length>0&&(a=s[0]),s.length>1&&(o=s[1]),n.push([a,o])}return n},t.getQueryParamValue=function(e){for(var n=t.getQueryParams(),i=0;i<n.length;i++)if(n[i][0]===e)return n[i][1];return null},t.queryStringFromMap=function(e){return i.map(e,(function(e,t){return t+"="+e})).join("&")}}),(function(e,t){t.getUserAgent=function(){return window.navigator.userAgent},t.getLocationSearch=function(){return window.location.search},t.getNavigatorLanguage=function(){return window.navigator.language||window.navigator.userLanguage},t.getHref=function(){return window.location.href},t.getLocation=function(){return window.location},t.setLocation=function(e){window.location.replace(e)},t.setGlobal=function(e,t){window[e]=t},t.getGlobal=function(e){return window[e]},t.addEventListener=function(){return window.addEventListener.apply(window,arguments)}}),(function(e,t,n){var i=n(13);e.exports=i({LOG:null,SET_LOGLEVEL:null,INITIALIZE_STATE:null,ACTIVATE:null,UPDATE_BEHAVIOR_STORE:null,DATA_LOADED:null,LOAD_PERSISTED_LAYER_STATES:null,RECORD_GLOBAL_DECISION:null,RECORD_LAYER_DECISION:null,RECORD_LAYER_DECISION_TICKET:null,SET_VISITOR_ATTRIBUTES:null,SET_VISITOR_ATTRIBUTE_PENDING:null,LOAD_EXISTING_VISITOR_PROFILE:null,SET_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENT_QUEUE:null,SET_VISITOR_ID:null,REFRESH_SESSION:null,LOAD_SESSION_STATE:null,UPDATE_VARIATION_ID_MAP:null,MERGE_VARIATION_ID_MAP:null,TRACK_DECISION_EVENT:null,TRACK_VIEW_ACTIVATED_EVENT:null,REGISTER_ASYNC_DEFERRED:null,RESOLVE_DEFERRED:null,REJECT_DEFERRED:null,REGISTER_PLUGIN:null,ADD_CLEANUP_FN:null,CLEAR_CLEANUP_FN:null,ACTION_EXECUTED:null,REGISTER_ACTION:null,SET_VIEW_ACTIVE_STATE:null,UPDATE_PARSED_VIEW_METADATA:null,UPDATE_USER_SUPPLIED_METADATA:null,REGISTER_VIEWS:null,SET_GLOBAL_TAGS:null,ATTACH_EVENT_STREAM_PUBLISHERS:null,DETACH_EVENT_STREAM_PUBLISHERS:null,LOAD_DIRECTIVE:null,SET_COOKIE_AGE:null,SET_COOKIE_DOMAIN:null,XDOMAIN_SET_DEFAULT_FRAME:null,XDOMAIN_ADD_FRAME:null,XDOMAIN_SET_MESSAGE:null,XDOMAIN_ADD_SUBSCRIBER:null,XDOMAIN_SET_CANONICAL_ORIGINS:null,XDOMAIN_SET_DISABLED:null,ADD_EMITTER_HANDLER:null,REMOVE_EMITTER_HANDLER:null,SET_INTEGRATION_SETTINGS:null,ADD_CHANGE:null,SET_PENDING_EVENT:null,REMOVE_PENDING_EVENT:null,LOAD_PENDING_EVENTS:null,SANDBOXED_FUNCTIONS_ADDED:null,SET_RUM_DATA:null,SET_PERFORMANCE_DATA:null,SET_RESOURCE_TIMING_DATA:null,SET_PERFORMANCE_MARKS_DATA:null})}),(function(e,t,n){function i(e){var t=[Array.prototype],n=[];r.each(t,(function(e){r.isUndefined(e.toJSON)||(n.push(e.toJSON),delete e.toJSON)}));var i,a;try{i=e()}catch(e){a=e}finally{r.each(n,(function(e,n){t[n].toJSON=e}))}if(a)throw a;return i}var r=n(8);t.stringify=function(){return i(function(){return JSON.stringify.apply(null,this)}.bind(arguments))},t.parse=JSON.parse}),(function(e,t,n){var i=n(8),r=n(5),a=n(20),o=a.create(),s={action_data:n(21),async_request:n(22),audience_data:n(23),change_data:n(24),cleanup:n(25),cookie_options:n(26),event_data:n(27),event_emitter:n(28),dimension_data:n(29),directive:n(30),global:n(31),global_state:n(32),integration_settings:n(33),layer:n(34),layer_data:n(35),log:n(36),pending_events:n(37),performance:n(38),plugins:n(39),provider_status:n(40),rum:n(41),sandbox:n(42),session:n(43),view:n(45),view_data:n(46),visitor:n(47),visitor_attribute_entity:n(48),visitor_events:n(49),visitor_events_manager:n(55),visitor_id:n(56),xdomain:n(57)};r.registerStores(s),i.forOwn(s,(function(e,t){o.register("stores/"+t,r.getStore(t))})),e.exports=o}),(function(e,t,n){function i(){this.C={}}var r=n(8);i.prototype.register=function(e,t){if(1===arguments.length){var n=this;return void r.each(e,(function(e,t){n.register(t,e)}))}if(this.C[e])throw new Error("Module already registered for: "+e);this.C[e]=t},i.prototype.get=function(e){return this.C[e]},i.prototype.getModuleKeys=function(){var e=this.C;return r.keys(e)},i.prototype.evaluate=function(e){var t=e.length,n=e.slice(0,t-1),i=e[t-1];if("function"!=typeof i)throw new Error("Evaluate must take a function as last element in array");var a=r.map(n,this.get.bind(this));return i.apply(null,a)},i.prototype.reset=function(){this.C={}},e.exports={create:function(){return new i}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.V)},V:function(e){var t=this;i.isEmpty(e.data.layers)||(i.each(e.data.layers,(function(e){if(e.changes){var n="layerId:"+e.id;t.T[n]={id:n,layerId:e.id,changeSet:e.changes,type:"layer"}}i.each(e.experiments,(function(n){if(n.changes){var r="experimentId:"+n.id;t.T[r]={id:r,layerId:e.id,experimentId:n.id,changeSet:n.changes,type:"experiment"}}i.each(n.variations,(function(r){i.each(r.actions,(function(i){var a=n.id+":"+r.id+":"+i.viewId;t.T[a]={id:a,layerId:e.id,experimentId:n.id,variationId:r.id,viewId:i.viewId,changeSet:i.changes,type:"variation"}}))}))}))})),this.emitChange())},getByChangeId:function(e){return i.find(this.T,{changeSet:[{id:e}]})},getExperimentVariationActions:function(e,t){return i.cloneDeep(i.filter(this.T,{experimentId:e,variationId:t}))},getLayerActions:function(e){return i.cloneDeep(i.filter(this.T,{id:"layerId:"+e}))},getExperimentActions:function(e){return i.cloneDeep(i.filter(this.T,{id:"experimentId:"+e}))}}}),(function(e,t,n){var i=n(17);e.exports={initialize:function(){this.T={},this.on(i.REGISTER_ASYNC_DEFERRED,this.k),this.on(i.RESOLVE_DEFERRED,this.F),this.on(i.REJECT_DEFERRED,this.x),this.on(i.ACTIVATE,this.M)},getRequest:function(e){return this.T[e]},getPromise:function(e){var t=this.getRequest(e);if(t)return t.promise},M:function(){this.T={},this.emitChange()},k:function(e){this.T[e.source]={promise:e.promise,resolver:e.resolver,rejecter:e.rejecter}},F:function(e){var t=this.getRequest(e.source);if(!t)throw new Error("No request registered for source: "+e.source);t.resolver(e.resolveWith)},x:function(e){var t=this.getRequest(e.source);if(!t)throw new Error("No request registered for source: "+e.source);if(!t.rejecter)throw new Error("No rejecter registered for source: "+e.source);t.rejecter(e.rejectWith)}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.V)},V:function(e){i.isEmpty(e.data.audiences)||(i.each(e.data.audiences,function(e){this.T[e.id]=e}.bind(this)),this.emitChange())},getAll:function(){return i.cloneDeep(i.values(this.T))},get:function(e){return i.cloneDeep(this.T[e])},getAudienceName:function(e){var t=i.find(i.values(this.T),{id:e});return t.name||"Aud "+e}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.ADD_CHANGE,this.U),this.on(r.DATA_LOADED,this.V)},getChangeData:function(e){return this.T[e]},V:function(e){i.isEmpty(e.data.changes)||i.each(e.data.changes,this.U.bind(this))},U:function(e){var t=e.id,n=this.getChangeData(t);this.T[t]=n?i.extend(n,e):e,this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17),a=n(12);e.exports={initialize:function(){this.T={},i.each(a.Lifecycle,function(e){this.T[e]=[]}.bind(this)),this.on(r.ADD_CLEANUP_FN,this.G),this.on(r.CLEAR_CLEANUP_FN,this.B)},getCleanupFns:function(e){return i.cloneDeep(this.T[e])},G:function(e){this.T[e.lifecycle].push(e.cleanupFn),this.emitChange()},B:function(e){var t=this.T[e.lifecycle];if(e.cleanupFn){var n=t.indexOf(e.cleanupFn);n>-1&&(t.splice(n,1),this.emitChange())}else this.T[e.lifecycle]=[],this.emitChange()}}}),(function(e,t,n){var i=n(17),r=31536e4;e.exports={initialize:function(){this.T={currentDomain:null,defaultAgeSeconds:r},this.on(i.SET_COOKIE_DOMAIN,this.j),this.on(i.SET_COOKIE_AGE,this.z)},getCurrentDomain:function(){return this.T.currentDomain},getDefaultAgeInSeconds:function(){return this.T.defaultAgeSeconds},j:function(e){this.T.currentDomain=e,this.emitChange()},z:function(e){this.T.defaultAgeSeconds=e,this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.V)},getAll:function(){return i.cloneDeep(i.values(this.T))},get:function(e){return i.cloneDeep(this.T[e])},getByApiName:function(e){return i.find(i.values(this.T),{apiName:e})},getByViewId:function(e){return i.cloneDeep(i.filter(this.T,{viewId:e}))},V:function(e){i.isEmpty(e.data.events)||(i.each(e.data.events,function(e){this.T[e.id]=e}.bind(this)),this.emitChange())}}}),(function(e,t,n){function i(e){var t=[];return e&&r.isObject(e)?(e.type&&t.push(e.type),t.push(o),e.type&&e.name&&t.push(e.name),t.join("")):o}var r=n(8),a=n(17),o="|";e.exports={initialize:function(){this.T={handlers:{}},this.on(a.ADD_EMITTER_HANDLER,this.H),this.on(a.REMOVE_EMITTER_HANDLER,this.Y)},getHandlers:function(e,t){var n=[null,{type:e.type},{type:e.type,name:e.name}],a=[];return r.each(n,function(e){var t=i(e),n=this.T.handlers[t];n&&(a=a.concat(n))}.bind(this)),t&&(a=r.filter(a,(function(e){return!e.publicOnly}))),a},H:function(e){var t=i(e.filter);this.T.handlers[t]||(this.T.handlers[t]=[]),this.T.handlers[t].push({handler:e.handler,token:e.token,publicOnly:!!e.publicOnly,emitErrors:!!e.emitErrors}),this.emitChange()},Y:function(e){var t=!1,n=e.token;r.forOwn(this.T.handlers,(function(e,i){r.each(e,(function(i,r){i.token===n&&(t=!0,e.splice(r,1))}))})),t&&this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.V)},V:function(e){i.isEmpty(e.data.dimensions)||(i.each(e.data.dimensions,function(e){this.T[e.id]=e}.bind(this)),this.emitChange())},getAll:function(){return i.cloneDeep(i.values(this.T))},getById:function(e){return i.cloneDeep(this.T[e])},getByApiName:function(e){return i.cloneDeep(i.find(i.values(this.T),{apiName:e}))}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={disabled:!1,forceAudienceIds:[],forceVariationIds:[],alreadyInitialized:!1,isEditor:!1,isPreview:!1,isLegacyPreview:!1,isSlave:!1,previewLayerIds:[],projectToken:null,shouldOptOut:!1,trackingDisabled:!1,isRunningInV2Editor:!1,isRunningInDesktopApp:!1,forceTracking:!1},this.on(r.LOAD_DIRECTIVE,this.q)},getAll:function(){return i.cloneDeep(this.T)},isDisabled:function(){return this.T.disabled},isEditor:function(){return this.T.isEditor},clientHasAlreadyInitialized:function(){return this.T.alreadyInitialized},getForceAudienceIds:function(){return this.T.forceAudienceIds},getForceVariationIds:function(){return this.T.forceVariationIds},getPreviewLayerIds:function(){return this.T.previewLayerIds},getProjectToken:function(){return this.T.projectToken},getForceTracking:function(){return this.T.forceTracking},shouldActivate:function(){return!this.T.isEditor&&!this.isDisabled()},shouldBootstrapDataForPreview:function(){return this.T.isPreview},shouldBootstrapDataForEditor:function(){return this.T.isEditor},shouldInitialize:function(){return!(this.shouldOptOut()||this.shouldLoadPreview()||this.isDisabled()||this.getProjectToken())},shouldLoadPreview:function(){return!(this.T.isPreview||this.T.isLegacyPreview||!this.getProjectToken()||this.T.isEditor)},shouldBailForDesktopApp:function(){return!this.T.isEditor&&this.T.isRunningInDesktopApp},shouldLoadInnie:function(){return!this.T.isSlave&&!this.T.isEditor&&this.T.isRunningInV2Editor},shouldOptOut:function(){return this.T.shouldOptOut},shouldSendTrackingData:function(){return!this.T.trackingDisabled&&(!!this.T.forceTracking||!this.T.isPreview&&i.isEmpty(this.getForceVariationIds())&&i.isEmpty(this.getForceAudienceIds()))},isSlave:function(){return this.T.isSlave},isRunningInDesktopApp:function(){return this.T.isRunningInDesktopApp},isRunningInV2Editor:function(){return this.T.isRunningInV2Editor},q:function(e){i.extend(this.T,e),this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={holdback:0,isGlobalHoldback:null,listTargetingCookies:[],revision:null,projectId:null,accountId:null,namespace:null,activationId:null,dcpServiceId:null,dcpKeyfieldLocators:[],recommenderServices:[],anonymizeIP:null,projectJS:null,snippetId:null,plugins:[]},this.on(r.DATA_LOADED,this.K),this.on(r.ACTIVATE,this.W),this.on(r.RECORD_GLOBAL_DECISION,this.Q)},getRevision:function(){return this.T.revision},getGlobalHoldbackThreshold:function(){return this.T.holdback},getProjectId:function(){return this.T.projectId},getSnippetId:function(){return this.T.snippetId},getAccountId:function(){return this.T.accountId},getNamespace:function(){return this.T.namespace},getActivationId:function(){return this.T.activationId},getAnonymizeIP:function(){return this.T.anonymizeIP},isGlobalHoldback:function(){return!!this.T.isGlobalHoldback},getListTargetingCookieNames:function(){return this.T.listTargetingCookies.slice()},getDCPServiceId:function(){return this.T.dcpServiceId},getDCPKeyfieldLocators:function(){return this.T.dcpKeyfieldLocators},getRecommenderServices:function(){return this.T.recommenderServices},getProjectJS:function(){return this.T.projectJS},getPlugins:function(){return this.T.plugins},W:function(e){this.T.activationId=e.activationId,this.T.isGlobalHoldback=null},Q:function(e){var t=e.isGlobalHoldback;if(null!==this.T.isGlobalHoldback&&this.T.isGlobalHoldback!==t)throw new Error("Attempted to change already set global holdback!");this.T.isGlobalHoldback=t,this.emitChange()},K:function(e){var t=i.pick(e.data,["holdback","accountId","projectId","snippetId","namespace","revision","listTargetingCookies","dcpServiceId","dcpKeyfieldLocators","recommenderServices","anonymizeIP","plugins","projectJS"]);if(0!==i.keys(t).length){var n={listTargetingCookies:[],dcpServiceId:null,dcpKeyfieldLocators:[]};i.extend(this.T,n,t),this.emitChange()}}}}),(function(e,t,n){var i=n(17);e.exports={initialize:function(){this.T={effectiveReferrer:null,effectiveVariationId:null},this.on(i.INITIALIZE_STATE,this.X)},getEffectiveReferrer:function(){return this.T.effectiveReferrer},getEffectiveVariationId:function(){return this.T.effectiveVariationId},X:function(e){e.effectiveReferrer&&(this.T.effectiveReferrer=e.effectiveReferrer),e.effectiveVariationId&&(this.T.effectiveVariationId=e.effectiveVariationId),this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.V),this.on(r.SET_INTEGRATION_SETTINGS,this.$)},V:function(e){i.isEmpty(e.data.integrationSettings)||(i.each(e.data.integrationSettings,function(e){this.T[e.id]=e}.bind(this)),this.emitChange())},$:function(e){var t=this.T[e.id];t?i.extend(t,e):this.T[e.id]=e},getAll:function(){return i.cloneDeep(i.values(this.T))},get:function(e){return i.cloneDeep(this.T[e])},getReference:function(e){return this.T[e]}}}),(function(e,t,n){var i=n(8),r=n(11),a=n(17),o="*";e.exports={initialize:function(){this.T={},this.on(a.LOAD_PERSISTED_LAYER_STATES,this.J),this.on(a.RECORD_LAYER_DECISION,this.Z),this.on(a.TRACK_DECISION_EVENT,this.ee),this.on(a.ACTION_EXECUTED,this.te)},getLayerState:function(e,t){if(this.T[e]){var n=this.T[e];if(i.keys(n).length>1&&!t)throw new Error("View Id must be specified when more than one layerState for layer.");return t?i.cloneDeep(i.find(n,{viewId:t})):i.cloneDeep(n[o])}},getLayerStates:function(e){var t=[];for(var n in this.T)i.forEach(this.T[n],(function(n){(i.isUndefined(e)||n.namespace===e)&&t.push(i.cloneDeep(n))}));return t},J:function(e){e.merge||(this.T={}),i.each(e.layerStates,function(e){var t=e.layerId,n=e.viewId||o,r=this.T[t];if(i.isUndefined(r))this.T[t]={},this.T[t][n]=e;else{var a=r[n];(!a||e.decisionTimestamp>(a.decisionTimestamp||0))&&(this.T[t][n]=e)}}.bind(this)),this.emitChange()},te:function(e){var t=e.action.layerId,n=e.action.viewId;if(!this.T[t])return void r.warn("No Campaign registered for action executed",e);var i;this.T[t][n]?i=this.T[t][n]:this.T[t][o]&&(i=this.T[t][o]),i&&(i.actionTriggered=!0,i.actionSessionId=e.sessionId,i.actionActivationId=e.activationId,i.actionTimestamp=e.timestamp),this.emitChange()},Z:function(e){var t={layerId:e.layerId,revision:e.revision,decision:e.decision,decisionSessionId:e.sessionId,decisionActivationId:e.activationId,decisionTimestamp:e.timestamp,decisionEventId:null,actionTriggered:!1,actionSessionId:null,actionActivationId:null,actionTimestamp:null,decisionTicket:e.decisionTicket,decisionTicketTimestamp:e.timestamp,namespace:e.namespace,viewId:e.viewId},n=this.T[e.layerId]||{};e.viewId?(delete n[o],n[e.viewId]=t):(n={},n[o]=t),this.T[e.layerId]=n,this.emitChange()},ee:function(e){var t=e.layerId,n=e.decisionEvent.decisionTicket.viewId||o;return this.T[t]?this.T[t][n]?(this.T[t][n].decisionEventId=e.decisionEvent.decisionId,void this.emitChange()):void r.warn("Not recording decision event: Layer state not found for view",n):void r.warn("Not recording decision event: Campaign not registered",t)}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.V)},V:function(e){i.isEmpty(e.data.layers)||(i.each(e.data.layers,function(e){this.T[e.id]=e}.bind(this)),this.emitChange())},getAll:function(){return i.cloneDeep(i.values(this.T))},getCount:function(){return i.keys(this.T).length},getAllByViewId:function(e){return i.cloneDeep(i.filter(i.values(this.T),(function(t){return i.includes(t.viewIds,e)})))},get:function(e){return i.cloneDeep(this.T[e])},getLayerByExperimentId:function(e){var t=i.values(this.T),n=i.find(t,(function(t){return i.find(t.experiments,{id:e})}));return n},getExperimentByVariationId:function(e){var t,n=i.values(i.cloneDeep(this.T));return i.some(n,(function(n){return i.some(n.experiments,(function(n){return i.find(n.variations,{id:e})&&(t=n),t})),t})),t}}}),(function(e,t,n){var i=n(17);e.exports={initialize:function(){this.T={logs:[]},this.on(i.LOG,this.ne)},getLogs:function(){return this.T.logs},ne:function(e){this.T.logs.push(e),this.emitChange()},f:function(){return this.T.logs.slice()}}}),(function(e,t,n){var i=n(8),r=n(17),a=1e3;e.exports={initialize:function(){this.T={},this.on(r.SET_PENDING_EVENT,this.re),this.on(r.REMOVE_PENDING_EVENT,this.ae),this.on(r.LOAD_PENDING_EVENTS,this.oe)},getEvents:function(){return this.T},re:function(e){i.keys(this.T).length>=a&&this.se();var t=e.id,n=e.retryCount;this.T[t]&&this.T[t].retryCount===n||(this.T[t]={id:t,timeStamp:e.timeStamp,data:e.data,retryCount:n},this.emitChange())},ae:function(e){delete this.T[e.id],this.emitChange()},oe:function(e){this.T=e.events,this.se(),this.emitChange()},se:function(){for(var e=i.sortBy(this.T,"timeStamp"),t=0;t<=e.length-a;t++)delete this.T[e[t].id];this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17),a=n(12);e.exports={initialize:function(){this.T={},this.T[a.PerformanceData.performance_marks]={},this.T[a.PerformanceData.resource_timing]=[],this.on(r.SET_PERFORMANCE_DATA,this.ue),this.on(r.SET_PERFORMANCE_MARKS_DATA,this.ce),this.on(r.SET_RESOURCE_TIMING_DATA,this.le)},ue:function(e){i.extend(this.T,e.data),this.emitChange()},ce:function(e){i.isUndefined(this.T[a.PerformanceData.performance_marks][e.name])&&(this.T[a.PerformanceData.performance_marks][e.name]=[]),this.T[a.PerformanceData.performance_marks][e.name].push(e.data),this.emitChange()},le:function(e){this.T[a.PerformanceData.resource_timing].push(e.data),this.emitChange()},get:function(){return i.cloneDeep(this.T)},getMarks:function(){return i.cloneDeep(this.T[a.PerformanceData.performance_marks])}}}),(function(e,t,n){var i=n(17),r=n(12),a=n(8),o=n(11);e.exports={initialize:function(){this.T=a.mapValues(r.PluginTypes,(function(){return{}})),this.on(i.REGISTER_PLUGIN,this.de)},de:function(e){var t=e.type,n=e.name,i=e.plugin;if(!(t&&n&&i))throw new Error("Missing information needed to register plugins: "+t+":"+n);if(!this.T[t])throw new Error("Invalid plugin type specified: "+t);this.T[t][n]=i,o.debug("Plugin Store: Registering Plugin :",e)},getAllPlugins:function(e){if(e){if(this.T[e])return this.T[e];throw new Error("Invalid plugin type: "+e)}return this.T},getPlugin:function(e,t){if(!t||!e)throw new Error("Missing plugin parameters");var n=this.getAllPlugins(e);return n[t]||null}}}),(function(e,t,n){var i=n(17);e.exports={initialize:function(){this.T={},this.on(i.SET_VISITOR_ATTRIBUTE_PENDING,this.fe)},getPendingAttributeValue:function(e){if(this.T[e])return this.T[e].pending},fe:function(e){this.T[e.key]={pending:e.pending},this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={inRumSample:!1,src:null,RumHost:null,data:{}},this.on(r.SET_RUM_DATA,this.ue)},ue:function(e){i.merge(this.T,e),this.emitChange()},getSampleRum:function(){return this.T.inRumSample},getRumHost:function(){return this.T.RumHost},getRumData:function(){return i.cloneDeep(this.T.data)},getScriptSrc:function(){return this.T.src}}}),(function(e,t,n){var i=n(17);e.exports={initialize:function(){this.T={initialized:!1,natives:{}},this.on(i.SANDBOXED_FUNCTIONS_ADDED,this.ge)},ge:function(e){if(!e.sandboxedFunctions)throw new Error("No sandboxedFunctions found in payload");this.T.natives=e.sandboxedFunctions,this.T.initialized=!0,this.emitChange()},getAll:function(){return this.T.natives},get:function(e){if(!e)throw new Error("Missing name parameter");return this.T.natives[e]||null},isInitialized:function(){return this.T.initialized}}}),(function(e,t,n){var i=n(8),r=n(17),a=n(14),o=n(44),s=18e5;e.exports={initialize:function(){this.T={lastSessionTimestamp:0,sessionId:null},this.on(r.REFRESH_SESSION,this.pe),this.on(r.LOAD_SESSION_STATE,this.ve)},getState:function(){return i.cloneDeep(this.T)},getSessionId:function(){return this.T.sessionId},ve:function(e){this.T.sessionId=e.sessionId,this.T.lastSessionTimestamp=e.lastSessionTimestamp,this.emitChange()},pe:function(){var e=a.now(),t=this.T.lastSessionTimestamp;(!this.T.sessionId||e-t>s)&&(this.T.sessionId=o.generate()),this.T.lastSessionTimestamp=e,this.emitChange()}}}),(function(e,t){t.generate=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}}),(function(e,t,n){var i=n(8),r=n(11),a=n(17),o={globalTags:{},viewStates:{}};e.exports={initialize:function(){this.T=i.cloneDeep(o),this.on(a.REGISTER_VIEWS,this.he),this.on(a.SET_VIEW_ACTIVE_STATE,this._e),this.on(a.UPDATE_PARSED_VIEW_METADATA,this.Ee),this.on(a.UPDATE_USER_SUPPLIED_METADATA,this.me),this.on(a.TRACK_VIEW_ACTIVATED_EVENT,this.Ie),this.on(a.SET_GLOBAL_TAGS,this.ye),this.on(a.ACTIVATE,this.Se)},getAll:function(){var e={};for(var t in this.T.viewStates)e[t]=this.getViewState(t);return e},getViewState:function(e){var t=i.cloneDeep(this.T.viewStates[e]),n=this.T.globalTags;return t.metadata=i.extend({},t.parsedMetadata,n,t.userSuppliedMetadata),t},getActiveViewTags:function(){var e=this.getActiveViewStates(),t=i.map(e,(function(e){return e.metadata})),n=[{}].concat(t);return i.extend.apply(i,n)},getActivationEventId:function(e){return this.T.viewStates[e]?this.T.viewStates[e].activationEventId:null},getActiveViewStates:function(){return i.reduce(this.T.viewStates,function(e,t,n){return this.isViewActive(n)&&e.push(this.getViewState(n)),e}.bind(this),[])},isViewActive:function(e){var t=this.T.viewStates[e];return t||r.warn("No Page registered with id",e),!!t.isActive},getGlobalTags:function(){return i.cloneDeep(this.T.globalTags)},Se:function(){var e=i.cloneDeep(o);i.isEmpty(this.T.globalTags)||(e.globalTags=this.T.globalTags),this.T=e,this.emitChange()},he:function(e){i.each(e.views,function(e){var t=e.id;this.T.viewStates[t]={id:t,isActive:!1,activatedTimestamp:null,activationEventId:null,parsedMetadata:{},userSuppliedMetadata:{}}}.bind(this)),this.emitChange()},_e:function(e){var t=e.view.id;if(!this.T.viewStates[t])throw new Error("No view exists with id "+t);this.T.viewStates[t].isActive=e.isActive,e.isActive?this.T.viewStates[t].activatedTimestamp=e.timestamp:(this.T.viewStates[t].parsedMetadata={},this.T.viewStates[t].userSuppliedMetadata={}),this.emitChange()},Ee:function(e){var t=e.viewId;if(!this.T.viewStates[t])throw new Error("No view exists with id "+t);i.merge(this.T.viewStates[t].parsedMetadata,e.metadata),this.emitChange()},me:function(e){var t=e.viewId;if(!this.T.viewStates[t])throw new Error("No view exists with id "+t);i.merge(this.T.viewStates[t].userSuppliedMetadata,e.metadata),this.emitChange()},Ie:function(e){var t=e.viewId;this.T.viewStates[t]&&(this.T.viewStates[t].activationEventId=e.eventData.eventId,this.emitChange())},ye:function(e){i.extend(this.T.globalTags,e),this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.V)},getAll:function(){return i.cloneDeep(i.values(this.T))},get:function(e){return i.cloneDeep(this.T[e])},getByApiName:function(e){return i.cloneDeep(i.find(i.values(this.T),{apiName:e}))},V:function(e){i.isEmpty(e.data.views)||(i.each(e.data.views,function(e){this.T[e.id]=e}.bind(this)),this.emitChange())}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={profile:{},metadata:{}},this.on(r.SET_VISITOR_ATTRIBUTES,this.Ae),this.on(r.LOAD_EXISTING_VISITOR_PROFILE,this.Te)},getVisitorProfile:function(){return this.T.profile},getVisitorProfileMetadata:function(){return this.T.metadata},getAttribute:function(e,t){var n=this.T.profile;return t&&(n=n[t]||{}),i.cloneDeep(n[e])},getAttributeMetadata:function(e){return i.cloneDeep(this.T.metadata[e])},Te:function(e){this.T.profile=e.profile,this.T.metadata=e.metadata,this.emitChange()},Ae:function(e){var t,n;i.each(e.attributes,function(e){t=this.T.profile,n=this.T.metadata,e.type&&(t=this.T.profile[e.type]=this.T.profile[e.type]||{}),t[e.key]=e.value,e.metadata&&i.forOwn(e.metadata,function(t,i){e.type&&(n=this.T.metadata[e.type]=this.T.metadata[e.type]||{}),n[e.key]=n[e.key]||{},n[e.key][i]=t}.bind(this))}.bind(this)),this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={},this.on(r.DATA_LOADED,this.we)},getCustomBehavioralAttributes:function(){return i.filter(this.T,(function(e){return!!e.rule_json}))},getVisitorAttribute:function(e){var t=i.values(this.T);if(e.datasourceId&&(t=i.filter(t,{dcp_datasource_id:String(e.datasourceId)})),e.attributeName&&e.attributeId)throw new Error("Must not specify both attribute name and attribute ID");if(e.attributeId){var n=this.T[e.attributeId];if(!n)throw new Error("Unrecognized attribute ID: "+e.attributeId);return n}if(e.attributeName){var r=i.filter(t,{name:e.attributeName});if(!r.length)throw new Error("Unrecognized attribute name: "+e.attributeName);if(r.length>1)throw new Error("Too many attributes with name: "+e.attributeName);return r[0]}throw new Error("Must specify attribute name or attribute ID")},we:function(e){i.isEmpty(e.data.visitorAttributes)||(i.each(e.data.visitorAttributes,function(e){this.T[e.id]=e}.bind(this)),this.emitChange())}}}),(function(e,t,n){var i=(n(8),n(17));n(50).Event;e.exports={initialize:function(){this.T={events:[],foreignEvents:{},foreignEventQueues:{}},this.on(i.SET_VISITOR_EVENTS,this.V),this.on(i.SET_FOREIGN_VISITOR_EVENTS,this.De),this.on(i.SET_FOREIGN_VISITOR_EVENT_QUEUE,this.be)},getEvents:function(){return this.T.events},getForeignEvents:function(){return this.T.foreignEvents},getForeignEventQueues:function(){return this.T.foreignEventQueues},V:function(e){this.T.events=e,this.emitChange()},De:function(e){this.T.foreignEvents[e.key]=e.value},be:function(e){this.T.foreignEventQueues[e.key]=e.value}}}),(function(e,t,n){function i(e,t,n,i,r){this[o.FIELDS.NAME]=e,this[o.FIELDS.TYPE]=t,a.isString(n)&&n.trim().length>0&&(this[o.FIELDS.CATEGORY]=n),i&&a.keys(i).length>0&&(this[o.FIELDS.OPTIONS]=i),a.isUndefined(r)||(this[o.FIELDS.REVENUE]=r)}function r(e,t,n){this.eventBase=e,this[o.FIELDS.TIME]=t,a.isUndefined(n)||(this[o.FIELDS.SESSION_ID]=n)}var a=n(8),o=n(51),s=n(52),u=n(54).getFieldValue;t.EventBase=i,i.prototype.digest=function(){var e=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)},t=[];if(t.push(e(o.FIELDS.NAME,this[o.FIELDS.NAME])),t.push(e(o.FIELDS.TYPE,this[o.FIELDS.TYPE])),this[o.FIELDS.CATEGORY]&&t.push(e(o.FIELDS.CATEGORY,this[o.FIELDS.CATEGORY])),this[o.FIELDS.REVENUE]&&t.push(e(o.FIELDS.REVENUE,this[o.FIELDS.REVENUE])),!this[o.FIELDS.OPTIONS])return t.join("&");var n=this[o.FIELDS.OPTIONS]||{},i=a.filter(a.keys(n),(function(e){return n.hasOwnProperty(e)}));i=i.sort();for(var r=0;r<i.length;r++)t.push(e(i[r],n[i[r]]));return t.join("&")},i.prototype.hash=function(){return this.hash_?this.hash_:(this.hash_=s.hashToHex(s.toByteString(this.digest()),s.Seed.BEHAVIOR_EVENT),this.hash_)},i.prototype.setHash=function(e){this.hash_=e},i.prototype.reHash=function(){this.hash_=null,this.hash()},i.prototype.equals=function(e){if(this.hash()!==e.hash())return!1;if(this[o.FIELDS.NAME]!==e[o.FIELDS.NAME]||this[o.FIELDS.TYPE]!==e[o.FIELDS.TYPE]||this[o.FIELDS.CATEGORY]!==e[o.FIELDS.CATEGORY]||this[o.FIELDS.REVENUE]!==e[o.FIELDS.REVENUE])return!1;if(!this[o.FIELDS.OPTIONS]&&!e[o.FIELDS.OPTIONS])return!0;var t=this[o.FIELDS.OPTIONS]||{},n=e[o.FIELDS.OPTIONS]||{},i=a.filter(a.keys(t),(function(e){return t.hasOwnProperty(e)})),r=a.filter(a.keys(n),(function(e){return n.hasOwnProperty(e)}));if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++){var u=i[s];if(!n.hasOwnProperty(u)||t[u]!==n[u])return!1}return!0},i.prototype.getValueOrDefault=function(e,t){var n=u(this,e);return a.isUndefined(n)?t:n},i.prototype.setFieldValue=function(e,t){e!==o.FIELDS.NAME&&e!==o.FIELDS.TYPE&&e!==o.FIELDS.CATEGORY&&e!==o.FIELDS.REVENUE&&e!==o.FIELDS.OPTIONS||(this[e]=t,this.reHash())},t.Event=r,r.prototype.getValueOrDefault=function(e,t){if(0===e.length)return this;var n={};n[o.FIELDS.TIME]=this[o.FIELDS.TIME],n[o.FIELDS.SESSION_ID]=this[o.FIELDS.SESSION_ID];var i=u(n,e);return a.isUndefined(i)?this.eventBase.getValueOrDefault(e,t):i},r.prototype.setFieldValue=function(e,t){e===o.FIELDS.TIME||e===o.FIELDS.SESSION_ID?this[e]=t:this.eventBase.setFieldValue(e,t)};var c={n:"name",y:"type",c:"category",r:"revenue",s:"session_id",o:"tags"};r.prototype.readableEvent=function(){var e,t,n=function(e){return a.isString(e)?'"'+e+'"':e},i=this,r=[];a.each([o.FIELDS.NAME,o.FIELDS.TYPE,o.FIELDS.CATEGORY,o.FIELDS.REVENUE,o.FIELDS.SESSION_ID],(function(o){e=c[o],t=i.getValueOrDefault([o]),a.isUndefined(t)||r.push(e+": "+n(t))}));var s=[];if(e=c[o.FIELDS.OPTIONS],t=i.getValueOrDefault([o.FIELDS.OPTIONS]),a.isUndefined(t)||(a.each(t,(function(e,t){s.push(t+": "+String(n(e)))})),r.push(e+": {\n\t\t"+s.join(",\n\t\t")+"\n\t}")),t=i.getValueOrDefault([o.FIELDS.TIME]),a.isNumber(t)&&(t=n(new Date(t).toString())),!a.isUndefined(t)){var u="timestamp";r.push(u+": "+t)}return"{\n\t"+r.join(",\n\t")+"\n}"},r.prototype.toObject=function(e){var t,n,i={},r=this;a.each([o.FIELDS.NAME,o.FIELDS.TYPE,o.FIELDS.CATEGORY,o.FIELDS.REVENUE,o.FIELDS.OPTIONS],(function(e){t=c[e],n=r.getValueOrDefault([e],e===o.FIELDS.OPTIONS?{}:void 0),a.isUndefined(n)||(i[t]=n)}));var s=c[o.FIELDS.OPTIONS],u=c[o.FIELDS.REVENUE];if(e&&e.revenueAsTag&&i[u]&&(i[s]=i[s]||{},i[s][u]=i[u],delete i[u]),n=r.getValueOrDefault([o.FIELDS.TIME]),a.isNumber(n))if(e&&e.timeAsTimestamp){var l="timestamp";i[l]=new Date(n)}else{var d="time";i[d]=n}return i}}),(function(e,t){t.FIELDS={NAME:"n",
TIME:"t",TYPE:"y",CATEGORY:"c",REVENUE:"r",SESSION_ID:"s",OPTIONS:"o"},t.FIELDS_V0_2={name:t.FIELDS.NAME,time:t.FIELDS.TIME,type:t.FIELDS.TYPE,category:t.FIELDS.CATEGORY,tags:t.FIELDS.OPTIONS}}),(function(e,t,n){var i=n(53).v3,r={IGNORING:0,BUCKETING:1,FALLBACK:2,HOLDBACK:3,BEHAVIOR_EVENT:2716770798},a=Math.pow(2,32),o=function(e,t,n){return Math.floor(u(e,t)*n)},s=function(e,t){var n=i(e,t);return(n>>>16).toString(16)+(65535&n).toString(16)},u=function(e,t){var n=i(e,t);return(n>>>0)/a},c=function(e){var t=String.fromCharCode;return e.replace(/[\S\s]/gi,(function(e){e=e.charCodeAt(0);var n=t(255&e);return e>255&&(n=t(e>>>8&255)+n),e>65535&&(n=t(e>>>16)+n),n}))};e.exports={Seed:r,hashToHex:s,hashToInt:o,hashToReal:u,toByteString:c}}),(function(e,t,n){!(function(){function t(e,t){for(var n,i=e.length,r=t^i,a=0;i>=4;)n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^n,i-=4,++a;switch(i){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r^=255&e.charCodeAt(a),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>15,r>>>0}function n(e,t){var n,i,r,a,o,s,u,c;for(n=3&e.length,i=e.length-n,r=t,o=3432918353,s=461845907,c=0;c<i;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,r^=u,r=r<<13|r>>>19,a=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&a)+27492+(((a>>>16)+58964&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:u^=255&e.charCodeAt(c),u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,r^=u}return r^=e.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0}var i=n;i.v2=t,i.v3=n;e.exports=i})()}),(function(e,t,n){var i=n(8);t.getFieldValue=function(e,t){if(i.isArray(t)){for(var n=e,r=0;r<t.length;r++){var a=t[r];if(!i.isObject(n)||!n.hasOwnProperty(a))return;n=n[a]}return n}}}),(function(e,t,n){var i=n(17);e.exports={initialize:function(){this.T={baseMap:{},eventQueue:[],lastEvent:null,initialized:!1,cleared:!1},this.on(i.UPDATE_BEHAVIOR_STORE,this.Oe)},getBaseMap:function(){return this.T.baseMap},getEventQueue:function(){return this.T.eventQueue},getLastEvent:function(){return this.T.lastEvent},getCleared:function(){return this.T.cleared},getInitialized:function(){return this.T.initialized},Oe:function(e){this.T[e.key]=e.value}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={randomId:null,UUID:null,variationIdMap:{}},this.on(r.SET_VISITOR_ID,this.V),this.on(r.UPDATE_VARIATION_ID_MAP,this.Re),this.on(r.MERGE_VARIATION_ID_MAP,this.Le)},getBucketingId:function(){return this.getUUID()||this.getRandomId()},getRandomId:function(){return this.T.randomId},getUUID:function(){return this.T.UUID},getVariationIdMap:function(){return i.cloneDeep(this.T.variationIdMap)},Re:function(e){var t=this.T.variationIdMap,n=t[e.layerId]||{};n[e.experimentId]!==e.variationId&&(n[e.experimentId]=e.variationId,this.T.variationIdMap[e.layerId]=n,this.emitChange())},Le:function(e){var t=this.getVariationIdMap(),n=e.variationIdMap;i.merge(n,t),this.T.variationIdMap=n,this.emitChange()},V:function(e){i.extend(this.T,e),this.emitChange()}}}),(function(e,t,n){var i=n(8),r=n(17);e.exports={initialize:function(){this.T={frames:[],defaultFrame:null,messages:[],subscribers:[],canonicalOrigins:null,disabled:!1},this.on(r.XDOMAIN_SET_DEFAULT_FRAME,this.Ne),this.on(r.XDOMAIN_ADD_FRAME,this.Pe),this.on(r.XDOMAIN_SET_MESSAGE,this.Ce),this.on(r.XDOMAIN_ADD_SUBSCRIBER,this.Ve),this.on(r.XDOMAIN_SET_CANONICAL_ORIGINS,this.ke),this.on(r.XDOMAIN_SET_DISABLED,this.Fe)},getMessages:function(){return i.cloneDeep(this.T.messages)},getNextMessageId:function(){return this.T.messages.length},getMessageById:function(e){return this.T.messages[e]},getSubscribers:function(){return this.T.subscribers},getFrames:function(){return this.T.frames},getNextFrameId:function(){return this.T.frames.length},getDefaultFrame:function(){return this.T.defaultFrame},getCanonicalOrigins:function(){return i.cloneDeep(this.T.canonicalOrigins)},isDisabled:function(){return this.T.disabled},Ne:function(e){this.T.defaultFrame=e},Pe:function(e){this.T.frames.push(e)},Ce:function(e){this.T.messages[e.messageId]=e.message},Ve:function(e){this.T.subscribers.push(e.subscriber)},ke:function(e){this.T.canonicalOrigins=e.canonicalOrigins},Fe:function(e){this.T.disabled=e.disabled}}}),(function(e,t,n){function i(e){return s[e]||r.LogLevel.ALL}var r=n(12),a=n(11),o=n(18),s={LOG:r.LogLevel.ALL+1};t.onPreAction=function(e,t){var n=a.shouldLog(i(e));if(n){var r="[object]";try{r=o.stringify(t)}catch(e){}r&&r.length>50&&(r=r.substr(0,50)+"..."),a.groupCollapsed("DISPATCH: "+e+" | "+r),a.logAlways("payload: ",t)}},t.onPostAction=function(e,t){a.shouldLog(i(e))&&(a.logAlways("stores:",this.getState()),a.groupEnd())}}),(function(e,t,n){var i=n(8),r=n(17),a=n(5),o=n(60).Promise,s=n(11),u=n(14),c=n(64),l=n(18),d=3;t.isCORSSupported=function(){var e=c.get("XMLHttpRequest");return"withCredentials"in new e},t.request=function(e){return e=i.extend({method:"GET",async:!0},e),new o(function(n,r){if(!t.isCORSSupported())return r("CORS is not supported");var a=c.get("XMLHttpRequest"),o=new a;o.onload=function(){e.success&&e.success(o),n(o)},o.onerror=function(){e.error&&e.error(o),r(o)},i.isObject(e.data)&&(e.data=l.stringify(e.data)),o.open(e.method,e.url,e.async),e.contentType&&o.setRequestHeader("Content-Type",e.contentType),o.send(e.data)})},t.retryableRequest=function(e,n,c,l){if(!n)return o.reject(new Error("No id specified for request."));if(!t.isCORSSupported())return o.reject(new Error("CORS is not supported."));i.isUndefined(l)&&(l=d),i.isUndefined(c)&&(c=0);var f={id:n,timeStamp:u.now(),data:e,retryCount:c};return a.dispatch(r.SET_PENDING_EVENT,f),s.debug("Sending event ",n),t.request(e).then((function(e){return a.dispatch(r.REMOVE_PENDING_EVENT,{id:n}),e}),(function(e){throw f.retryCount>=l?(a.dispatch(r.REMOVE_PENDING_EVENT,{id:n}),s.warn("Event ",f," could not be sent after ",l," attempts.")):(f.retryCount++,a.dispatch(r.SET_PENDING_EVENT,f),s.debug("Event ",f," failed to send, with error ",e," It will be retried ",l-c," times.")),e}))},t.sendBeacon=t.request}),(function(e,t,n){e.exports=n(61)}),(function(e,t,n){(function(t,i){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!(function(t,n){e.exports=n()})(this,(function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function a(e){Q=e}function o(e){X=e}function s(){return function(){return t.nextTick(f)}}function u(){return"undefined"!=typeof W?function(){W(f)}:d()}function c(){var e=0,t=new Z(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<K;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}K=0}function g(){try{var e=n(63);return W=e.runOnLoop||e.runOnContext,u()}catch(e){return d()}}function p(e,t){var n=arguments,i=this,r=new this.constructor(h);void 0===r[re]&&k(r);var a=i._state;return a?!(function(){var e=n[a-1];X((function(){return P(a,r,e,i._result)}))})():O(i,r,e,t),r}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return T(n,e),n}function h(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ue.error=e,ue}}function I(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function y(e,t,n){X((function(e){var i=!1,r=I(n,t,(function(n){i||(i=!0,t!==n?T(e,n):D(e,n))}),(function(t){i||(i=!0,b(e,t))}),"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,b(e,r))}),e)}function S(e,t){t._state===oe?D(e,t._result):t._state===se?b(e,t._result):O(t,void 0,(function(t){return T(e,t)}),(function(t){return b(e,t)}))}function A(e,t,n){t.constructor===e.constructor&&n===p&&t.constructor.resolve===v?S(e,t):n===ue?(b(e,ue.error),ue.error=null):void 0===n?D(e,t):r(n)?y(e,t,n):D(e,t)}function T(t,n){t===n?b(t,_()):e(n)?A(t,n,m(n)):D(t,n)}function w(e){e._onerror&&e._onerror(e._result),R(e)}function D(e,t){e._state===ae&&(e._result=t,e._state=oe,0!==e._subscribers.length&&X(R,e))}function b(e,t){e._state===ae&&(e._state=se,e._result=t,X(w,e))}function O(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+oe]=n,r[a+se]=i,0===a&&e._state&&X(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?P(n,i,r,a):r(a);e._subscribers.length=0}}function L(){this.error=null}function N(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function P(e,t,n,i){var a=r(n),o=void 0,s=void 0,u=void 0,c=void 0;if(a){if(o=N(n,i),o===ce?(c=!0,s=o.error,o.error=null):u=!0,t===o)return void b(t,E())}else o=i,u=!0;t._state!==ae||(a&&u?T(t,o):c?b(t,s):e===oe?D(t,o):e===se&&b(t,o))}function C(e,t){try{t((function(t){T(e,t)}),(function(t){b(e,t)}))}catch(t){b(e,t)}}function V(){return le++}function k(e){e[re]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function F(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[re]||k(this.promise),q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&D(this.promise,this._result))):b(this.promise,x())}function x(){return new Error("Array Methods must be provided an Array")}function M(e){return new F(this,e).promise}function U(e){var t=this;return new t(q(e)?function(n,i){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function G(e){var t=this,n=new t(h);return b(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[re]=V(),this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&B(),this instanceof z?C(this,e):j())}function H(){var e=void 0;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=z}var Y=void 0;Y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var q=Y,K=0,W=void 0,Q=void 0,X=function(e,t){ne[K]=e,ne[K+1]=t,K+=2,2===K&&(Q?Q(f):ie())},$="undefined"!=typeof window?window:void 0,J=$||{},Z=J.MutationObserver||J.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),ie=void 0;ie=ee?s():Z?c():te?l():void 0===$?g():d();var re=Math.random().toString(36).substring(16),ae=void 0,oe=1,se=2,ue=new L,ce=new L,le=0;return F.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ae&&n<e;n++)this._eachEntry(t[n],n)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===v){var r=m(e);if(r===p&&e._state!==ae)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===z){var a=new n(h);A(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},F.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ae&&(this._remaining--,e===se?b(i,n):this._result[t]=n),0===this._remaining&&D(i,this._result)},F.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,(function(e){return n._settledAt(oe,t,e)}),(function(e){return n._settledAt(se,t,e)}))},z.all=M,z.race=U,z.resolve=v,z.reject=G,z._setScheduler=a,z._setAsap=o,z._asap=X,z.prototype={constructor:z,then:p,catch:function(e){return this.then(null,e)}},z.polyfill=H,z.Promise=z,z}))}).call(t,n(62),(function(){return this})())}),(function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){v&&g&&(v=!1,g.length?p=g.concat(p):h=-1,p.length&&s())}function s(){if(!v){var e=r(o);v=!0;for(var t=p.length;t;){for(g=p,p=[];++h<t;)g&&g[h].run();h=-1,t=p.length}g=null,v=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,f=e.exports={};!(function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}})();var g,p=[],v=!1,h=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}}),(function(e,t){}),(function(e,t,n){var i=n(8),r=n(14),a=n(12),o=n(65),s=n(5),u=n(17),c=n(11),l=n(19),d=l.get("stores/sandbox"),f=n(16);t.shouldSandbox=function(){return!1},t.get=function(e){if(!e)throw new Error("Name is required");if(t.shouldSandbox()){d.isInitialized()||g();var n=d.get(e);if(n)return n}return f.getGlobal(e)};var g=function(){try{var e="optimizely_"+r.now(),t=o.createElement("iframe");t.name=e,t.style.display="none",o.appendToHead(t);var n=t.contentWindow,l=t.contentDocument;l.write("<script></scr'+'ipt>"),l.close();var d=i.mapValues(a.SandboxedFunctions,(function(e){return n[e]}));s.dispatch(u.SANDBOXED_FUNCTIONS_ADDED,{sandboxedFunctions:d}),t.parentNode.removeChild(t)}catch(e){c.warn("Unable to create a sandbox: ",e)}}}),(function(e,t){function n(){return"loading"===t.getReadyState()}t.getCookieString=function(){return document.cookie||""},t.setCookie=function(e){document.cookie=e},t.querySelector=function(e){return document.querySelector(e)},t.querySelectorAll=function(e){return document.querySelectorAll(e)},t.createElement=function(e){return document.createElement(e)},t.isReady=function(){return"interactive"===document.readyState||"complete"===document.readyState},t.addReadyHandler=function(e){return document.addEventListener("DOMContentLoaded",e),function(){t.removeReadyHandler(e)}},t.removeReadyHandler=function(e){return function(){document.removeEventListener("DOMContentLoaded",e)}},t.getReferrer=function(){return document.referrer},t.getReadyState=function(){return document.readyState},t.write=function(e){if(!n())throw new Error("Aborting attempt to write to already-loaded document");document.write(e)},t.appendToHead=function(e){return document.head.appendChild(e)},t.addEventListener=function(e,t,n){return document.addEventListener(e,t,n),function(){document.removeEventListener(e,t,n)}},t.getCurrentScript=function(){if(document.currentScript)return document.currentScript}}),(function(e,t,n){function i(){var e=Boolean(_.result(SLAVE_CLIENT.optimizely,"initialized"));y.dispatch(m.LOAD_DIRECTIVE,{alreadyInitialized:e})}function r(){var e=D.getUserAgent()||"";if(!_.isString(e))return void E.warn("Directive / userAgent not a string");e=e.toLowerCase();var t=["googlebot","yahoo! slurp","bingbot","bingpreview","msnbot","keynote","ktxn","khte","gomezagent","alertsite","yottaamonitor","pingdom.com_bot","aihitbot","baiduspider","adsbot-google","mediapartners-google","applebot","catchpoint","phantomjs","moatbot","facebookexternalhit"],n=function(t){if(_.includes(e,t))return E.warn("Directive / Matches bot:",t),!0};_.some(t,n)&&(E.log("Directive / Disabling tracking"),y.dispatch(m.LOAD_DIRECTIVE,{trackingDisabled:!0}))}function a(){var e=S.get(A.COOKIES.OPT_OUT),n=O.getQueryParamValue(R.OPT_OUT);e?n===e||"true"!==n&&"false"!==n?y.dispatch(m.LOAD_DIRECTIVE,{shouldOptOut:"true"===e}):t.setOptOut("true"===n):"true"===n&&t.setOptOut(!0)}function o(){var e=!1,t=[R.AB_PREVIEW,R.DISABLE];t.push(R.EDITOR);for(var n=0;n<t.length;n++)if("true"===O.getQueryParamValue(t[n])){E.warn("Directive / Not activating because "+t[n]+" is set."),e=!0;break}y.dispatch(m.LOAD_DIRECTIVE,{disabled:e})}function s(){y.dispatch(m.LOAD_DIRECTIVE,{isPreview:!1})}function u(){var e=O.getQueryParamValue(R.LEGACY_PREVIEW);e&&E.log("Directive / Is legacy preview mode"),y.dispatch(m.LOAD_DIRECTIVE,{isLegacyPreview:!!e})}function c(){y.dispatch(m.LOAD_DIRECTIVE,{isEditor:!1})}function l(){E.log("Directive / Is Slave mode"),y.dispatch(m.LOAD_DIRECTIVE,{isSlave:!0})}function d(){var e=D.getGlobal("optlyDesktop"),t=!(!e||_.isUndefined(e.p13nInner));t&&E.log("Directive / Is running in desktop app editor"),y.dispatch(m.LOAD_DIRECTIVE,{isRunningInDesktopApp:t})}function f(){var e="true"===O.getQueryParamValue(R.EDITOR_V2);e&&E.log("Directive / Is running in editor"),y.dispatch(m.LOAD_DIRECTIVE,{isRunningInV2Editor:e})}function g(){var e=S.get(A.COOKIES.TOKEN)||null,t=O.getQueryParamValue(R.TOKEN)||e;y.dispatch(m.LOAD_DIRECTIVE,{projectToken:t})}function p(){var e=S.get(A.COOKIES.PREVIEW),t=[],n=O.getQueryParamValue(R.FORCE_AUDIENCES);if(n)t=n.split(",");else if(e)try{var i=b.parse(e);t=i.forceAudienceIds}catch(t){var r=new w("Failed to parse previewCookie in registerForceAudienceIds: "+e),a={originalMessage:t.message,userError:!0};I.emitError(r,a)}t.length&&(E.log("Directive / Force Audience IDs:",t),y.dispatch(m.LOAD_DIRECTIVE,{forceAudienceIds:t}))}function v(){var e=S.get(A.COOKIES.PREVIEW),t=[],n=O.getQueryParamValue(R.FORCE_VARIATIONS);if(n)t=n.split(",");else if(e)try{var i=b.parse(e);t=i.forceVariationIds}catch(t){var r=new w("Failed to parse previewCookie in registerForceVariationIds: "+e),a={originalMessage:t.message,userError:!0};I.emitError(r,a)}t.length&&(E.log("Directive / Force Variation IDs:",t),y.dispatch(m.LOAD_DIRECTIVE,{forceVariationIds:t}))}function h(){var e=O.getQueryParamValue(R.FORCE_TRACKING);e&&y.dispatch(m.LOAD_DIRECTIVE,{forceTracking:e})}var _=n(8),E=n(11),m=n(17),I=n(67),y=n(5),S=n(69),A=n(12),T=n(2),w=t.JSONParseError=T("JSONParseError"),D=n(16),b=n(18),O=n(70),R={AB_PREVIEW:"optimizely_show_preview",DISABLE:"optimizely_disable",EDITOR:"optimizely_editor",EDITOR_V2:"optimizely_p13n",FORCE_AUDIENCES:"optimizely_x_audiences",FORCE_VARIATIONS:"optimizely_x",LEGACY_PREVIEW:"optimizely_show_preview",OPT_OUT:"optimizely_opt_out",PREVIEW_LAYER_IDS:"optimizely_preview_layer_ids",TOKEN:"optimizely_token",FORCE_TRACKING:"optimizely_force_tracking"};t.populateDirectiveData=function(){r(),i(),a(),o(),c(),s(),u(),l(),d(),f(),g(),p(),v(),h()},t.setOptOut=function(e){e?(E.warn("Directive / Opting out"),S.set(A.COOKIES.OPT_OUT,"true",null,!0)):S.remove(A.COOKIES.OPT_OUT),y.dispatch(m.LOAD_DIRECTIVE,{shouldOptOut:e})}}),(function(e,t,n){var i=n(68);t.emitError=function(e,t,n){var r=!0;i.emit({type:"error",name:e.name||"Error",data:{error:e,metadata:t}},n||!1,r)},t.emitInternalError=function(e,n){t.emitError(e,n,!0)},t.emitAnalyticsEvent=function(e,t){var n={type:"analytics",name:"trackEvent",data:e};i.emit(n,t)}}),(function(e,t,n){var i=n(8),r=n(44),a=n(5),o=n(17),s=n(19),u=n(11),c=n(67),l=s.get("stores/event_emitter");t.on=function(e){return e.token||(e.token=r.generate()),a.dispatch(o.ADD_EMITTER_HANDLER,e),e.token},t.off=function(e){a.dispatch(o.REMOVE_EMITTER_HANDLER,{token:e})},t.emit=function(e,t,n){var r=l.getHandlers(e,t);i.each(r,(function(i){try{i.handler.call({$di:s},e)}catch(r){u.warn("Error in event emitter handler",e,r),!n&&i.emitErrors&&c.emitError(r,null,t)}}))}}),(function(e,t,n){function i(e){try{return decodeURIComponent(e)}catch(t){return e}}function r(e,n){n!==!1&&(n=!0);for(var i,r,a=e.hostname.split("."),s=[],u=null,c=a.length-1;c>=0;c--)if(s.unshift(a[c]),i=s.join("."),!o.includes(h,i)){r={domain:n?"."+i:i};try{t.set(_,Math.random().toString(),r),t.remove(_,r),u=r.domain;break}catch(e){}}return l.dispatch(d.SET_COOKIE_DOMAIN,u),u}var a=n(2),o=n(8),s=n(14),u=n(65),c=n(16),l=n(5),d=n(17),f=n(19),g=f.get("stores/cookie_options"),p=t.SetError=a("CookieSetError"),v=t.MismatchError=a("CookieMismatchError");t.getAll=function(){var e,t,n,r,a;e=u.getCookieString().split(/\s*;\s*/);var o={};for(n=0;n<e.length;n++)t=e[n],r=t.indexOf("="),r>0&&(a=i(t.substring(0,r)),void 0===o[a]&&(o[a]=i(t.substring(r+1))));return o},t.get=function(e){var n=t.getAll();return n[e]},t.set=function(e,n,i,a){i=i||{},a!==!1&&(a=!0);var l=[];if(o.isUndefined(i.domain)){var d=g.getCurrentDomain();d||(d=r(c.getLocation(),!0)),i.domain=d}if(i.domain&&l.push("domain="+i.domain),o.isUndefined(i.path)&&(i.path="/"),i.path&&l.push("path="+i.path),o.isUndefined(i.expires)){var f=o.isUndefined(i.maxAge)?g.getDefaultAgeInSeconds():i.maxAge;i.expires=new Date(s.now()+1e3*f)}if(o.isUndefined(i.expires)||l.push("expires="+i.expires.toUTCString()),i.secure&&l.push("secure"),l=l.join(";"),u.setCookie(e+"="+encodeURIComponent(n)+";"+l),a){var h=t.get(e);if(h!==n){if(!h)throw new p('Failed to set cookie "'+e+'"');throw new v('Expected "'+n+'" for "'+e+'", got "'+h+'"')}}},t.remove=function(e,n){t.set(e,null,o.extend({},n,{expires:new Date(0)}),!1)};var h=["optimizely.test"],_="optimizelyDomainTestCookie"}),(function(e,t,n){var i=n(16),r=n(15);t.getLanguage=function(){return i.getNavigatorLanguage()},t.getQueryParams=r.getQueryParams,t.getQueryParamValue=r.getQueryParamValue,t.getUrl=function(){return i.getHref()}}),(function(e,t,n){var i=n(65),r=n(11),a=n(59);t.addScriptAsync=function(e,t){var n=i.querySelector("head"),a=i.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,t&&(a.onload=t),n.insertBefore(a,n.firstChild),r.debug("Asynchronously requesting "+e)},t.addScriptSync=function(e,n){try{var o="optimizely_synchronous_script_"+Math.floor(1e5*Math.random());if(e.indexOf('"')!==-1)return void r.error("Blocked attempt to load unsafe script: "+e);if(i.write('<script id="'+o+'" src="'+e+'"></scr'+'ipt>'),!i.querySelector("#"+o))throw new Error("Document.write failed to append script");n&&n()}catch(i){r.debug("Document.write failed for "+e+": "+i.message);var s=function(e){var t=new Function(e.responseText);t(),n&&n()};return a.request({url:e,async:!1,contentType:"text/plain",success:s}).catch((function(i){r.error("Failed to load "+e+" via synchronous XHR: "+i.message),t.addScriptAsync(e,n)}))}}}),(function(e,t,n){var i=n(16),r="optimizelyDataApi";t.registerFunction=function(e,t){var n=i.getGlobal(r);n||(n={},i.setGlobal(r,n)),n[e]||(n[e]=t)},t.getFunction=function(e){return i.getGlobal(r)[e]}}),(function(e,t,n){function i(){var e=null;T.isNumber(e)&&0===ue.getCount()?(z.log("Activating after delay of",e,"ms because no Experiments are running"),N.dispatch(j.SET_RUM_DATA,{data:{activateDfd:!0}}),setTimeout(P.emitActivateEvent,e)):P.emitActivateEvent()}function r(e){me.handleError(e.data.error,e.data.metadata)}function a(){T.isArray(SLAVE_CLIENT.optimizely)&&(SLAVE_CLIENT.optimizely=T.filter(SLAVE_CLIENT.optimizely,(function(e){var t=!0;return!Ee.push(e,t)})))}function o(){var e={get:Ee.get,push:Ee.push},t=SLAVE_CLIENT.optimizely;T.isArray(t)&&T.each(t,(function(t){e.push(t)})),e.data={note:"Obsolete, use optimizely.get('data') instead"},e.state={},SLAVE_CLIENT.optimizely=e}function s(e,t){try{var n=x.parse(t);H.setItem(e,n)}catch(n){var i=new b("Failed to syncRemoteKeyToLocal with value "+t+" (key "+e+")"),r={originalMessage:n.message};C.emitInternalError(i,r)}}function u(e){return T.each(e,(function(e,t){s(t,e)})),e}function c(){var e=le.getAccountId(),t="https://__SUBDOMAIN__cdn.optimizely.com".replace("__SUBDOMAIN__","a"+e+"."),n="/client_storage/a"+e+".html";Y.subscribe(s);var i=Y.fetchAll().then((function(e){var t=_e.getCanonicalOrigins();if(t){var n=Y.getXDomainUserId(e,t);n&&(z.log("Syncing cross-origin visitor randomId:",n),V.persistVisitorId({randomId:n}))}return e})).then(u);return i=i.then(l),L.all([Y.load(t,n),i.then((function(){V.loadForeignData(),P.emitOriginsSyncedEvent(),z.log("Loaded visitor data from foreign origins")})).catch((function(e){z.warn("Ignoring error syncing foreign data:",e.message)}))])}function l(){var e=le.getProjectId(),t=H.getItem("migration");if(t||(t={}),t.projectIds||(t.projectIds=[]),T.includes(t.projectIds,e))return void z.debug("Data for",e,"is already migrated.");z.debug("Migrating data from project storage into account storage"),K.emit({type:X.TYPES.MIGRATE_PROJECT_DATA_START,name:e});var n="https://__SUBDOMAIN__cdn.optimizely.com".replace("__SUBDOMAIN__",e+"."),i="/client_storage/"+e+".html";return Y.loadIframe(n,i).then(Y.fetchAll).then(u).then((function(n){return z.debug("Migrated data from project",e,"storage into account storage"),t.projectIds.push(e),H.setItem("migration",t),K.emit({type:X.TYPES.MIGRATE_PROJECT_DATA_DONE,name:e,data:n}),n}))}function d(e){var t=oe.getVisitorProfile();return V.populateEagerVisitorData(e,t)}function f(e,t,n){e=e||[];var i=se.getAllPlugins(q.PluginTypes.visitorProfileProviders),r=le.getGlobalHoldbackThreshold(),a=oe.getVisitorProfile();V.populateLazyVisitorData(i,a);var o=ve.getBucketingId();if(!o)throw new Error("bucketingId not set");var s,u=oe.getVisitorProfile();if(t){var c=ve.getVariationIdMap();s=c[t.id]}var l;n&&(l=n.id);var d={bucketingId:o,visitorProfile:u,audiences:e,globalHoldback:r,preferredVariationMap:s,viewId:l,layer:t};return M.createTicket(d)}function g(e){var t=ue.getAllByViewId(e.id),n=pe.getForceVariationIds(),i=pe.getForceAudienceIds(),r=T.map(t,k.description).join(", "),a=G.description(e);return z.log("Deciding Campaigns for Page",a,":",r),L.all(T.map(t,T.partial(p,n,i,e))).then((function(){return z.log("All Campaigns for Page",a,"resolved:",r),t}))}function p(e,t,n,i){return new L(function(r,a){try{_(i,e,t,n,(function(a){v(i,e,t,n,a),r(i)}))}catch(e){z.error("Error getting decision for Campaign: "+k.description(i),e),a(e)}})}function v(e,t,n,i,r){var a=y(e,r,t,n);if(a.error)throw a.error;if(!M.isInCohort(a))return void z.log("Not activating Campaign: "+k.description(e)+"; not in the cohort because:",a.reason);var o=!(!t.length&&!n.length);h(e,a,i,o)}function h(e,t,n,i){z.log("Activated Campaign",k.description(e),"on Page",G.description(n));var r=A(e,t,i),a=T.filter(r||[],(function(e){return T.isUndefined(e.viewId)||e.viewId===n.id}));return z.log("Executing actions",a,"for Campaign",k.description(e),"Page",G.description(n)),L.all(T.map(a,(function(e){return F.execute(e).then(T.partial(P.emitActionAppliedEvent,e))}))).then((function(){z.log("All page actions for",t,"applied:",r),P.emitActionsForDecisionAppliedEvent(t,a)})).catch((function(e){z.warn("Error evaluating page actions:",e)}))}function _(e,t,n,i,r){if(t.length||n.length)return void r(f([],void 0,i));var a=k.relatedAudienceIds(e),o=T.reduce(a,(function(e,t){var n=ce.get(t);return n&&e.push(n),e}),[]);I(o,k.getActivationTimeout(e),(function(){var t=f(o,e,i);E(t,o,e),r(t)}))}function E(e,t,n){var i=T.map(e.audienceIds,ce.get.bind(ce)),r=T.filter(t,(function(t){return!T.includes(e.audienceIds,t.id)}));z.log("When deciding Campaign",k.description(n),"visitor is in audiences:",m(i),"and not in audiences:",m(r))}function m(e){var t=[];return T.each(e,(function(e){t.push(e.name,e)})),t}function I(e,t,n){var i={},r=se.getAllPlugins(q.PluginTypes.audienceMatchers);T.each(e,(function(e){var t=W.requiredAudienceFields(e,r);T.each(t,(function(e){i[e]=!0}))}));var a=T.reduce(i,(function(e,t,n){if(T.isUndefined(V.getAttribute(n))){var i=V.getPendingAttributeValue(n);T.isUndefined(i)||e.push(i)}return e}),[]);if(0===a.length)return n();var o=Q.firstToResolve(T.map(a,(function(t){return L.resolve(t).then((function(){var t=oe.getVisitorProfile(),n=T.map(e,(function(e){return W.isInAudience(t,e,r)}));if(T.some(n,T.isUndefined))throw new Error("Some audience is undefined")}))})));L.race([o,new L(function(e,n){setTimeout(n,t)})]).then((function(){z.log("Activating Campaign after pending Audiences resolved",e),n()}),(function(){z.log("Activating Campaign after timeout on Audiences",e),n()}))}function y(e,t,n,i){var r,a=k.description(e);n.length?r=M.getDummyLayerDecision(e,n):(i.length&&(z.log("Applying force audienceIds:",i,"to Campaign",a),t=T.cloneDeep(t),t.audienceIds=i),r=M.decideLayer(e,t)),z.log("Recording decision for Campaign",a,t,"->",r),k.recordLayerDecision(e.id,t,r),r.variationId&&r.experimentId&&(V.updateVariationIdMap(e.id,r.experimentId,r.variationId),V.persistVariationId()),P.emitLayerDecided({layer:e,decisionTicket:t,decision:r});var o=B.trackDecisionEvent(r,t);return o?z.log("Tracked decision event for Campaign",a,o):z.log("Analytics / Not tracking decision event for Campaign",a),r}function S(e){var t=re.getCleanupFns(e);if(t.length>0){for(;t.length>0;)t.shift()();N.dispatch(j.CLEAR_CLEANUP_FN,{lifecycle:e})}}function A(e,t,n){var i=k.description(e),r="NOT applying changes for Campaign";if(!n&&le.isGlobalHoldback())return z.log(r,i,"(visitor is in global holdback)"),null;if(t.isLayerHoldback)return z.log(r,i,"(visitor is in layer holdback)"),null;if(!t.experimentId||!t.variationId)return z.log(r,i,"(visitor is not eligible for any Experiments)"),null;var a=[].concat(de.getLayerActions(e.id)||[],de.getExperimentActions(t.experimentId)||[],de.getExperimentVariationActions(t.experimentId,t.variationId)||[]);return z.log("Got Actions for Campaign:",i,a),a}var T=n(8),w=n(44),D=n(2),b=t.JSONParseError=D("JSONParseError"),O=t.ActivationCodeError=D("ActivationCodeError"),R=t.ProjectJSError=D("ProjectJSError"),L=n(60).Promise,N=n(5),P=n(74),C=n(67),V=n(77),k=n(85),F=n(86),x=n(18),M=n(91),U=n(97),G=n(98),B=n(103),j=n(17),z=n(11),H=n(78).LocalStorage,Y=n(84),q=n(12),K=n(68),W=n(96),Q=n(105),X=n(75),$=n(106),J=n(65),Z=n(69),ee=n(88),te=n(107),ne=n(19),ie=ne.get("stores/layer"),re=ne.get("stores/cleanup"),ae=ne.get("stores/session"),oe=ne.get("stores/visitor"),se=ne.get("stores/plugins"),ue=ne.get("stores/layer_data"),ce=ne.get("stores/audience_data"),le=ne.get("stores/global"),de=ne.get("stores/action_data"),fe=ne.get("stores/view_data"),ge=ne.get("stores/view"),pe=ne.get("stores/directive"),ve=ne.get("stores/visitor_id"),he=ne.get("stores/pending_events"),_e=ne.get("stores/xdomain"),Ee=n(108),me=n(121),Ie=n(122),ye=1e3,Se=1e3,Ae=t;t.initialize=function(e){var n=3e3;if(Ie.initialize(),setTimeout(Ie.send,n),K.on({filter:{type:"error"},handler:r}),N.dispatch(j.DATA_LOADED,{data:e.clientData}),z.log("Initialized with DATA:",e.clientData),a(),pe.isDisabled())return void z.log("Controller / Is disabled");var s,u,l=Z.get(q.COOKIES.REDIRECT);if(l){z.debug("Found redirect data:",l);var d=l.match(/^([^|]+)\|(.*)/);d&&(u=d[1],s=d[2],N.dispatch(j.INITIALIZE_STATE,{effectiveVariationId:u,effectiveReferrer:s}))}var f=le.getProjectJS();if(T.isFunction(f))try{f()}catch(e){z.error("Error while executing projectJS: ",e),C.emitError(new R(e.message),{originalError:e})}var g=[].concat(e.plugins||[],le.getPlugins()||[]);T.each(g,(function(e){try{e(U)}catch(e){C.emitInternalError(e)}})),oe.observe(V.persistVisitorProfile),ie.observe(V.persistLayerStates),ae.observe(V.persistSessionState),he.observe(te.persistPendingEvents),K.on({filter:{type:"lifecycle",name:"viewActivated"},handler:t.onViewActivated}),o();var p=te.getPendingEvents();if(p&&(N.dispatch(j.LOAD_PENDING_EVENTS,{events:p}),te.retryPendingEvents(p)),K.on({filter:{type:"lifecycle",name:"activate"},handler:t.activate}),P.emitInitializedEvent(),!pe.shouldActivate())return L.resolve();var v=[],h=c();if(_e.getCanonicalOrigins()){var _=new L(function(e,t){setTimeout((function(){t("Timed out")}),Se)}),E=L.race([h,_]).catch((function(e){z.error("Failed to initialize xDomain storage: ",e)})).then(i);v.push(E)}else v.push(h),i();return L.all(v)},t.activate=function(){try{var e=[];z.log("Activated client"),T.forEach(ge.getActiveViewStates(),(function(e){G.deactivate(fe.get(e.id))})),S(q.Lifecycle.preActivate),N.dispatch(j.ACTIVATE,{activationId:w.generate()}),G.registerViews(fe.getAll()),V.setId(V.getIdFromCookies()),N.dispatch(j.MERGE_VARIATION_ID_MAP,{variationIdMap:V.getVariationIdMap()}),V.persistVariationId(),S(q.Lifecycle.postVisitorProfileLoad),e.push(d(se.getAllPlugins(q.PluginTypes.visitorProfileProviders)).then((function(){z.log("Populated visitor profile")})));var t=f(),n=M.decideGlobal(t);z.log("Made global decision",t,"->",n),N.dispatch(j.RECORD_GLOBAL_DECISION,n);var i=B.trackClientActivation();return i?z.log("Tracked activation event",i):z.log("Not tracking activation event"),Ae.setUpViewActivation(),S(q.Lifecycle.postViewsActivated),S(q.Lifecycle.postActivate),L.all(e).then((function(){K.emit({type:X.TYPES.LIFECYCLE,name:"activateDeferredDone"}),z.log("All immediate effects of activation resolved")}),C.emitError)}catch(e){C.emitError(e)}},Ae.setUpViewActivation=function(){var e=fe.getAll();T.each(e,(function(e){e.activationType?e.activationType===q.ViewActivationTypes.callback?(z.debug("Setting up conditional activation for Page",G.description(e)),Ae.activateViewOnCallback(e)):e.activationType===q.ViewActivationTypes.polling&&(z.debug("Setting up polling activation for Page",G.description(e)),$.pollFor(e.activationCode,null,T.partial(ee.isTimedOut,Date.now())).then((function(){G.activate(e)})).catch((function(t){z.warn("Failed to activate view ",e,t)}))):G.activate(e)}))},Ae.activateViewOnCallback=function(e){var t=function(t){var n=T.extend({},t,{pageName:e.apiName,type:"page"});Ee.push(n)},n={pageId:e.id};Object.defineProperty(n,"isActive",{get:function(){return ge.isViewActive(e.id)}});try{e.activationCode(t,n)}catch(t){var i=new O("("+t.toString()+") in activationCode for "+G.description(e));C.emitError(i,{originalError:t,userError:!0})}},t.onViewActivated=function(e){var t=e.data.view;try{if(!ve.getBucketingId())throw new Error("View activated with no visitorId set");var n,i=g(t).catch(C.emitError),r=function(){G.parseViewTags(t);var e=B.trackViewActivation(t);e?z.log("Tracked activation for Page",G.description(t),e):z.log("Not Tracking activation for Page",G.description(t))};return n=J.isReady()?L.resolve(r()):$.pollFor(J.isReady,ye).then(r),L.all([i,n])}catch(e){C.emitError(e)}}}),(function(e,t,n){function i(e){var t=["type","selector","attributes","value"];return r.extend({},e,{changeSet:r.map(e.changeSet,(function(e){return r.pick(e,t)}))})}var r=n(8),a=n(19),o=a.get("stores/audience_data"),s=n(68),u=n(75),c=n(76);t.emitLayerDecided=function(e){var t=e.decisionTicket?e.decisionTicket.audienceIds:[],n=r.map(t,(function(e){return{id:e,name:o.get(e).name}})),i={type:u.TYPES.LIFECYCLE,name:"layerDecided",data:r.extend(e,{audiences:n})},a=c.translateLayerEventToCampaignEvent(i);s.emit(i),s.emit(a)},t.emitViewActivated=function(e){var t={type:u.TYPES.LIFECYCLE,name:"viewActivated",data:e},n=c.translateViewActivatedToPageActivated(t);s.emit(t),s.emit(n)},t.emitActivateEvent=function(){s.emit({type:u.TYPES.LIFECYCLE,name:"activate"},!0)},t.emitInitializedEvent=function(){var e={type:u.TYPES.LIFECYCLE,name:"initialized"};SLAVE_CLIENT.optimizely&&(SLAVE_CLIENT.optimizely.initialized=!0),s.emit(e)},t.emitOriginsSyncedEvent=function(){var e={type:u.TYPES.LIFECYCLE,name:"originsSynced"};s.emit(e)},t.emitActionAppliedEvent=function(e){var t={type:u.TYPES.ACTION,name:"applied",data:{type:e.type,changes:i(e).changeSet,campaignId:e.layerId,pageId:e.viewId,experimentId:e.experimentId,variationId:e.variationId}};s.emit(t)},t.emitActionsForDecisionAppliedEvent=function(e,t){var n={type:u.TYPES.ACTION,name:"appliedAllForDecision",data:{actions:r.map(t,i),decision:e}};s.emit(n)}}),(function(e,t){t.TYPES={ACTION:"action",ANALYTICS:"analytics",EDITOR:"editor",MIGRATE_PROJECT_DATA_START:"migrate_project_data_start",MIGRATE_PROJECT_DATA_DONE:"migrate_project_data_done",LIFECYCLE:"lifecycle"}}),(function(e,t,n){var i=n(8);t.translateDecisionToCampaignDecision=function(e){return r(i.cloneDeep(e),{layerId:"campaignId",isLayerHoldback:"isCampaignHoldback"})},t.translateLayerEventToCampaignEvent=function(e){var t={};return t.campaign=this.translateLayerToCampaign(e.data.layer),t.decisionTicket=e.data.decisionTicket,t.decision=this.translateDecisionToCampaignDecision(e.data.decision),t.audiences=e.data.audiences,{type:"lifecycle",name:"campaignDecided",data:t}},t.translateLayerToCampaign=function(e){var t=i.cloneDeep(e);t.pageIds=e.viewIds,delete t.viewIds;var n=this;return i.forEach(e.experiments,(function(e,r){i.forEach(e.variations,(function(e,i){var a=t.experiments[r].variations[i].actions;t.experiments[r].variations[i].actions=n.translateActionsToCampaignActions(a)}))})),t},t.translateActionsToCampaignActions=function(e){var t=[];return i.forEach(e,(function(e){t.push({pageId:e.viewId,changes:e.changes})})),t},t.translateViewActivatedToPageActivated=function(e){return{type:"lifecycle",name:"pageActivated",data:this.translateViewEventDataToPageEventData(e.data)}},t.translateViewEventDataToPageEventData=function(e){return{page:i.cloneDeep(e.view)}};var r=function(e,t){var n=i.omit(e,i.keys(t));return i.each(t,(function(t,i){n[t]=e[i]})),n}}),(function(e,t,n){function i(e,t){function n(e,n){var i;t.attributionType&&(i=T.now()),y.dispatch(O.SET_VISITOR_ATTRIBUTES,{attributes:[{key:e,value:n,metadata:{lastModified:i}}]})}if(t.getter){var i,r=t.provides;if(!t.isSticky||I.isUndefined(e[r]))try{var a=S.evaluate(t.getter);I.isFunction(a)&&(a=a((function(){return e[r]}),(function(e){return n(r,e)}))),I.isUndefined(a)||(t.isAsync?(i=a.then((function(e){n(r,e)}),(function(e){N.warn('Failed to evaluate provider for "'+t.provides+'"; error was:',e);
})),y.dispatch(O.SET_VISITOR_ATTRIBUTE_PENDING,{key:r,pending:i})):n(r,a))}catch(e){N.warn('Failed to evaluate getter for provider for "'+t.provides+'"; error was: '+e.message)}return i}}function r(e){var t=c(e),n=A.getItem(t);if(!n){var i=l(e);n=A.getItem(i),s(e,n)}return n}function a(e){var t=[];return I.each(e,(function(e){I.each(e.item,(function(n){n.namespace=e.namespace,t.push(n)}))})),t}function o(e){var t=x.getBucketingId(),n=[],i=t+"\\$\\$([^$]+?)\\$\\$"+e,r=new RegExp(i);return I.each(A.keys(),(function(e){var i=e.match(r);if(i){var a={namespace:i[1],userId:t,item:A.getItem(e)};n.push(a)}})),n}function s(e,t){var n=c(e),i=l(e);A.setItem(n,t),A.removeItem(i)}function u(e,t){try{var i=c(e);try{A.removeItem(l(e)),A.setItem(i,t)}catch(e){throw N.warn("Visitor / Unable to set localStorage key, error was:",e),new Error("Unable to set localStorage")}n(84).setItem(i,t)}catch(e){N.warn("Unable to persist visitor data:",e.message)}}function c(e){var n=x.getBucketingId();if(!n)throw new Error("Visitor bucketingId not set");var i=t.getNamespace();if(!i)throw new Error("Namespace is not set");return[n,i,e].join("$$")}function l(e){var t=x.getBucketingId();if(!t)throw new Error("Cannot get legacy key: visitor bucketingId not set");return[t,e].join("$$")}function d(e,t){if(g(e,c(P.EVENT_QUEUE)))y.dispatch(O.SET_FOREIGN_VISITOR_EVENT_QUEUE,{key:e,value:L.deserialize(t)});else if(g(e,c(P.EVENTS)))y.dispatch(O.SET_FOREIGN_VISITOR_EVENTS,{key:e,value:L.deserialize(t)});else if(g(e,c(P.LAYER_STATES)))y.dispatch(O.LOAD_PERSISTED_LAYER_STATES,{layerStates:t,merge:!0});else if(g(e,c(P.VARIATION_MAP)))y.dispatch(O.MERGE_VARIATION_ID_MAP,{variationIdMap:t});else if(g(e,c(P.VISITOR_PROFILE))){var n=["custom"],i=t;I.each(n,(function(e){var t=k.getPlugin(D.PluginTypes.visitorProfileProviders,e);if(t){if(i.profile&&i.metadata){var n=f(i,e,t.attributionType);if(!I.isEmpty(n)){var r=[];I.forOwn(n.data,(function(t,i){var a=n.metadata[i],o={key:i,value:t,type:e,metadata:a};r.push(o)})),y.dispatch(O.SET_VISITOR_ATTRIBUTES,{attributes:r})}}}else N.debug("Attribute type",e,"not used by any audiences")}))}}function f(e,t,n){var i=M.getAttribute(t),r=M.getAttributeMetadata(t),a=e.profile[t],o=e.metadata[t];if(I.isEmpty(i))return{data:a,metadata:o};var s={};return I.forOwn(a,(function(e,t){var i;r&&r[t]&&(i=r[t].lastModified);var a;o&&o[t]&&(a=o[t].lastModified),(n===D.AttributionTypes.FIRST_TOUCH&&i>=a||n===D.AttributionTypes.LAST_TOUCH&&a>=i||I.isUndefined(i)&&a)&&(s.data=s.data||{},s.data[t]=e,a&&(s.metadata=s.metadata||{},s.metadata[t]=s.metadata[t]||{},s.metadata[t].lastModified=a))})),s}function g(e,t){return e.indexOf(t)>0}function p(){var e=M.getVisitorProfile(),t=M.getVisitorProfileMetadata(),n=k.getAllPlugins(D.PluginTypes.visitorProfileProviders);if(n){var i=I.reduce(n,(function(e,t){return t.provides&&(e[t.provides]=t),e}),{});e=I.omitBy(e,(function(e,t){var n=i[t];return n&&n.isTransient}))}return{profile:e,metadata:t}}function v(e,t){R.initializeStore(e,t)}function h(e){y.dispatch(O.LOAD_PERSISTED_LAYER_STATES,{layerStates:I.filter(e,(function(e){return!!e.decision}))})}function _(e){e=I.extend({lastSessionTimestamp:0,sessionId:null},e),y.dispatch(O.LOAD_SESSION_STATE,e)}function E(){return"oeu"+T.now()+"r"+Math.random()}function m(e){var t,n,i=k.getAllPlugins(D.PluginTypes.visitorProfileProviders),r=I.filter(i,(function(e){return I.isFunction(e.restorer)}));e.profile&&e.metadata?(t=e.profile,n=e.metadata):(t=e,n={}),t=I.reduce(t,(function(e,t,n){var i=t,a=I.find(r,{provides:n});return a&&(i=a.restorer(t)),e[n]=i,e}),{}),y.dispatch(O.LOAD_EXISTING_VISITOR_PROFILE,{profile:t,metadata:n})}var I=n(8),y=n(5),S=n(19),A=n(78).LocalStorage,T=n(14),w=n(69),D=n(12),b=n(60).Promise,O=n(17),R=n(80),L=n(81),N=n(11),P=n(12).VisitorStorageKeys,C=S.get("stores/global"),V=S.get("stores/layer"),k=S.get("stores/plugins"),F=S.get("stores/session"),x=S.get("stores/visitor_id"),M=S.get("stores/visitor"),U=S.get("stores/provider_status");t.getIdFromCookies=function(){var e,t=w.get(D.COOKIES.VISITOR_ID);return e=w.get(D.COOKIES.VISITOR_UUID),t||(t=E()),{randomId:t,UUID:e}},t.setId=function(e){var n=x.getBucketingId();if(y.dispatch(O.SET_VISITOR_ID,e),x.getBucketingId()!==n){t.loadData();try{t.persistVisitorId(e)}catch(e){if(e instanceof w.MismatchError)throw N.error("Visitor / Cookie not set to correct value:",e),new Error("Cookie mismatch error while persisting visitorId");throw e}}t.refreshSession()},t.getVariationIdMap=function(){return r(P.VARIATION_MAP)||{}},t.updateVariationIdMap=function(e,t,n){y.dispatch(O.UPDATE_VARIATION_ID_MAP,{layerId:e,experimentId:t,variationId:n})},t.persistVariationId=function(){var e=x.getVariationIdMap();u(P.VARIATION_MAP,e)},t.refreshSession=function(){y.dispatch(O.REFRESH_SESSION)},t.populateEagerVisitorData=function(e,n){var i=I.filter(e,(function(e){return!e.isLazy}));return t.populateVisitorData(i,n)},t.populateLazyVisitorData=function(e,n){var i=I.filter(e,(function(e){return e.isLazy}));return t.populateVisitorData(i,n)},t.populateVisitorData=function(e,t){t=t||{};var n=I.partial(i,t),r=I(e).filter({isAsync:!0}).map(n).filter().value();return I.forEach(I.filter(e,(function(e){return!e.isAsync})),n),r.length>0?b.all(r):b.resolve()},t.loadData=function(){v(r(P.EVENTS)||[],r(P.EVENT_QUEUE)||[]);var e=o(P.LAYER_STATES);h(a(e)),_(r(P.SESSION_STATE)||{}),m(r(P.VISITOR_PROFILE)||{}),t.loadForeignData(),t.removeLegacySessionStateCookies()},t.persistBehaviorEvents=function(e){u(P.EVENTS,e)},t.persistBehaviorEventQueue=function(e){u(P.EVENT_QUEUE,e)},t.persistLayerStates=function(){var e=V.getLayerStates(t.getNamespace());e=I.map(e,(function(e){return I.omit(e,"namespace")})),u(P.LAYER_STATES,e)},t.persistSessionState=function(){u(P.SESSION_STATE,F.getState())},t.persistVisitorProfile=function(){u(P.VISITOR_PROFILE,p())},t.getUserIdFromKey=function(e,n){var i;return I.includes(e,n)&&I.includes(e,"_")&&I.includes(e,"$$")&&I.includes(e.slice(e.indexOf("$$")),t.getNamespace())&&(i=e.slice(e.indexOf("_")+1,e.indexOf("$$"))),i},t.persistVisitorId=function(e){I.isUndefined(e.UUID)?e.randomId&&w.set(D.COOKIES.VISITOR_ID,e.randomId):null===e.UUID?w.remove(D.COOKIES.VISITOR_UUID):w.set(D.COOKIES.VISITOR_UUID,e.UUID)},t.getAttribute=function(e){return M.getAttribute(e)},t.getPendingAttributeValue=function(e){return U.getPendingAttributeValue(e)},t.loadForeignData=function(){I.each(A.keys(),(function(e){var t=A.getItem(e);t&&d(e,t)}))},t.getNamespace=function(){return C.getNamespace()},t.removeLegacySessionStateCookies=function(){var e=w.getAll();I.forEach(I.keys(e),(function(e){0===e.indexOf(D.COOKIES.SESSION_STATE+"$$")&&w.remove(e)}))}}),(function(e,t,n){var i,r=n(2),a="optimizely_data",o=n(79),s=n(16),u=n(67),c=t.Error=r("StorageError"),l=s.getGlobal("localStorage");l?i=o.create(l,a):(u.emitError(new c("Failed to initialize localStorage")),i=o.mockStorage),t.LocalStorage=i}),(function(e,t,n){function i(e,t){this.xe=e,this.Me=t}var r=n(8),a=n(11),o=n(18),s="$$";i.prototype.Ue=function(e){return[this.Me,e].join(s)},i.prototype.Ge=function(e){return e.replace(this.Me+s,"")},i.prototype.setItem=function(e,t){try{this.xe.setItem(this.Ue(e),o.stringify(t))}catch(t){a.warn("Failed to save",e,"to localStorage:",t)}},i.prototype.removeItem=function(e){this.xe.removeItem(this.Ue(e))},i.prototype.getItem=function(e){try{return o.parse(this.xe.getItem(this.Ue(e)))}catch(e){}return null},i.prototype.keys=function(){var e=r.keys(this.xe);return r.map(e,this.Ge.bind(this))},e.exports={create:function(e,t){return new i(e,t)},mockStorage:{keys:function(){},getItem:function(e){},removeItem:function(e){},setItem:function(e,t){}}}}),(function(e,t,n){var i=n(81);t.initializeStore=i.initialize,t.addEvent=i.addEvent,t.getEvents=i.getEvents,t.usageInBytes=i.usageInBytes}),(function(e,t,n){function i(e){E.dispatch(I.SET_VISITOR_EVENTS,e)}function r(e){E.dispatch(I.UPDATE_BEHAVIOR_STORE,{key:"baseMap",value:e})}function a(e){E.dispatch(I.UPDATE_BEHAVIOR_STORE,{key:"eventQueue",value:e})}function o(e){E.dispatch(I.UPDATE_BEHAVIOR_STORE,{key:"lastEvent",value:e})}function s(e){E.dispatch(I.UPDATE_BEHAVIOR_STORE,{key:"cleared",value:e})}function u(){E.dispatch(I.UPDATE_BEHAVIOR_STORE,{key:"initialized",value:!0})}function c(){return!0}function l(){return L.getEvents()}function d(){return N.getBaseMap()}function f(){return N.getEventQueue()}function g(){return N.getLastEvent()}function p(){return N.getCleared()}function v(){return N.getInitialized()}function h(){return i(l().concat(f())),a([]),l().length>C&&(i(l().slice(-C)),!0)}var _=n(8),E=n(5),m=n(11),I=n(17),y=n(82),S=n(77),A=n(14),T=t,w=n(50).EventBase,D=n(50).Event,b=n(51),O=n(83),R=n(19),L=R.get("stores/visitor_events"),N=R.get("stores/visitor_events_manager"),P={EVENTBASE:"eb",HASH:"h",TIMEBASE:"tb",TIMESTAMPS:"ts",DELTA:"d",INDEX:"i"},C=1e3;t.initialize=function(e,t){if(!c())return void T.Be();if(!v()){T.je(e,t);var n=l();n.length>0&&o(n[n.length-1]);var i=f();i.length>0&&o(i[i.length-1]),u()}},t.addEvent=function(e){if(!c())return void T.Be();m.debug("Behavior store: adding event",e);var t=T.ze(e);o(t),a(f().concat(t)),T.He(f())},t.getEvents=function(){return c()?(f().length>0&&(h()&&O.sessionize(l()),T.Ye(l()),T.He(f())),l()):(T.Be(),[])},T.je=function(e,t){T.qe(e,t)&&(T.Ye(l()),T.He(f())),O.sessionize(l())},T.qe=function(e,t){if(0===e.length&&0===t.length)return i([]),a([]),!1;var n=!1,r=e[0]||t[0];return P.EVENTBASE in r?(i(T.Ke(e)),a(T.Ke(t))):(n=!0,i(T.We(e)),a(T.We(t))),f().length>0&&(h(),n=!0),i(T._updateBaseMapAndMaybeDedupe(l())),T._migrateEventBasesAndUpdateStore()&&(n=!0),n},T.We=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=T.Qe(i);t[n]=new D(r,i[b.FIELDS.TIME])}return t},T._migrateEventBasesAndUpdateStore=function(){var e=!1,t=T.Xe();return O.applyMigrations(t)&&(e=!0,r({}),i(T._updateBaseMapAndMaybeDedupe(l())),a(T._updateBaseMapAndMaybeDedupe(f()))),e},T.$e=function(){return A.now()},T.ze=function(e){var t,n=e.name,i=e.type||"default",r=e.category||y.OTHER,a=e.tags||{};e.revenue&&(t=e.revenue);var o=new w(n,i,r,a,t);o=T.Je(o);var s=T.$e(),u=new D(o,s,-1);return O.updateSessionId(g(),u),u},T._updateBaseMapAndMaybeDedupe=function(e){for(var t=0;t<e.length;t++)e[t].eventBase=T.Je(e[t].eventBase);return e},T.Ye=function(e){var t=T.Ze(e);S.persistBehaviorEvents(t)},T.He=function(e){var t=T.Ze(e);S.persistBehaviorEventQueue(t)},T.Be=function(){p()||(i([]),a([]),T.Ye(l()),T.He(f()),r({}),o(null),s(!0))},T.Je=function(e){var t=e.hash(),n=d(),i=n[t];if(_.isUndefined(i))return n[t]=[e],r(n),e;for(var a=0;a<i.length;a++)if(e.equals(i[a]))return i[a];return i.push(e),r(n),e},T.Xe=function(){var e=[],t=d();for(var n in t)t.hasOwnProperty(n)&&(e=e.concat(t[n]));return e},T.Ze=function(e){for(var t=function(e){var t={};t[b.FIELDS.NAME]=e.getValueOrDefault([b.FIELDS.NAME]),t[b.FIELDS.TYPE]=e.getValueOrDefault([b.FIELDS.TYPE]);var n=e.getValueOrDefault([b.FIELDS.CATEGORY]);_.isUndefined(n)||(t[b.FIELDS.CATEGORY]=n);var i=e.getValueOrDefault([b.FIELDS.REVENUE]);_.isUndefined(i)||(t[b.FIELDS.REVENUE]=i);var r=e.getValueOrDefault([b.FIELDS.OPTIONS]);return _.isUndefined(r)||(t[b.FIELDS.OPTIONS]=r),t},n=P,i=[],r="_idx_",a=0;a<e.length;a++){var o,s,u=e[a],c=u.eventBase;if(c.hasOwnProperty(r)){o=i[c[r]];var l=u[b.FIELDS.TIME]-(o[n.TIMEBASE]||0);s={},s[n.DELTA]=l,s[n.INDEX]=a,o[n.TIMESTAMPS].push(s)}else o={},o[n.EVENTBASE]=t(u),o[n.HASH]=c.hash(),o[n.TIMEBASE]=u[b.FIELDS.TIME],s={},s[n.DELTA]=0,s[n.INDEX]=a,o[n.TIMESTAMPS]=[s],i.push(o),c[r]=i.length-1}for(a=0;a<e.length;a++)delete e[a].eventBase[r];return i},T.Qe=function(e,t){var n=new w(e[b.FIELDS.NAME],e[b.FIELDS.TYPE],e[b.FIELDS.CATEGORY],e[b.FIELDS.OPTIONS],e[b.FIELDS.REVENUE]);return _.isUndefined(t)||n.setHash(t),n},T.Ke=function(e){for(var t=P,n=[],i=0;i<e.length;i++)for(var r=e[i],a=T.Qe(r[t.EVENTBASE],r[t.HASH]),o=r[t.TIMEBASE],s=r[t.TIMESTAMPS],u=0;u<s.length;u++){var c=s[u],l=new D(a,o+c[t.DELTA]),d=c[t.INDEX];n[d]=l}return n},t.deserialize=function(e){return T.Ke(e)},t.mergeAllEvents=function(e){var t=[].concat.apply([],e);return t.sort(O.sessionSortPredicate),O.sessionize(t),t}}),(function(e,t){e.exports={OTHER:"other"}}),(function(e,t,n){function i(e,t){var n=e.getValueOrDefault([s.FIELDS.TIME],0),i=t.getValueOrDefault([s.FIELDS.TIME],0);return Math.abs(n-i)<u}function r(e,t){var n;n=i(e,t)?e.getValueOrDefault([s.FIELDS.SESSION_ID]):t.getValueOrDefault([s.FIELDS.TIME]),t.setFieldValue(s.FIELDS.SESSION_ID,n)}var a=n(50).Event,o=n(50).EventBase,s=n(51),u=18e5;t.updateSessionId=function(e,t){if(!e)return void t.setFieldValue(s.FIELDS.SESSION_ID,t.getValueOrDefault([s.FIELDS.TIME]));var n=e.getValueOrDefault([s.FIELDS.TIME]),i=e.getValueOrDefault([s.FIELDS.SESSION_ID]),u=t.getValueOrDefault([s.FIELDS.TIME]);n="number"!=typeof n?u-36e5:n,i="number"!=typeof i?n:i,e=new a(new o("",""),n,i),r(e,t)},t.sessionize=function(e){var t=e.length;if(0!==t){e[0].setFieldValue(s.FIELDS.SESSION_ID,e[0].getValueOrDefault([s.FIELDS.TIME]));for(var n=1;n<t;n++)r(e[n-1],e[n])}},t.sessionSortPredicate=function(e,t){return e[s.FIELDS.TIME]-t[s.FIELDS.TIME]},t.applyMigrations=function(e){return!1}}),(function(e,t,n){function i(e){var t;if(!o.find(m.getFrames(),{origin:e.origin}))return void E.debug("XDomain","No frame found for origin: "+e.origin);try{t=_.parse(e.data)}catch(t){return void E.debug("XDomain","Ignoring malformed message event:",e)}if("ERROR"===t.type)c.dispatch(l.XDOMAIN_SET_DISABLED,{disabled:!0}),v.emitInternalError(new I("Xdomain Error: "+t.response.toString()));else if("SYNC"===t.type)o.each(m.getSubscribers(),(function(e){e(t.response.key,t.response.value)}));else{var n=m.getMessageById(t.id);if(!n){if(E.warn("XDomain","No stored message found for ID",t.id),o.isNumber(t.id)){var i=m.getNextMessageId();t.id>=i?v.emitInternalError(new I("Message ID is greater than expected maximum ID ("+t.id+">"+i+")")):t.id<0?v.emitInternalError(new I("Message ID is < 0: "+t.id)):v.emitInternalError(new I("No stored message found for message ID: "+t.id))}else v.emitInternalError(new I("Message ID is not a number: "+t.id.toString()));return}n.resolver(t.response),c.dispatch(l.XDOMAIN_SET_MESSAGE,{messageId:t.id,message:o.extend({},n,{endTime:p.now(),response:t.response})})}}function r(e,t){return t||(t=m.getDefaultFrame()),new s(function(n){var i={data:o.extend({},e,{id:m.getNextMessageId()}),resolver:n};t?m.isDisabled()||a(i,t):c.dispatch(l.XDOMAIN_SET_MESSAGE,{messageId:i.data.id,message:i})})}function a(e,t){var n=e.data;c.dispatch(l.XDOMAIN_SET_MESSAGE,{messageId:e.data.id,message:o.extend({},e,{startTime:p.now()})}),t.target.postMessage(_.stringify(n),t.origin)}var o=n(8),s=n(60).Promise,u=n(2),c=n(5),l=n(17),d=n(19),f=n(65),g=n(16),p=n(14),v=n(67),h=n(77),_=n(18),E=n(11),m=d.get("stores/xdomain"),I=t.Error=u("XDomainStorageError");t.setItem=function(e,t,n){return r({type:"PUT",key:e,value:_.stringify(t)},n)},t.getItem=function(e,t){return r({type:"GET",key:e},t)},t.fetchAll=function(e){return r({type:"GETALL"},e)},t.subscribe=function(e){c.dispatch(l.XDOMAIN_ADD_SUBSCRIBER,{subscriber:e})},t.loadIframe=function(e,t){return new s(function(n){var i=f.createElement("iframe");i.src=e+t,f.appendToHead(i),i.onload=function(){var r={id:m.getNextFrameId(),target:i.contentWindow,origin:e,path:t};c.dispatch(l.XDOMAIN_ADD_FRAME,r),n(r)}})},t.loadCanonicalOrigins=function(e){c.dispatch(l.XDOMAIN_SET_CANONICAL_ORIGINS,{canonicalOrigins:e})},t.getXDomainUserId=function(e,t){var n,i={};return o.each(t,(function(t){i[t]=[],o.each(o.keys(e),(function(e){var r=h.getUserIdFromKey(e,t);!n&&r&&(n=r),r&&!o.includes(i[t],r)&&i[t].push(r)}))})),E.debug("XDomain: Found userIds:",i),n},t.load=function(e,n){return g.addEventListener("message",i),t.loadIframe(e,n).then((function(e){c.dispatch(l.XDOMAIN_SET_DEFAULT_FRAME,e),m.isDisabled()||o.each(m.getMessages(),(function(t){t.startTime||a(t,e)}))}))}}),(function(e,t,n){var i=n(8),r=n(19),a=n(5),o=n(14),s=n(17),u=r.get("stores/global"),c=r.get("stores/session"),l=2e3;t.recordLayerDecision=function(e,t,n){return a.dispatch(s.RECORD_LAYER_DECISION,{layerId:e,decision:n,decisionTicket:t,sessionId:c.getSessionId(),activationId:u.getActivationId(),timestamp:o.now(),revision:u.getRevision(),namespace:u.getNamespace(),viewId:t.viewId}),n},t.relatedAudienceIds=function(e){var t={},n=["and","or","not"];return i.each(e.experiments,(function(e){i.each(i.flattenDeep(e.audienceIds),(function(e){i.includes(n,e)||(t[e]=!0)}))})),i.keys(t)},t.getActivationTimeout=function(e){var t=e.activation;return t&&null!==t.timeout&&void 0!==t.timeout?t.timeout:l},t.description=function(e){return(e.name?'"'+e.name+'" ':"")+"("+e.id+")"}}),(function(e,t,n){var i=(n(8),n(5),n(17),n(11)),r=n(60).Promise,a=n(19),o=(n(14),n(87),n(71),n(14),a.get("stores/global"),a.get("stores/change_data"),a.get("stores/session"),n(88));n(90);o.initialize(),t.execute=function(e){var t="Action / Execute called with LIVE_CHANGES set to false";return i.warn(t),r.reject(new Error(t))}}),(function(e,t,n){var i=n(60).Promise,r=n(5),a=n(17),o=n(19),s=o.get("stores/async_request");t.makeAsyncRequest=function(e,t){var n=s.getPromise(e);if(n)return n;var o,u,c=new i(function(e,t){o=e,u=t});return r.dispatch(a.REGISTER_ASYNC_DEFERRED,{source:e,promise:c,resolver:o,rejecter:u}),t&&t(),c},t.resolveRequest=function(e,t){r.dispatch(a.RESOLVE_DEFERRED,{source:e,resolveWith:t})},t.rejectRequest=function(e,t){r.dispatch(a.REJECT_DEFERRED,{source:e,rejectWith:t})}}),(function(e,t,n){function i(){"interactive"!==document.readyState&&"complete"!==document.readyState||(t.domReadyTime=Date.now())}var r=n(89),a=n(19).get("stores/directive");t.domReadyTime=null,t.initialize=function(){i(),document.addEventListener("readystatechange",i,!0)},t.isTimedOut=function(e){var n=Date.now();if(!t.domReadyTime||!e)return!1;var i=Math.max(e,t.domReadyTime);return a.isEditor()&&(i=t.domReadyTime),!(n-i<r.SELECTOR_POLLING_MAX_TIME)}}),(function(e,t){e.exports={SELECTOR_POLLING_MAX_TIME:2e3,CHANGE_ID_ATTRIBUTE_PREFIX:"data-optly-"}}),(function(e,t,n){var i=n(8),r=n(14),a=n(19),o=a.get("stores/plugins"),s=n(12);t.create=function(e,t){var n=o.getPlugin(s.PluginTypes.changeAppliers,e.type);if(!n)throw new Error("Unrecognized change type "+e.type);return new n(i.cloneDeep(e),{identifier:e.id,startTime:t||r.now()})}}),(function(e,t,n){function i(e,t){for(var n=0;n<e.experiments.length;n++)for(var i=0;i<e.experiments[n].variations.length;i++)if(t.indexOf(e.experiments[n].variations[i].id)>-1)return{experimentId:e.experiments[n].id,variationId:e.experiments[n].variations[i].id};return null}function r(e){var t=h.getPlugin(c.PluginTypes.deciders,e);if(o.isEmpty(t))throw new Error("No deciders found for policy: "+e);return t}function a(e,t){var n=h.getAllPlugins(c.PluginTypes.audienceMatchers);return o.reduce(t,(function(t,i){return f.isInAudience(e,i,n)&&t.push(i.id),t}),[])}var o=n(8),s=n(92),u=n(93),c=n(12),l=n(11),d=n(67),f=n(96),g=n(94).DecisionError,p=n(85),v=n(19),h=v.get("stores/plugins"),_=v.get("stores/global"),E=v.get("stores/layer_data"),m="single_experiment";t.createTicket=function(e){var t;if(e.layer){var n=!1,i=r(e.layer.policy);o.isFunction(i.includeViewIdInDecisionTicket)?n=i.includeViewIdInDecisionTicket(e.layer):i.includeViewIdInDecisionTicket===!0&&(n=!0),n&&(t=e.viewId)}var s={bucketingId:e.bucketingId,audienceIds:a(e.visitorProfile,e.audiences),globalHoldback:e.globalHoldback,preferredVariationMap:e.preferredVariationMap,activationId:_.getActivationId(),viewId:t};return s},t.decideGlobal=function(e){var t=s.isHoldback(e.bucketingId,{id:null,holdback:e.globalHoldback});return{isGlobalHoldback:t}},t.decideLayer=function(e,t){l.debug("Deciding: ",e,t);var n,i,a=r(e.policy),c={layerId:e.id,experimentId:null,variationId:null,isLayerHoldback:s.isHoldback(t.bucketingId,e)};if(o.isEmpty(e.experiments))throw new g("No experiments in layer.");try{if(a.decideLayer){l.debug("Decision / Using decider's custom decideLayer.");var f=a.decideLayer(e,t);n=f.experiment,i=f.variation}else l.debug("Decision / Using default decideLayer behavior."),n=a.selectExperiment(e,t.audienceIds,t.bucketingId),i=u.selectVariation(n,t.audienceIds,t.bucketingId,t.activationId,t.preferredVariationMap)}catch(e){e instanceof g?c.reason=e.message:c.error=e}return c.experimentId=n?n.id:null,c.variationId=i?i.id:null,c.error&&(c.error.name="DecisionEngineError",d.emitError(c.error)),c},t.getDummyLayerDecision=function(e,t){var n,r=i(e,t);return r?(l.log("Decision / Applying force variation:",r.variationId,"to Campaign",p.description(e)),n={layerId:e.id,variationId:r.variationId,experimentId:r.experimentId,isLayerHoldback:!1,reason:"force"}):(l.log("No variation matches ids:",t,"in Campaign",p.description(e)),n={layerId:e.id,variationId:null,experimentId:null,isLayerHoldback:!1,reason:"force"}),n},t.isInCohort=function(e){if(!e.experimentId||!e.variationId)return!1;var t=E.get(e.layerId);return!(t.policy===m&&e.isLayerHoldback)}}),(function(e,t,n){var i=n(52),r=t.TOTAL_POINTS=1e4,a=function(e,t,n){var a=i.hashToInt(e+t,n,r);return a};t.isHoldback=function(e,t){return a(e,t.id,i.Seed.IGNORING)<(t.holdback||0)},t.chooseWeightedCandidate=function(e,t,n){for(var r=a(e,t,i.Seed.BUCKETING),o=0;o<n.length;o++)if(n[o].endOfRange>r)return n[o].entityId;throw new Error("Unable to choose candidate")}}),(function(e,t,n){var i=n(8),r=n(92),a=n(94).DecisionError,o=n(95),s=n(11),u="impression";t.isValidExperiment=function(e,t){var n,r=i.partial(i.includes,e);return s.groupCollapsed("Decision / Evaluating audiences for experiment:",t,e),n=!t.audienceIds||o.evaluate(t.audienceIds,r),s.groupEnd(),s.debug("Decision / Experiment",t,"is valid?",n),n},t.selectVariation=function(e,t,n,o,c){if(!e.variations||0===e.variations.length)throw new a('No variations in selected experiment "'+e.id+'"');if(!e.weightDistributions&&e.variations.length>1)throw new a('On selected experiment "'+e.id+'", weightDistributions must be defined if # variations > 1');var l;if(e.bucketingStrategy&&e.bucketingStrategy===u)if(1===e.variations.length)l=e.variations[0].id;else{var d=o;l=r.chooseWeightedCandidate(n+d,e.id,e.weightDistributions)}else if(c&&c[e.id]){s.debug("Decision / Using preferredVariationMap to select variation for experiment:",e.id);var f=c[e.id];if(!i.find(e.variations,{id:f}))return s.debug("Decision / Preferred variation:",f,"not found on experiment:",e.id,". Visitor not bucketed."),null;l=f}else l=1===e.variations.length?e.variations[0].id:r.chooseWeightedCandidate(n,e.id,e.weightDistributions);var g=i.find(e.variations,{id:l});if(g)return s.debug("Decision / Selected variation:",g),g;throw new a('Unable to find selected variation: "'+l+'".')},t.getExperimentById=function(e,t){var n=i.find(e.experiments,{id:t});if(n)return n;throw new a("Unable to find selected experiment.")},t.hasVariationActionsOnView=function(e,t){return s.debug("Decision / Checking variation:",e,"for actions on viewId:",t),!!i.find(e.actions,(function(e){return e.viewId===t&&!i.isEmpty(e.changes)}))}}),(function(e,t){function n(e){this.message=e}n.prototype=new Error,t.DecisionError=n}),(function(e,t,n){function i(e,t){for(var n,i,r=0;r<e.length;r++){if(n=o(e[r],t),n===!1)return!1;s.isUndefined(n)&&(i=!0)}if(!i)return!0}function r(e,t){for(var n,i=!1,r=0;r<e.length;r++){if(n=o(e[r],t),n===!0)return!0;s.isUndefined(n)&&(i=!0)}if(!i)return!1}function a(e,t){if(1!==e.length)return!1;var n=o(e[0],t);return s.isUndefined(n)?void 0:!n}function o(e,t){var n;if(s.isArray(e)){var i,r;e[0]in d?(i=e[0],r=e.slice(1)):(i=l.OR,r=e),u.groupCollapsed('Condition / Applying operator "'+i+'" with args',c.stringify(r));try{n=d[i](r,t),u.debug("Condition / Result:",n)}finally{u.groupEnd()}return n}return n=t(e),u.debug("Condition / Evaluated:",c.stringify(e),":",n),n}var s=n(8),u=n(11),c=n(18),l={AND:"and",OR:"or",NOT:"not"},d={};d[l.AND]=i,d[l.OR]=r,d[l.NOT]=a,e.exports={evaluate:o}}),(function(e,t,n){function i(e,t){var n={};return o.each(e,(function(e){if(o.isArray(e))o.extend(n,i(e,t));else if(o.isObject(e)){var r=t[e.type];r&&o.each(r.fieldsNeeded,(function(e){n[e]=!0}))}})),n}function r(e,t){return function(n){var i=n.type,r=t[i];if(!r)throw new Error("Audience / No matcher found for type="+i);if(r.fieldsNeeded)for(var a,s,c=0;c<r.fieldsNeeded.length;c++)if(a=r.fieldsNeeded[c],s=e[a],o.isUndefined(s))return void u.debug("Audience / Required field",a,"for type",i,"has no value");u.debug("Matching condition:",n,"to values:",e);var l=r.match(e,n);if(!o.isUndefined(l))return!!l}}function a(e){return e.name?e.name+" ("+e.id+")":e.id}var o=n(8),s=n(95),u=n(11);t.isInAudience=function(e,t,n){var i=r(e,n);u.groupCollapsed("Checking audience",t.name,t.id,t),u.debug("Visitor Profile:",e);var o;try{var c=s.evaluate(t.conditions,i)}catch(e){o=e,c=!1}return u.groupEnd(),o&&u.error("Audience / Error evaluating audience",a(t),":",o),u.log("Is "+(c?"in":"NOT in")+" audience:",a(t)),c},t.requiredAudienceFields=function(e,t){return o.keys(i(e.conditions,t))}}),(function(e,t,n){var i=n(8),r=n(68),a=n(5),o=n(19),s=n(17),u=n(12);t.registerApiModule=function(e,t){i.isArray(t)&&(t=o.evaluate(t)),a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.apiModules,name:e,plugin:t})},t.registerDependency=function(e,t){var n=o.get(e);n||o.register(e,t)},t.registerVisitorProfileProvider=function(e){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.visitorProfileProviders,name:e.provides,plugin:e})},t.registerViewProvider=function(e){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.viewProviders,name:e.provides,plugin:e})},t.registerAudienceMatcher=function(e,t){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.audienceMatchers,name:e,plugin:t})},t.registerViewMatcher=function(e,t){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.viewMatchers,name:e,plugin:t})},t.registerAnalyticsTracker=function(e,t){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.analyticsTrackers,name:e,plugin:t})},t.registerViewTagLocator=function(e,t){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.viewTagLocators,name:e,plugin:t})},t.registerAudiencePlugin=function(e){e.dependencies&&i.each(e.dependencies,(function(e,n){t.registerDependency(n,e)}));var n,r="vendor."+e.vendor;n=i.isString(e.provider)?o.get(e.provider)(e.vendor):i.isFunction(e.provider)?e.provider(e.vendor):i.cloneDeep(e.provider),t.registerVisitorProfileProvider(i.extend(n,{provides:r}));var a;a=i.isString(e.matcher)?o.get(e.matcher):e.matcher;var s={fieldsNeeded:[r],match:function(e,t){return a(e[r],t)}};t.registerAudienceMatcher(r,s)},t.registerWidget=function(e){i.isArray(e)&&(e=o.evaluate(e));var t=r.on({filter:{type:"showWidget",name:e.widgetId},handler:e.showFn}),n=r.on({filter:{type:"hideWidget",name:e.widgetId},handler:e.hideFn});return{showToken:t,hideToken:n}},t.registerChangeApplier=function(e,t){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.changeAppliers,name:e,plugin:t})},t.registerDecider=function(e,t){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.deciders,name:e,plugin:t})},t.registerEventImplementation=function(e,t){a.dispatch(s.REGISTER_PLUGIN,{type:u.PluginTypes.eventImplementations,name:e,plugin:t})}}),(function(e,t,n){function i(e,t){r.forEach(e,(function(e){if(e.eventType!==s.CUSTOM){var n=v.getPlugin(o.PluginTypes.eventImplementations,e.eventType);n?t?n.attach(e):n.detach(e):l.warn("No implementation found for event type:",e.eventType,"needed for event:",e)}}))}var r=n(8),a=n(19),o=n(12),s=n(99),u=n(5),c=n(14),l=n(11),d=n(17),f=n(95),g=n(74),p=n(100),v=a.get("stores/plugins"),h=a.get("stores/view"),_=a.get("stores/view_data"),E=a.get("stores/event_data");t.parseViewTags=function(e){var n=t.evaluateViewTags(e);t.setParsedViewTags(e.id,n)},t.updateAllViewTags=function(){var e=h.getActiveViewStates();r.each(e,(function(e){var n=_.get(e.id);t.parseViewTags(n)}))},t.evaluateViewTags=function(e){if(!e.tags)return{};var t=r.reduce(e.tags,(function(e,t){try{e[t.apiName]=p.getTagValue(t)}catch(e){e instanceof p.Error?l.warn("Page / Ignoring unparseable tag",t,e):l.error(e)}return e}),{});return t},t.createViewTicket=function(){var e={};return r.each(v.getAllPlugins(o.PluginTypes.viewProviders),(function(t){e[t.provides]=a.evaluate(t.getter)})),e},t.registerViews=function(e){u.dispatch(d.REGISTER_VIEWS,{views:e})},t.activate=function(e,n){var r=h.getViewState(e.id);if(r.isActive)return void l.log("Not activating Page, already active ",t.description(e));var a=t.createViewTicket();if(!t.hasValidStaticConditions(e,a))return void l.log("Page / Failed to match page conditions for "+t.description(e),e.staticConditions);t.setViewActiveState(e,!0),l.log("Activated Page",t.description(e)),t.parseViewTags(e),n&&t.setUserSuppliedViewTags(e.id,n),g.emitViewActivated({view:e,metadata:n});var o=E.getByViewId(e.id);i(o,!0)},t.deactivate=function(e){var n=h.getViewState(e.id);if(!n.isActive)return void l.log("Not deactivating Page, already inactive ",t.description(e));t.setViewActiveState(e,!1),l.log("Deactivated Page",t.description(e));var r=E.getByViewId(e.id);i(r,!1)},t.setViewActiveState=function(e,t){u.dispatch(d.SET_VIEW_ACTIVE_STATE,{view:e,timestamp:c.now(),isActive:t})},t.setGlobalTags=function(e){u.dispatch(d.SET_GLOBAL_TAGS,e)},t.setParsedViewTags=function(e,t){u.dispatch(d.UPDATE_PARSED_VIEW_METADATA,{viewId:e,metadata:t})},t.setUserSuppliedViewTags=function(e,t){u.dispatch(d.UPDATE_USER_SUPPLIED_METADATA,{viewId:e,metadata:t})},t.hasValidStaticConditions=function(e,t){if(r.isEmpty(e.staticConditions))return!0;var n=v.getAllPlugins(o.PluginTypes.viewMatchers);l.groupCollapsed("Page / Evaluating staticConditions:",e.staticConditions),l.debug("Matching to current value:",t);var i=f.evaluate(e.staticConditions,(function(e){var i=e.type,r=n[i];if(!r)throw new Error("Page / No matcher found for type="+i);return r.match(t,e)}));return l.groupEnd(),i},t.description=function(e){return'"'+e.name+'" ('+e.id+")"}}),(function(e,t){e.exports={CLICK:"click",CUSTOM:"custom",ENGAGEMENT:"engagement",PAGEVIEW:"pageview"}}),(function(e,t,n){var i=n(12).PluginTypes,r=n(19),a=r.get("stores/plugins");t.getTagValue=function(e){var n=a.getPlugin(i.viewTagLocators,e.locatorType);if(!n)throw new t.Error("No locator registered for tag locatorType: "+e.locatorType);return n(e)},t.enums=n(101),t.Error=n(102).Error}),(function(e,t){t.locatorType={CSS_SELECTOR:"css_selector",JAVASCRIPT:"javascript",URL_REGEX:"url_regex"},t.valueType={STRING:"string",NUMBER:"number",CURRENCY:"currency"},t.nodeNames={INPUT:"INPUT",SELECT:"SELECT"}}),(function(e,t,n){var i=n(2);t.Error=i("TagError")}),(function(e,t,n){function i(e,t){var n=u({activeViewStates:R.getActiveViewStates(),visitorProfile:P.getVisitorProfile(),layerStates:N.getLayerStates()}),i=V.getByApiName(e),r=i&&i.viewId?l(i):R.getActiveViewTags(),a=p.extend({},r,t),o=i&&i.category?i.category:w.OTHER;return p.extend(n,{eventEntityId:i&&i.id,eventApiName:e,eventCategory:o,eventTags:a})}function r(e,t){var n=u({activeViewStates:R.getActiveViewStates(),visitorProfile:P.getVisitorProfile(),layerStates:N.getLayerStates()});return p.extend(n,{viewId:e.id,viewCategory:e.category,eventTags:t.metadata})}function a(e){var t=u({activeViewStates:R.getActiveViewStates(),visitorProfile:P.getVisitorProfile(),layerStates:N.getLayerStates()}),n=e.config&&e.config.selector?e.config.selector:e.eventFilter.selector,i=e&&e.category?e.category:w.OTHER,r=l(e);return p.extend(t,{event:e,eventCategory:i,eventTags:r,selector:n})}function o(){var e=u({activeViewStates:[],visitorProfile:P.getVisitorProfile(),layerStates:[]});return p.extend(e,{eventTags:{}})}function s(e,t,n){return{decisionId:E.generate(),timestamp:S.now(),revision:b.getRevision(),clientEngine:A.ENGINE,clientVersion:A.VERSION,projectId:b.getProjectId(),accountId:b.getAccountId(),activationId:b.getActivationId(),sessionId:O.getSessionId(),visitorId:k.getRandomId(),visitorUUID:k.getUUID(),decision:t,decisionTicket:e,userFeatures:d(n)}}function u(e){var t={eventId:E.generate(),timestamp:S.now(),revision:b.getRevision(),clientEngine:A.ENGINE,clientVersion:A.VERSION,projectId:b.getProjectId(),accountId:b.getAccountId(),activationId:b.getActivationId(),sessionId:O.getSessionId(),isGlobalHoldback:b.isGlobalHoldback(),visitorId:k.getRandomId(),
visitorUUID:k.getUUID(),activeViewStates:e.activeViewStates,layerStates:e.layerStates,userFeatures:d(e.visitorProfile)};return t}function c(e){var t=R.getViewState(e),n=t&&t.isActive?t.metadata:{};return n}function l(e){var t={};return e.viewId?c(e.viewId):t}function d(e){var t=L.getAllPlugins(T.PluginTypes.visitorProfileProviders),n=p.filter(t,{shouldTrack:!0}),i={id:null,type:null,name:"",value:null,shouldIndex:!0};return p.reduce(n,(function(t,n){try{var r=n.provides,a=e[r],o=[];if(!p.isUndefined(a)){p.isObject(a)?o=p.map(a,(function(e,t){var n=p.isObject(e)?e:{value:e};return p.extend({},{type:r,name:t},n)})):o.push({type:r,value:a});var s=p(o).map((function(e){return p.pick(p.extend({},i,e),p.keys(i))})).filter((function(e){return!!e.value})).value();t=t.concat(s)}}catch(e){m.warn("Error evaluating userFeature against visitorProfile:",e)}return t}),[])}function f(e,t){var n=g(e);m.debug("Found "+n.length+" analytics integrations defining a "+e+" hook"),m.debug("Calling each with data: ",t),p.each(n,(function(e){try{m.debug("Calling plugin: "+e.name),e.hookFn(t),m.debug("Called plugin: "+e.name)}catch(e){m.error(e)}}))}function g(e){var t=[];return p.each(L.getAllPlugins(T.PluginTypes.analyticsTrackers),(function(n,i){if(n[e])try{t.push({name:i,hookFn:I.evaluate(n[e])})}catch(e){m.error(e)}})),t}var p=n(8),v=n(5),h=n(17),_=n(67),E=n(44),m=n(11),I=n(19),y=n(80),S=n(14),A=n(104),T=n(12),w=n(82),D=n(99),b=I.get("stores/global"),O=I.get("stores/session"),R=I.get("stores/view"),L=I.get("stores/plugins"),N=I.get("stores/layer"),P=I.get("stores/visitor"),C=I.get("stores/directive"),V=I.get("stores/event_data"),k=I.get("stores/visitor_id");t.trackClientActivation=function(){if(C.shouldSendTrackingData()){var e=o();return f("onClientActivation",e),e}},t.trackCustomEvent=function(e,t){t=t||{};var n=i(e,t),r=V.getByApiName(e),a={name:e,type:D.CUSTOM,category:n.eventCategory,tags:p.omit(n.eventTags,"revenue")};if(p.isUndefined(t.revenue)||(a.revenue=t.revenue),_.emitAnalyticsEvent({name:r?r.name||r.apiName:e,apiName:r?r.apiName:void 0,type:D.CUSTOM,tags:p.omit(n.eventTags,"revenue"),category:n.eventCategory,metrics:a.revenue?{revenue:a.revenue}:{}},!C.shouldSendTrackingData()),C.shouldSendTrackingData())return y.addEvent(a),f("onCustomEvent",n),n},t.trackDecisionEvent=function(e,t){if(C.shouldSendTrackingData()){var n=P.getVisitorProfile(),i=s(t,e,n);return v.dispatch(h.TRACK_DECISION_EVENT,{layerId:e.layerId,decisionEvent:i}),f("onLayerDecision",i),i}},t.trackClickEvent=function(e){var t=a(e),n={name:e.apiName,type:e.eventType,category:t.eventCategory,tags:t.eventTags};if(_.emitAnalyticsEvent({name:e.name||e.apiName,apiName:e?e.apiName:void 0,type:e.eventType,category:t.eventCategory,tags:t.eventTags,metrics:{}},!C.shouldSendTrackingData()),C.shouldSendTrackingData())return y.addEvent(n),f("onClickEvent",t),t},t.trackViewActivation=function(e){var t=R.getViewState(e.id);if(!t.isActive)return void m.debug("Inactive view passed to `trackViewActivation`");var n=r(e,t),i={name:e.apiName,type:D.PAGEVIEW,category:n.viewCategory,tags:n.eventTags};return _.emitAnalyticsEvent({name:e.name||e.apiName,apiName:e.apiName,type:D.PAGEVIEW,category:n.viewCategory,tags:n.eventTags,metrics:{}},!C.shouldSendTrackingData()),C.shouldSendTrackingData()?(y.addEvent(i),v.dispatch(h.TRACK_VIEW_ACTIVATED_EVENT,{viewId:e.id,eventData:n}),f("onPageActivated",n),n):void 0}}),(function(e,t,n){t.VERSION="0.51.1",t.ENGINE="js"}),(function(e,t,n){var i=n(60).Promise,r=n(8);t.firstToResolve=function(e){return new i(function(t){r.each(e,(function(e){i.resolve(e).then(t).catch()}))})}}),(function(e,t,n){var i=n(8),r=n(60).Promise,a=100,o=50;t.pollFor=function(e,t,n){var s,u;return i.isFunction(n)?u=n:(s=n||a,u=function(){return s--,s<-1}),t=t||o,new r(function(n,i){!(function r(){var a;if(!u()){try{var o=e();if(o)return n(o)}catch(e){a=e}return setTimeout(r,t)}i(a||new Error("Poll timed out"))})()})}}),(function(e,t,n){var i=n(8),r=n(78).LocalStorage,a=n(11),o=n(59),s=n(12),u=n(67),c=n(19),l=c.get("stores/pending_events"),d=s.StorageKeys.PENDING_EVENTS;t.persistPendingEvents=function(){try{var e=l.getEvents();r.setItem(d,e),n(84).setItem(d,e)}catch(e){a.warn("PendingEvents / Unable to set localStorage key, error was: ",e),u.emitInternalError(e)}},t.getPendingEvents=function(){return r.getItem(d)},t.retryPendingEvents=function(e){i.forOwn(e,(function(e,t){o.retryableRequest(e.data,t,e.retryCount)})),i.isEmpty(e)||a.log("Retried pending events: ",e)}}),(function(e,t,n){var i=n(8),r=n(11),a=n(109),o=n(19),s=o.get("stores/plugins"),u=n(12),c=[n(118),n(119),n(120)],l=["disable","load"];t.push=function(e,t){var n,a,o,s;if(!i.isArray(e)&&i.isObject(e))s=i.isUndefined(e.version)?1:e.version,n=e.type,o=[e];else if(i.isArray(e))s=0,n=e[0],o=e.slice(1);else{if(!i.isString(e))return r.warn("API / Ignoring non-array/object/string argument:",e),!1;s=0,n=e,o=[]}if(c[s]&&(a=c[s][n]),t&&l.indexOf(n)===-1)return r.debug("API / Ignoring non high priority function:",n,o),!1;if(!a)return r.warn('API / No function found for "'+n+'" (v'+s+") with arguments:",o),!1;r.log('API / Executing: "'+n,'" with arguments:',o);try{a.apply(null,o)}catch(e){r.error(e)}return!0},t.get=function(e){var t=a[e];return t?(i.isArray(t)&&(t=o.evaluate(t)),t):(t=s.getPlugin(u.PluginTypes.apiModules,e))?t:void r.warn('Module "'+e+'" not found.')}}),(function(e,t,n){function i(e,t,n,i,o,u,c){var l=[],d=e.getLayerStates();c.policy===s&&(d=a.filter(d,(function(e){var n=t.get(e.layerId);return n&&n.policy===s})));var f=a.map(d,(function(e){var t=!!e.decision.variationId,n=e.decisionActivationId&&e.decisionActivationId===i.getActivationId(),r=t&&o.getEffectiveVariationId()===e.decision.variationId;return a.extend(e,{isActive:t&&n||r,visitorRedirected:r})})),g=u?a.filter(f,u):f;return a.each(g,(function(e){var i=r(e,t,n,c.includeOfferConsistency);i&&l.push(i)})),l}function r(e,t,n,i){var r,o,u=e.layerId,c=t.get(u)||{},l=a.map(c.experiments,(function(e){return a.pick(e,["id","name"])}));if(i||!c.decisionMetadata||!c.decisionMetadata.offerConsistency){var d={id:u,campaignName:c.name||null,experiment:null,allExperiments:l,variation:null,reason:e.decision.reason,isActive:e.isActive,visitorRedirected:e.visitorRedirected,isInCampaignHoldback:e.decision.isLayerHoldback};e.decision&&e.decision.experimentId&&(r=a.find(c.experiments,{id:e.decision.experimentId})),r&&(d.experiment=a.pick(r,["id","name"]),c.policy!==s&&(d.experiment.campaignName=c.name||null)),r&&e.decision.variationId&&(o=a.find(r.variations,{id:e.decision.variationId})),o&&(d.variation=a.pick(o,["id","name"]));var f=a.map(e.decisionTicket.audienceIds,(function(e){return a.pick(n.get(e),["id","name"])}));return d.audiences=f,c.decisionMetadata&&c.decisionMetadata.offerConsistency&&(d.pageId=e.viewId),d}}var a=n(8),o=n(104),s="single_experiment";t.data=["stores/audience_data","stores/event_data","stores/layer_data","stores/view_data","stores/global",function(e,t,n,i,r){var u={audiences:{},events:{},campaigns:{},pages:{},experiments:{},variations:{},projectId:r.getProjectId(),snippetId:r.getSnippetId(),accountId:r.getAccountId(),dcpServiceId:r.getDCPServiceId(),revision:r.getRevision(),clientVersion:o.VERSION};return a.each(e.getAll(),(function(e){u.audiences[e.id]=e})),a.each(t.getAll(),(function(e){u.events[e.id]=e,u.events[e.id].pageId=e.viewId})),a.each(n.getAll(),(function(e){u.campaigns[e.id]=e,u.campaigns[e.id].pageIds=e.viewIds,a.each(e.experiments,(function(t){u.experiments[t.id]=t,e.policy!==s&&(t.campaignName=e.name||null),a.each(t.variations,(function(e){u.variations[e.id]=e,a.each(u.variations[e.id].actions,(function(e){e.pageId=e.viewId}))}))}))})),a.each(i.getAll(),(function(e){u.pages[e.id]=e})),u}],t.session=["stores/session",function(e){return e.getState()}],t.visitor=["stores/visitor",function(e){return a.cloneDeep(e.getVisitorProfile())}],t.visitor_id=["stores/visitor_id",function(e){return{randomId:e.getRandomId(),UUID:e.getUUID()}}],t.state=["stores/audience_data","stores/layer_data","stores/layer","stores/view_data","stores/view","stores/global","stores/global_state",function(e,t,n,r,o,u,c){return{getCampaignStates:function(r){var o={},s=i(n,t,e,u,c,r,{includeOfferConsistency:!1});return a.each(s,(function(e){o[e.id]=e})),o},getExperimentStates:function(r){var o=i(n,t,e,u,c,r,{includeOfferConsistency:!1,policy:s}),l=["audiences","variation","reason","visitorRedirected","isActive"],d=a.reduce(o,(function(e,t){var n=t.allExperiments[0];return e[n.id]=a.extend({},a.pick(t,l),{id:n.id,experimentName:n.name,isInExperimentHoldback:t.isInCampaignHoldback}),e}),{});return d},getCampaignStateLists:function(r){var o={},s=i(n,t,e,u,c,r,{includeOfferConsistency:!0});return a.each(s,(function(e){var t=e.id;o[t]||(o[t]=[]),o[t].push(e)})),o},getPageStates:function(e){var t=o.getAll(),n=e?a.filter(t,e):t;return a.reduce(n,(function(e,t){var n=r.get(t.id);return e[t.id]=a.extend({},a.pick(n,["id","name","apiName","category","staticConditions","tags"]),a.pick(t,["isActive","metadata"])),e}),{})},isGlobalHoldback:function(){return u.isGlobalHoldback()},getActivationId:function(){return u.getActivationId()},getVariationMap:function(){var e=n.getLayerStates(),i={};return a.each(e,(function(e){var n=t.get(e.layerId);if(e.decision&&e.decision.experimentId&&(i[e.decision.experimentId]={id:e.decision.variationId,name:null,index:null},n)){var r=a.find(n.experiments,{id:e.decision.experimentId});if(r&&e.decision.variationId)var o=a.find(r.variations,{id:e.decision.variationId}),s=a.findIndex(r.variations,{id:e.decision.variationId});o&&(i[e.decision.experimentId]={id:e.decision.variationId,name:o.name,index:s})}})),i},getActiveExperimentIds:function(){var e={};return a.each(this.getCampaignStateLists({isActive:!0}),(function(t){a.each(t,(function(t){e[t.experiment.id]=!0}))})),a.keys(e)},getRedirectInfo:function(){var e=null,n=c.getEffectiveVariationId();if(n){var i=t.getExperimentByVariationId(n),r=i?i.id:null;e={experimentId:r,variationId:n,referrer:c.getEffectiveReferrer()}}return e}}}],t.utils=n(110).create(),t.jquery=n(116),t.event_emitter=n(117)}),(function(e,t,n){var i=n(60).Promise,r=n(111).observeSelector,a=n(114).waitForElement,o=n(115).waitUntil,s=n(112).poll;t.create=function(){return{observeSelector:r,poll:s,Promise:i,waitForElement:a,waitUntil:o}}}),(function(e,t,n){function i(e){f[e]&&(f[e].cancelPolling(),delete f[e])}function r(e){if(f[e]){if(a(f[e]))return 0===f[e].matchedCount&&d.isFunction(f[e].options.onTimeout)&&f[e].options.onTimeout(),void i(e);var t=document.querySelectorAll(f[e].selector);t.length&&(d.each(t,(function(t){t.et&&t.et[e]||f[e].callbackQueue.push(t)})),o(e))}}function a(e){var t=e.options.timeout;if(null!==t)if("function"==typeof t)try{return t()}catch(e){}else if(Date.now()-e.startTime>t)return!0;return!1}function o(e){for(;f[e]&&f[e].callbackQueue.length;){var t=f[e].callbackQueue.shift();if(s(t,e),f[e].matchedCount=f[e].matchedCount+1,f[e].callback(t),f[e].options.once)return void i(e)}}function s(e,t){e.et||(e.et={}),e.et[t]=!0}function u(e){try{document.querySelector(e)}catch(e){return!1}return!0}var c=n(112),l=n(44).generate,d=n(8),f={},g={once:!1,onTimeout:null,timeout:null};t.observeSelector=function(e,t,n){if(!u(e))throw new Error("observeSelector expects a valid css selector as its first argument");if(!d.isFunction(t))throw new Error("observeSelector expects a function as its second argument");if(n&&(!d.isObject(n)||d.isFunction(n)))throw new Error("observeSelector expects an object as its third argument");var a=l();return n=d.merge({},g,n||{}),f[a]={callback:t,callbackQueue:[],cancelPolling:c.poll(d.partial(r,a)),matchedCount:0,options:n,selector:e,startTime:Date.now()},setTimeout(r.bind(null,a),0),d.partial(i,a)}}),(function(e,t,n){function i(e){u[e]&&a.each(u[e].callbacks,(function(e){e.call(null)}))}function r(e,t){u[t]&&u[t].callbacks[e]&&(delete u[t].callbacks[e],a.some(u[t].callbacks)||(clearInterval(u[t].id),delete u[t]))}var a=n(8),o=n(44).generate,s=n(113).DEFAULT_INTERVAL,u={};t.poll=function(e,t){a.isNumber(t)||(t=s),u[t]||(u[t]={callbacks:{},id:setInterval(a.partial(i,t),t)});var n=o();return u[t].callbacks[n]=e,a.partial(r,n,t)},t.cancelAll=function(){a.each(u,(function(e,t){clearInterval(e.id),delete u[t]}))}}),(function(e,t){e.exports={DEFAULT_INTERVAL:20}}),(function(e,t,n){var i=n(60).Promise,r=n(111).observeSelector;t.waitForElement=function(e){return new i(function(t,n){r(e,t,{once:!0})})}}),(function(e,t,n){var i=n(60).Promise,r=n(112).poll;t.waitUntil=function(e){return new i(function(t,n){if(e())return void t();var i=r((function(){e()&&(i(),t())}))})}}),(function(e,t,n){var i,r=n(16);try{i=$}catch(e){}var a=r.getGlobal("jQuery"),o=r.getGlobal("$");i&&i!==o?e.exports=i:e.exports=a||o}),(function(e,t,n){var i=n(68);t.on=function(e){return e.publicOnly=!0,i.on(e)},t.off=i.off,t.emit=function(e){i.emit(e)}}),(function(e,t,n){function i(e){var t,n={};if(e)if(r(e))t=Number(e);else{if("object"!=typeof e)throw new Error("tracker","Revenue argument",e,"not a number.");if(n=a.extend({},e),"revenue"in n){if(!r(n.revenue))throw new Error("tracker","Revenue value",n.revenue,"not a number.");t=Number(n.revenue),delete n.revenue}}return a.isUndefined(t)||(n.revenue=t),n}function r(e){return a.isNumber(e)||a.isString(e)&&Number(e)==e}var a=n(8),o=n(119);t.activateGeoDelayedExperiments=function(e,t){t||(t=e.lists?"odds":"cdn3"),o.dataFromSource({data:e,source:t})},t.activateSiteCatalyst=function(e){e&&e.sVariable&&o.integrationSettings({id:"adobe_analytics",settings:{sVariableReference:e.sVariable}})},t.bucketUser=t.bucketVisitor=function(e,t){if(e&&t){var n={experimentId:String(e)};t>256?n.variationId=String(t):n.variationIndex=String(t),o.bucketVisitor(n)}},t.disable=function(e){o.disable({scope:e})},t.log=function(e){a.isUndefined(e)&&(e=!0),o.log({level:e?"INFO":"OFF"})},t.optOut=function(e){a.isUndefined(e)&&(e=!0),o.optOut({isOptOut:e})},t.setCookieDomain=function(e){o.cookieDomain({cookieDomain:e})},t.setCookieExpiration=function(e){o.cookieExpiration({cookieExpirationDays:e})},t.setDimensionValue=function(e,t){var n={};n[e]=t,o.user({attributes:n})},t.setUserId=function(e){o.user({userId:e})},t.storeThirdPartyData=function(e,t){o.dataFromSource({source:e,data:t})},t.trackEvent=function(e,t){o.event({eventName:e,tags:i(t)})}}),(function(e,t,n){var i=n(8),r=n(17),a=n(12),o=n(108),s=n(109),u=n(103),c=n(87),l=n(66),d=n(68),f=n(5),g=n(11),p=n(97),v=n(98),h=n(77),_=n(74),E=n(84),m=n(18),I=n(14),y=n(19),S=y.get("stores/dimension_data"),A=y.get("stores/view_data"),T=y.get("stores/visitor_id"),w=y.get("stores/layer_data"),D=y.get("stores/directive"),b=86400,O=90;t.event=function(e){v.updateAllViewTags();var t=function(){var t=u.trackCustomEvent(e.eventName,e.tags);t?g.log("API / Tracking custom event:",e.eventName,e.tags):g.log("API / Not tracking custom event:",e.eventName)};T.getBucketingId()?t():f.dispatch(r.ADD_CLEANUP_FN,{lifecycle:a.Lifecycle.postActivate,cleanupFn:t})},t.page=function(e){var t=A.getByApiName(e.pageName);if(!t)throw new Error('Unknown page "'+e.pageName+'"');var n=!e.hasOwnProperty("isActive")||e.isActive,i=function(){n?v.activate(t,e.tags):(v.deactivate(t),g.log("API / Deactivated Page",v.description(t)))};T.getBucketingId()?i():f.dispatch(r.ADD_CLEANUP_FN,{lifecycle:a.Lifecycle.postViewsActivated,cleanupFn:i})},t.tags=function(e){v.setGlobalTags(e.tags)},t.user=function(e){i.each(e,(function(e,t){"userId"===t?(g.log("API / Setting visitor UUID to",e),h.persistVisitorId({UUID:e})):"attributes"===t&&(g.log("API / Setting visitor attributes:",e),i.each(e,(function(e,t){var n,i=t,o="custom",s=S.getById(t)||S.getByApiName(t);s&&(i=s.id,n=s.segmentId||s.id);var u=function(){f.dispatch(r.SET_VISITOR_ATTRIBUTES,{attributes:[{key:i,value:{id:n,value:e},type:o,metadata:{lastModified:I.now()}}]})};T.getBucketingId()?u():f.dispatch(r.ADD_CLEANUP_FN,{lifecycle:a.Lifecycle.postVisitorProfileLoad,cleanupFn:u})})))}))},t.optOut=function(e){var t=!e.hasOwnProperty("isOptOut")||e.isOptOut;l.setOptOut(t)},t.cookieExpiration=function(e){var t=e.cookieExpirationDays;t<O&&(g.error('Argument "cookieExpirationDays"=',t,"less than minimum days:",O,", setting to minimum."),t=O),g.log("API / Setting cookie age to",t,"days."),f.dispatch(r.SET_COOKIE_AGE,t*b)},t.cookieDomain=function(e){g.log("API / Setting cookie domain to",e.cookieDomain),f.dispatch(r.SET_COOKIE_DOMAIN,e.cookieDomain)},t.disable=function(e){if(e.scope){if("tracking"!==e.scope)throw new Error('Unknown "scope" for disable: '+e.scope);g.log("API / Disabling tracking"),f.dispatch(r.LOAD_DIRECTIVE,{trackingDisabled:!0})}else g.log("API / Disabling everything"),f.dispatch(r.LOAD_DIRECTIVE,{disabled:!0})},t.log=function(e){var t=e.level,n=e.match;i.isUndefined(t)&&(t="INFO"),i.isUndefined(n)&&(n=""),g.setLogMatcher(n),g.setLogLevel(t)},t.registerModule=function(e){var t="custom/"+e.moduleName;if(s[t]||o.get(t))throw new Error('Module name "'+t+'" is reserved. Will not be registered as plugin.');p.registerApiModule(t,e.module)},t.dataFromSource=function(e){var t=e.source;c.makeAsyncRequest(t),c.resolveRequest(t,e.data)},t.addListener=function(e){if(!i.isFunction(e.handler))throw new Error("A handler function must be supplied");e=i.omit(e,"type"),e.publicOnly=!0,e.emitErrors=!0,d.on(e)},t.removeListener=function(e){if(!e.token)throw new Error("Must supply a token to removeListener");d.off(e.token)},t.load=function(e){f.dispatch(r.DATA_LOADED,{data:e.data})},t.integrationSettings=function(e){if(!e.id)throw new Error("id is required");if(!e.settings)throw new Error("settings is required");f.dispatch(r.SET_INTEGRATION_SETTINGS,i.extend({},e.settings,{id:e.id}))},t.bucketVisitor=function(e){if(!e.variationId&&i.isUndefined(e.variationIndex)||e.variationId&&e.variationIndex)throw new Error("One of a variationId or a variationIndex is required.");if(!e.experimentId)throw new Error("An experimentId is required.");var t,n,r=e.campaignId;if(r){if(t=w.get(r),!t)throw new Error("Could not find layer "+r)}else if(t=w.getLayerByExperimentId(e.experimentId),r=t.id,!r)throw new Error("Could not find layer for experiment "+e.experimentId);if(n=i.find(t.experiments,{id:e.experimentId}),!n)throw new Error("Could not find experiment "+e.experimentId+" in layer "+r);var a=e.variationId;if(i.isUndefined(e.variationIndex)){if(!i.find(n.variations,{id:a}))throw new Error("Cound not find variation "+a+" in experiment "+e.experimentId)}else if(a=n.variations[e.variationIndex].id,!a)throw new Error("Could not find variation at index "+e.variationIndex+" in experiment "+e.experimentId);h.updateVariationIdMap(r,e.experimentId,a),T.getBucketingId()&&h.persistVariationId()},t.waitForOriginSync=function(e){if(!i.isArray(e.canonicalOrigins))throw new Error("canonicalOrigins must be an array. Got: "+m.stringify(e.canonicalOrigins));i.each(e.canonicalOrigins,(function(e){if(!i.isString(e))throw new Error("Each item in canonicalOrigins must be a string. Found type "+typeof e)})),E.loadCanonicalOrigins(e.canonicalOrigins)},t.activate=function(){D.shouldActivate()?_.emitActivateEvent():g.debug("Not activating.")}}),(function(e,t){}),(function(e,t,n){var i=n(8),r=n(104),a=n(14),o=n(59),s=n(11),u=n(19),c=u.get("stores/global"),l="https://errors.client.optimizely.com";t.handleError=function(e,t){var n=e.name||"Error",u=e.message,d=e.stack||null,f={timestamp:a.now(),clientEngine:r.ENGINE,clientVersion:r.VERSION,accountId:c.getAccountId(),projectId:c.getProjectId(),errorClass:n,message:u,stacktrace:d};t&&(f.metadata=i.reduce(t,(function(e,t,n){return i.isObject(t)||e.push({key:n,value:String(t)}),e}),[])),s.error("Logging error",f),o.request({url:l+"/log",method:"POST",data:f,contentType:"application/json"}).then((function(e){s.log("Error Monitor / Logged error with response: ",e)}),(function(e){s.error("Failed to log error, response was: ",e)}))}}),(function(e,t,n){function i(){var e=_.getCurrentScript();if(e)return e.src}function r(){var e={project:y.getSnippetId()||y.getProjectId(),revision:y.getRevision(),clientVersion:"0.51.1",hasSlave:!0,wxhr:!0},t=S.getBucketingId();t&&(e.user=t);try{e.numBehaviorEvents=g.getEvents().length}catch(e){v.debug("Unable to get behavior events for RUM:",e)}c.extend(e,o(),a()),p.dispatch(m.SET_RUM_DATA,{data:e})}function a(){var e=T.getMarks();return c.reduce(e,(function(e,t,n){return t.length>=1&&c.includes(E.RUMPerformanceTimingAttributes,n)&&(e[n]=Math.round(t[0].end-t[0].start)),e}),{})}function o(){var e=h.getGlobal("performance");if(e){var t,n=A.getScriptSrc();try{if(n){v.debug("Using derived script src: ",n);var i=e.getEntriesByName(n);i.length>0&&(t=i[0])}if(!t){var r=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi;v.debug("Scanning resource timing entries with regex");var a=e.getEntriesByType("resource");t=c.find(a,(function(e){return r.test(e.name)}))}if(t)return c.mapValues(E.ResourceTimingAttributes,(function(e,n){return Math.round(t[n]||0)}))}catch(e){return}}}function s(){try{return!_.querySelector("body")}catch(e){return null}}function u(){try{h.getGlobal("requestAnimationFrame")((function(){var e=A.getRumData().timebase;p.dispatch(m.SET_RUM_DATA,{data:{render:d.now()-(e||0)}})}))}catch(e){return}}var c=n(8),l=n(60).Promise,d=n(14),f=n(59),g=n(80),p=n(5),v=n(11),h=n(16),_=n(65),E=n(12),m=n(17),I=n(19),y=I.get("stores/global"),S=I.get("stores/visitor_id"),A=I.get("stores/rum"),T=I.get("stores/performance"),w="https://rum.optimizely.com/rum",D=.003;t.initialize=function(){if(p.dispatch(m.SET_RUM_DATA,{RumHost:w,inRumSample:Math.random()<D,src:i()}),A.getSampleRum()){var e={sync:s(),timebase:d.now(),sampleRate:D};p.dispatch(m.SET_RUM_DATA,{data:e}),u()}},t.send=function(){var e=A.getSampleRum();if(e){r();var t=A.getRumData();if(t=c.pickBy(t,(function(e){return 0!==e&&!c.isUndefined(e)})),!c.isEmpty(t)){var i=n(15).queryStringFromMap(t);return f.request({url:w+"?"+i}).catch((function(e){v.error("Failed to collect rum data :",e)}))}}return l.resolve()}}),(function(e,t,n){function i(e){var t=!1;if(a.isArray(SLAVE_CLIENT.optimizely)&&a.each(SLAVE_CLIENT.optimizely,(function(n){a.isArray(n)&&"verifyPreviewProject"===n[0]&&String(n[1])===e&&(t=!0)})),!t)throw new Error("Preview projectId: "+e+" does not match expected")}function r(){u.on({filter:{type:o.TYPES.ANALYTICS,name:"trackEvent"},handler:f}),u.on({filter:{type:o.TYPES.LIFECYCLE,name:"viewActivated"},handler:f}),u.on({filter:{type:o.TYPES.LIFECYCLE,name:"layerDecided"},handler:f}),u.on({filter:{type:"error"},publicOnly:!0,handler:f})}var a=n(8),o=n(75),s=n(16),u=n(68),c=n(19),l=c.get("stores/directive"),d="optimizelyPreview",f=function(e){var t=s.getGlobal(d);t.push(e)};t.initialize=function(e){l.isSlave()&&i(e),r()},t.setupPreviewGlobal=function(){s.getGlobal(d)||s.setGlobal(d,[])},t.pushToPreviewGlobal=function(e){f(e)}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(125))}}),(function(e,t){e.exports={provides:"visitorId",getter:["stores/visitor_id",function(e){return e.getRandomId()}]}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(127)),e.registerAudienceMatcher("behavior",n(129))}}),(function(e,t,n){var i=n(128);e.exports={provides:"events",isTransient:!0,getter:["stores/visitor_events",function(e){return i.getEvents(e)}]}}),(function(e,t,n){var i=n(8),r=n(81);t.getEvents=function(e){var t=r.getEvents(),n=[].concat.apply([],i.values(e.getForeignEvents())),a=[].concat.apply([],i.values(e.getForeignEventQueues()));return r.mergeAllEvents([t,n,a])}}),(function(e,t,n){var i=n(8),r=n(130),a=n(131),o=n(18);e.exports={fieldsNeeded:["events"],match:function(e,t){var n=[],s=o.parse(t.value);return n=i.isUndefined(s.version)?[s]:r.buildFromSpecV0_1(s),i.every(n,(function(t){return a.isSatisfied(t,e.events)}))}}}),(function(e,t,n){function i(e){return e=(e||"").toString().trim(),g[e]||e}function r(e,t,n){var i={where:t};if(e.count&&(i.limit=e.count),e.modifier===s.FREQUENCY_FILTERS.MOST_FREQUENT){var r=s.getFieldKeyPathForSource(e.name,n),a=s.aggregate("count"),o=s.aggregateField("count"),c=s.groupField(r);return d.extend(i,{select:[{field:c}],groupBy:s.groupBy([r]),aggregate:[a],orderBy:[{field:o,direction:"DESC"}]})}return d.extend(i,{orderBy:[{field:[u.FIELDS.TIME],direction:"DESC"}]})}function a(e){var t=[];if(d.isUndefined(e))throw new Error("rule is undefined");if(!d.isObject(e))throw new Error("rule is not an Object");"0.2"!==e.version&&t.push('version: not "0.2"'),e.filter&&(d.isArray(e.filter)?d.each(e.filter,(function(e,n){var i=s.validateFieldKeyPathV0_2(e.field,s.FieldPurpose.FILTER);i&&t.push("filter["+n+"]: "+i);var r=s.validateComparatorAndValue(e.comparator,e.value);r&&t.push("filter["+n+"]: "+r)})):t.push("filter: not an array"));var n=[],i=[];if(e.sort&&(e.reduce&&e.reduce.aggregator&&"nth"!==e.reduce.aggregator&&t.push("sort: superfluous because we can apply aggregator "+f.stringify(e.reduce.aggregator)+" to unsorted items"),d.isArray(e.sort)?d.each(e.sort,(function(e,r){var a=s.validateFieldKeyPathV0_2(e.field,s.FieldPurpose.SORT);a&&t.push("sort["+r+"]: "+a),e.field&&"frequency"===e.field[0]?n.push(e):i.push(e);var u=o(e.direction);u&&t.push("sort["+r+"]: "+u)})):t.push("sort: not an array"),n.length&&i.length&&t.push('sort: sorting by non-["frequency"] field is pointless because we are going to sort the picked values by ["frequency"]'),n.length&&!e.pick&&t.push('sort: sorting by ["frequency"] is impossible because no values have been picked')),e.pick){e.reduce&&"count"===e.reduce.aggregator&&t.push('pick: superfluous because we can apply aggregator "count" to raw events');var r=s.validateFieldKeyPathV0_2(e.pick.field);r&&t.push("pick: "+r)}if(e.reduce){var a=e.reduce.aggregator,u="aggregator "+(f.stringify(a)||String(a)),c=e.reduce.n,l="index "+(f.stringify(c)||String(c));d.includes(["sum","avg","max","min","count","nth"],a)||t.push("reduce: "+u+" is unknown"),d.includes(["sum","avg","max","min"],a)&&(e.pick||t.push("reduce: "+u+" is impossible to use because no values have been picked")),"nth"===a?((!d.isNumber(c)||isNaN(c)||parseInt(c,10)!==c||c<0)&&t.push("reduce: "+l+" is not a non-negative integer (mandated by "+u+")"),e.sort||t.push('reduce: aggregator "nth" is meaningless without a specific sort order')):d.isUndefined(c)||t.push("reduce: "+l+" is defined (not mandated by "+u+")")}if(t.length)throw new Error(t.join("\n"))}function o(e){var t="direction "+(f.stringify(e)||String(e));if(!d.includes(["ascending","descending"],e))return t+' is not "ascending" or "descending"'}var s=t,u={FIELDS:n(51).FIELDS,FIELDS_V0_2:n(51).FIELDS_V0_2},c=n(131),l=n(11),d=n(8),f=n(18);s.MILLIS_IN_A_DAY=864e5,s.aggregateField=function(e,t){return d.isString(t)&&(t=[t]),t=t||c.DEFAULT_FIELD,[c.generateAlias(e,t)]},s.groupField=function(e){return d.isString(e)&&(e=[e]),e=e||c.DEFAULT_FIELD,[e.join(".")]};var g={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"};s.fieldComparison=function(e,t,n){return e=i(e),d.isString(t)&&(t=[t]),"exists"===e?{op:e,args:[{field:t}]}:{op:e,args:[{field:t},{value:n}]}},s.relativeTimeComparison=function(e,t){return{op:i(e),args:[{op:"-",args:[{eval:"now"},{field:[u.FIELDS.TIME]}]},{value:t*s.MILLIS_IN_A_DAY}]}},s.rangeTimeComparison=function(e){return d.isArray(e)?{op:"between",args:[{field:[u.FIELDS.TIME]},{value:e[0]||+new Date(0)},{value:e[1]||+new Date}]}:(l.error("Rule builder","rangeTimeComparison passed invalid range",e),null)},s.groupBy=function(e){for(var t=[],n=0;n<e.length;n++)t[n]={field:e[n]};return t},s.aggregate=function(e,t){return d.isString(t)&&(t=[t]),t=t||c.DEFAULT_FIELD,{op:e,args:[{field:t}]}},s.SOURCE_TYPES={BEHAVIOR:"events",DEFAULT_BEHAVIOR:"default_behavior",CUSTOM_BEHAVIOR:"custom_behavior",DCP:"dcp"},s.FREQUENCY_FILTERS={MOST_FREQUENT:"most_frequent",LEAST_FREQUENT:"least_frequent"},s.RECENCY_FILTERS={MOST_RECENT:"most_recent",LEAST_RECENT:"least_recent"},s.getFieldKeyPathForSource=function(e,t){t=t||s.SOURCE_TYPES.BEHAVIOR;var n=[];return d.isString(e)?(n=[e],t!==s.SOURCE_TYPES.BEHAVIOR||d.includes(d.values(u.FIELDS),e)||(n=[u.FIELDS.OPTIONS,e])):n=e,n},s.buildFromSpecV0_1=function(e){if(!(e.action||e.filters&&0!==e.filters.length))throw new Error('Audience spec must have an "action" field or at least one "filter" '+f.stringify(e));var t=s.fieldComparison("gt",u.FIELDS.TIME,0),n=[],i=[];if(e.action&&(i.push(s.fieldComparison("eq",u.FIELDS.NAME,e.action.value)),e.action.type&&i.push(s.fieldComparison("eq",u.FIELDS.TYPE,e.action.type))),e.time)if("last_days"===e.time.type)i.push(s.relativeTimeComparison("lte",e.time.days));else if("range"===e.time.type){var a=s.rangeTimeComparison([e.time.start,e.time.stop]);a&&i.push(a)}else l.error("Rule builder",'Audience spec has bad "time" type',e.time.type);if(t={op:"and",args:i},e.count&&n.push({where:s.fieldComparison(e.count.comparator,"0",e.count.value),from:{select:[{field:s.aggregateField("count")}],where:t,aggregate:[s.aggregate("count")]}}),e.filters&&d.each(e.filters,(function(r){var a,o,c=s.getFieldKeyPathForSource(r.name,e.source);if(r.modifier===s.FREQUENCY_FILTERS.MOST_FREQUENT?(a=s.aggregate("count"),o=s.aggregateField("count")):r.modifier===s.RECENCY_FILTERS.MOST_RECENT&&(a=s.aggregate("max",u.FIELDS.TIME),o=s.aggregateField("max",u.FIELDS.TIME)),a){var l=c,d=s.groupField(l);n.push({where:s.fieldComparison(r.comparator,"0",r.value),from:{select:[{field:d}],where:t,groupBy:s.groupBy([l]),aggregate:[a],orderBy:[{field:o,direction:"DESC"}],limit:1}})}else i.push(s.fieldComparison(r.comparator,c,r.value))})),e.pick){if(n.length>0)throw new Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+f.stringify(e));return[r(e.pick,t,e.source)]}return n.length>0?n:[{where:t}]},s.buildFromSpecV0_2=function(e){a(e);var t={where:{op:"and",args:d.map(e.filter||[],(function(e){return"age"===e.field[0]?s.relativeTimeComparison(e.comparator||"eq",e.value/s.MILLIS_IN_A_DAY):s.fieldComparison(e.comparator||"eq",s.convertFieldKeyPathFromSpecV0_2(e.field),e.value)}))}};if(e.reduce&&"count"===e.reduce.aggregator)return d.extend(t,{aggregate:[{op:"count",args:[{field:["*"]}]}],select:[{field:["_count_*"]}]});var n=[],i=[];if(e.sort&&(d.each(e.sort,(function(e){d.includes(["ascending","descending"],e.direction)&&(d.includes(["time","age"],e.field[0])&&i.push(e),"frequency"===e.field[0]&&n.push(e))})),i.length&&!n.length&&(t.orderBy=d.filter(d.map(i,(function(e){return"time"===e.field[0]?{field:s.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===e.direction?"ASC":"DESC"}:"age"===e.field[0]?{field:s.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===e.direction?"DESC":"ASC"}:void 0}))))),e.pick&&e.pick.field){var r=s.convertFieldKeyPathFromSpecV0_2(e.pick.field);if(e.reduce&&d.includes(["avg","max","min","sum"],e.reduce.aggregator))return d.extend(t,{aggregate:[{op:e.reduce.aggregator,args:[{field:r}]}],select:[{field:[c.generateAlias(e.reduce.aggregator,r)]}]});t=n.length?d.extend(t,{groupBy:[{field:r}],aggregate:[{op:"count",args:[{field:["*"]}]}],orderBy:[{field:["_count_*"],direction:"ascending"===n[0].direction?"ASC":"DESC"}],select:[{field:[r.join(".")]}]}):d.extend(t,{select:[{field:r}]})}if(e.reduce&&"nth"===e.reduce.aggregator){var o=e.reduce.n;if(d.isNumber(o)&&o>=0&&Number(o)===Math.floor(Number(o)))return d.extend(t,{offset:o,limit:1})}return t},s.convertFieldKeyPathFromSpecV0_2=function(e){return"tags"===e[0]&&"revenue"===e[1]?["r"]:[u.FIELDS_V0_2[e[0]]].concat(e.slice(1))},s.FieldPurpose={FILTER:"filter",SORT:"sort",PICK:"pick"},s.validateFieldKeyPathV0_2=function(e,t){var n="field "+(f.stringify(e)||String(e));if(!d.isArray(e)||!d.every(e,d.isString))return n+" is not an array of strings";if("tags"===e[0]&&e.length>2||"tags"!==e[0]&&e.length>1)return n+" includes too many strings";if("tags"===e[0]&&e.length<2)return n+" does not specify an exact tag";if(e.length<1)return n+" does not specify a top-level field";var i=d.keys(u.FIELDS_V0_2),r=["age","frequency"];return t===s.FieldPurpose.FILTER&&(i.push("age"),r=["frequency"]),t===s.FieldPurpose.SORT&&(i=["time","age","frequency"],r=["name","type","category","tags"]),d.includes(r,e[0])?n+" is not supported here":d.includes(i,e[0])?void 0:n+" is unknown";
},s.validateComparatorAndValue=function(e,t){var n="comparator "+(f.stringify(e)||String(e)),i="value "+(f.stringify(t)||String(t));if(!d.isString(e)&&!d.isUndefined(e))return n+" is not a string";switch(e){case void 0:case"eq":case"is":case"contains":break;case"lt":case"gt":case"lte":case"gte":if(!d.isNumber(t))return i+" is not a number (mandated by "+n+")";break;case"in":if(!d.isArray(t))return i+" is not an array (mandated by "+n+")";break;case"between":if(!(d.isArray(t)&&2===t.length&&d.isNumber(t[0])&&d.isNumber(t[1])&&t[0]<=t[1]))return i+" is not a pair of increasing numbers (mandated by "+n+")";break;case"regex":if(!(d.isString(t)||d.isArray(t)&&2===t.length&&d.isString(t[0])&&d.isString(t[1])))return i+" is not a pattern string or a [pattern string, flags string] array (mandated by "+n+")";break;case"exists":if(!d.isUndefined(t))return i+" is not undefined (mandated by "+n+")";break;default:return n+" is unknown"}}}),(function(e,t,n){var i=n(8),r=n(12),a=n(11),o=a.log.bind(a),s=n(14),u=n(54).getFieldValue,c=n(18),l=t;l.getValueOrDefault=function(e,t,n){if(e.getValueOrDefault)return e.getValueOrDefault(t,n);var i=u(e,t);return"undefined"==typeof i&&(i=n),i},l.maybeTrimLowerCase=function(e){return"string"==typeof e?e.trim().toLowerCase():e},l.clause={WHERE:"where",GROUP_BY:"groupBy",AGGREGATE:"aggregate",HAVING:"having",ORDER_BY:"orderBy",SELECT:"select",OFFSET:"offset",LIMIT:"limit",FROM:"from"},l.DEFAULT_FIELD=["*"],l.booleanOperators={eq:function(e){var t=i.map(e,l.maybeTrimLowerCase);return t[0]==t[1]},is:function(e){return e[0]===e[1]},gt:function(e){return e[0]>e[1]},lt:function(e){return e[0]<e[1]},gte:function(e){return e[0]>=e[1]},lte:function(e){return e[0]<=e[1]},in:function(e){var t=i.map(e[1]||[],l.maybeTrimLowerCase);return i.includes(t,l.maybeTrimLowerCase(e[0]))},between:function(e){return e[1]<=e[0]&&e[0]<=e[2]},contains:function(e){var t=i.map(e,(function(e){return"string"==typeof e?e.toLowerCase():e}));return(t[0]||"").indexOf(t[1])!==-1},regex:function(e){try{var t,n;return i.isString(e[1])?(t=e[1],n="i"):(t=e[1][0]||"",n=e[1][1]||""),new RegExp(t,n).test(e[0])}catch(e){return a.error("Rules",'In operator "regex", error: '+(e.message||"invalid RegExp /"+[t,n].join("/"))),!1}},exists:function(e){return"undefined"!=typeof e[0]},and:function(e){return i.every(e,(function(e){return e}))},or:function(e){return i.some(e,(function(e){return e}))},not:function(e){return!e[0]}},l.arithmeticOperators={"+":function(e){return(e[0]||0)+(e[1]||0)},"-":function(e){return(e[0]||0)-(e[1]||0)},"/":function(e){return(e[0]||0)/(e[1]||1)},"%":function(e){return(e[0]||0)%(e[1]||1)}},l.aggregateOperators={sum:function(e,t){for(var n=e[0]||l.DEFAULT_FIELD,i=0,r=0;r<t.length;r++)i+=l.getValueOrDefault(t[r],n,0);return i},avg:function(e,t){if(0===t.length)return 0;for(var n=e[0]||l.DEFAULT_FIELD,i=0,r=0;r<t.length;r++)i+=l.getValueOrDefault(t[r],n,0);return i/t.length},max:function(e,t){for(var n=e[0]||l.DEFAULT_FIELD,i=Number.NEGATIVE_INFINITY,r=0;r<t.length;r++)i=Math.max(i,l.getValueOrDefault(t[r],n,Number.NEGATIVE_INFINITY));return i},min:function(e,t){for(var n=e[0]||l.DEFAULT_FIELD,i=Number.POSITIVE_INFINITY,r=0;r<t.length;r++)i=Math.min(i,l.getValueOrDefault(t[r],n,Number.POSITIVE_INFINITY));return i},count:function(e,t){return t.length}},l.functions={now:function(){return s.now()}},l.getScalarOperator=function(e){return e in l.booleanOperators?l.booleanOperators[e]:e in l.arithmeticOperators?l.arithmeticOperators[e]:null},l.operate=function(e,t){if(t.hasOwnProperty("value"))return t.value;if(t.hasOwnProperty("field"))return l.getValueOrDefault(e,t.field);if(t.hasOwnProperty("eval"))return t.eval in l.functions?l.functions[t.eval]():void a.error("Rules","Unknown function: "+t.eval);if(!t.op)return void a.error("Rules","No operator specified: "+c.stringify(t));var n=l.getScalarOperator(t.op);if(!n)return void a.error("Rules","Unknown operator: "+t.op);var r=i.partial(l.operate,e),o=t.args||[],s=i.map(o,(function(e){return r(e)}));return n(s,e)},l.groupBy=function(e,t){var n={};if("undefined"==typeof e||!i.isArray(e)||0===e.length)return n["*"]={fieldValues:{},events:t},n;for(var r=i.map(e,(function(e){return e.field})),a=0;a<t.length;a++){for(var o=t[a],s=[],u={},d=0;d<r.length;d++){var f=r[d],g=l.getValueOrDefault(o,f),p=f.join(".");u[p]=g,s.push(encodeURIComponent(p)+"="+encodeURIComponent(c.stringify(g)))}var v=s.join("&");n.hasOwnProperty(v)||(n[v]={fieldValues:u,events:[]}),n[v].events.push(o)}return n},l.generateAlias=function(e,t){return"_"+e+"_"+t.join(".")},l.aggregate=function(e,t){var n={};return i.each(t,(function(t,i){n[i]={};for(var r=0;r<e.length;r++){var o=e[r],s=o.op;if(s in l.aggregateOperators){var u=(o.args&&o.args[0]||{}).field||l.DEFAULT_FIELD,c=l.generateAlias(s,u),d=l.aggregateOperators[s]([u],t.events);n[i][c]=d}else a.error("Rules","Unknown aggregate operator "+s)}})),n},l.project=function(e,t){var n=[];return i.each(e,(function(e,r){var a=i.extend({},e.fieldValues),o=t[r]||{};i.extend(a,o),n.push(a)})),n},l.orderBy=function(e,t){return i.isArray(e)?0===e.length?t:t.sort((function(t,n){for(var i=0;i<e.length;i++){var r=e[i],a=r.direction||"ASC",o="ASC"===a?1:-1,s=r.field,u=l.getValueOrDefault(t,s,0),c=l.getValueOrDefault(n,s,0);if(u<c)return-o;if(u>c)return o}return 0})):(o("Rules","groupBy rule must be an array"),t)},l.rewrite=function(e){function t(e,o){if(i.isArray(e)&&("and"!==e[0]&&"or"!==e[0]&&"not"!==e[0]&&a.error("Rules","Unexpected operation "+e[0]+". Continuing optimistically."),e={op:e[0],args:e.slice(1)}),e.hasOwnProperty("field")||e.hasOwnProperty("value")||e.hasOwnProperty("eval"))return e;if(o&&e.op in l.aggregateOperators){var s=(e.args&&e.args[0]||{}).field||l.DEFAULT_FIELD,u=l.generateAlias(e.op,s);return u in r||(n.push({op:e.op,args:e.args}),r[u]=!0),{field:[u]}}for(var c=[],d=e.args||[],f=0;f<d.length;f++)c[f]=t(d[f],o);return{op:e.op,args:c}}var n=[],r={},o={};e.hasOwnProperty(l.clause.WHERE)&&(o[l.clause.WHERE]=t(e[l.clause.WHERE],!1)),e.hasOwnProperty(l.clause.HAVING)&&(o[l.clause.HAVING]=t(e[l.clause.HAVING],!0)),(e.hasOwnProperty(l.clause.AGGREGATE)||n.length>0)&&(o[l.clause.AGGREGATE]=(e[l.clause.AGGREGATE]||[]).concat(n));for(var s=[l.clause.GROUP_BY,l.clause.ORDER_BY,l.clause.SELECT,l.clause.OFFSET,l.clause.LIMIT],u=0;u<s.length;u++)e.hasOwnProperty(s[u])&&(o[s[u]]=e[s[u]]);return e.hasOwnProperty(l.clause.FROM)&&(o[l.clause.FROM]=l.rewrite(e[l.clause.FROM])),o},l.verify=function(e,t){t=t||0;var n=[];if(e.hasOwnProperty(l.clause.WHERE)?e[l.clause.WHERE].op?e[l.clause.WHERE].op in l.booleanOperators||n.push("Non-boolean WHERE clause operator"):n.push("Missing WHERE clause operator"):n.push("Missing WHERE clause"),e.hasOwnProperty(l.clause.HAVING)&&(e[l.clause.HAVING].op?e[l.clause.HAVING].op in l.booleanOperators||n.push("Non-boolean HAVING clause operator"):n.push("Missing HAVING clause operator")),e.hasOwnProperty(l.clause.GROUP_BY)&&!e.hasOwnProperty(l.clause.AGGREGATE)&&n.push("No AGGREGATE clause specified with GROUP_BY clause"),e.hasOwnProperty(l.clause.SELECT)){var r=e[l.clause.SELECT];if(i.isArray(r))for(var a=0;a<r.length;a++)r[a].op&&r[a].op in l.aggregateOperators&&n.push('In SELECT clause, aggregate operator "'+r[a].op+'" specified in selector at index '+a);else n.push("SELECT clause must be an array")}if(e.hasOwnProperty(l.clause.OFFSET)){var o=e[l.clause.OFFSET];(!i.isNumber(o)||Number(o)<0||Number(o)!==Math.floor(Number(o)))&&n.push("OFFSET must be a non-negative integer")}if(e.hasOwnProperty(l.clause.LIMIT)){var s=e[l.clause.LIMIT];(!i.isNumber(s)||Number(s)<0||Number(s)!==Math.floor(Number(s)))&&n.push("LIMIT must be a non-negative integer")}return t>0&&(n=i.map(n,(function(e){return"Sub-rule "+t+": "+e}))),e.hasOwnProperty(l.clause.FROM)&&(n=n.concat(l.verify(e[l.clause.FROM],t+1))),n},l.select=function(e,t){return i.map(t,(function(t){return i.map(e,(function(e){return l.operate(t,e)}))}))},l.executeRecursively=function(e,t){var n=t;if(e.hasOwnProperty(l.clause.FROM)&&(a.debug("Evaluating FROM clause:",e[l.clause.FROM]),n=l.executeRecursively(e[l.clause.FROM],n),a.debug("Results after FROM:",n)),a.debug("Evaluating WHERE clause:",e[l.clause.WHERE]),n=i.filter(n,(function(t){return l.operate(t,e[l.clause.WHERE])})),a.debug("Results after WHERE:",n),e.hasOwnProperty(l.clause.AGGREGATE)){a.debug("Evaluating AGGREGATE clause:",e[l.clause.AGGREGATE]);var r=l.groupBy(e[l.clause.GROUP_BY],n),o=l.aggregate(e[l.clause.AGGREGATE],r);n=l.project(r,o),a.debug("Results after AGGREGATE:",n)}e.hasOwnProperty(l.clause.HAVING)&&(a.debug("Evaluating HAVING clause:",e[l.clause.HAVING]),n=i.filter(n,(function(t){return l.operate(t,e[l.clause.HAVING])})),a.debug("Results after HAVING:",n)),e.hasOwnProperty(l.clause.ORDER_BY)&&(a.debug("Evaluating ORDER_BY clause:",e[l.clause.ORDER_BY]),n=l.orderBy(e[l.clause.ORDER_BY],n),a.debug("Results after ORDER_BY:",n));var s=0;e.hasOwnProperty(l.clause.OFFSET)&&(a.debug("Evaluating OFFSET clause:",e[l.clause.OFFSET]),s=Number(e[l.clause.OFFSET]));var u;return e.hasOwnProperty(l.clause.LIMIT)&&(a.debug("Evaluating LIMIT clause:",e[l.clause.LIMIT]),u=s+Number(e[l.clause.LIMIT])),(s>0||!i.isUndefined(u))&&(n=n.slice(s,u),a.debug("Results after OFFSET/LIMIT:",n)),e.hasOwnProperty(l.clause.SELECT)&&(a.debug("Evaluating SELECT clause:",e[l.clause.SELECT]),n=l.select(e[l.clause.SELECT],n),a.debug("Results after SELECT:",n)),n},l.execute=function(e,t){e=l.rewrite(e),a.shouldLog(r.LogLevel.DEBUG)&&a.groupCollapsed("Evaluating Behavioral Rule"),a.debug("Rule:",e,c.stringify(e)),a.debug("Events:",t);var n=l.verify(e);if(n.length>0)throw new Error("Rule "+c.stringify(e)+" has violations: "+n.join("\n"));var i=l.executeRecursively(e,t);return a.debug("Rule result:",i),a.shouldLog(r.LogLevel.DEBUG)&&a.groupEnd(),i},l.isSatisfied=function(e,t){try{return l.execute(e,t).length>0}catch(t){return a.error("Rules","Error "+t.toString()+" while evaluating rule "+c.stringify(e)),!1}}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(133))}}),(function(e,t,n){var i=n(134),r=n(128),a=n(130),o=n(8),s=n(18);e.exports={provides:"customBehavior",shouldTrack:!0,isLazy:!1,getter:["stores/global","stores/visitor_attribute_entity","stores/visitor_events","stores/visitor",function(e,t,n){var u=e.getProjectId(),c=o.filter(o.map(t.getCustomBehavioralAttributes(u),(function(e){try{return{id:e.id,granularity:i.GRANULARITY.ALL,rule:a.buildFromSpecV0_2(s.parse(e.rule_json))}}catch(e){return}}))),l=r.getEvents(n);return i.evaluate(c,l)}]}}),(function(e,t,n){function i(e){if(0===e.length)return[];for(var t=e.length-1,n=o.FIELDS.SESSION_ID,i=e[t][n];t>0&&i===e[t-1][n];)t--;return e.slice(t)}function r(e,t){if(0===e.length||t<=0)return[];var n=+new Date-t*u.MILLIS_IN_A_DAY;n-=n%u.MILLIS_IN_A_DAY;for(var i=e.length;i>0&&n<=e[i-1][o.FIELDS.TIME];)i--;return e.slice(i)}var a=n(11),o={FIELDS:n(51).FIELDS},s=n(131),u=n(130);t.GRANULARITY={ALL:"all",CURRENT_SESSION:"current_session",LAST_30_DAYS:"last_30_days",LAST_60_DAYS:"last_60_days"},t.evaluate=function(e,n){var o={};if(0===n.length){for(var u=0;u<e.length;u++)o[e[u].id]=e[u].defaultValue;return o}var c=i(n),l=r(n,60);for(u=0;u<e.length;u++){var d=e[u],f=n;d.granularity===t.GRANULARITY.CURRENT_SESSION?f=c:d.granularity===t.GRANULARITY.LAST_60_DAYS&&(f=l);try{var g=f;d.rule&&(g=s.execute(d.rule,f)),o[d.id]=d.defaultValue,1===g.length?o[d.id]=g[0][0]||d.defaultValue:a.debug("Behavior / Rule for",d.id,"returned",g.length,"results, expected 1")}catch(e){a.error("Behavior / Rule for",d.id,"failed with",e.message||"")}}return o}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(136)),e.registerAudienceMatcher("first_session",n(137))}}),(function(e,t,n){var i=n(8),r=n(128),a=n(54).getFieldValue,o=n(51);e.exports={provides:"first_session",shouldTrack:!0,getter:["stores/visitor_events",function(e){var t=r.getEvents(e);if(t&&t.length>0){var n=a(t[0],[o.FIELDS.SESSION_ID]);return i.every(t,(function(e){return e[o.FIELDS.SESSION_ID]===n}))}return!0}]}}),(function(e,t){e.exports={fieldsNeeded:["first_session"],match:function(e){return!!e.first_session}}}),(function(e,t,n){e.exports=function(e){e.registerApiModule("behavior",n(139))}}),(function(e,t,n){function i(e,t){var n=d.buildFromSpecV0_1(t);if(1!==n.length)throw new Error("Invalid query descriptor; verify that no aggregators are specified");return f.execute(n[0],e)}function r(e,t){return c.map(e,(function(e){return c.isFunction(e.toObject)?e.toObject(t):e}))}function a(e,t){if(!e)return["Descriptor not defined"];var n=[];return e.count&&n.push('Unexpected "count" clause specified'),e.pick&&e.pick.modifier&&t.indexOf(e.pick.modifier)===-1&&n.push('Invalid "pick" modifier "'+e.pick.modifier+'"'),c.each(e.filters,(function(e){c.isUndefined(e.modifier)||n.push('Unexpected "filter" modifier "'+e.modifier+'"')})),n.length>0?n:void 0}function o(e,t){var n,o={revenueAsTag:!1,timeAsTimestamp:!0};if(c.isUndefined(t))return n=l.getEvents(e),r(n,o);if(c.isNumber(t)){if(t<=0)throw new Error("Count must be a positive integer, got "+t);return n=l.getEvents(e),r(n.slice(-t),o)}var s=a(t,c.values(d.RECENCY_FILTERS));if(s)throw new Error(s.join("\n"));return n=l.getEvents(e),r(i(n,t),o)}function s(e,t){if(t=c.cloneDeep(t)||{},!t.pick)throw new Error('No "pick" clause provided in query descriptor');if(!t.pick.name)throw new Error('No field name provided in "pick" clause');t.pick.modifier=t.pick.modifier||d.FREQUENCY_FILTERS.MOST_FREQUENT;var n=a(t,c.values(d.FREQUENCY_FILTERS));if(n)throw new Error(n.join("\n"));var r=l.getEvents(e);return i(r,t)}function u(e,t){var n=d.buildFromSpecV0_2(t),i=l.getEvents(e),a=r(f.execute(n,i),{revenueAsTag:!0,timeAsTimestamp:!1});return(t.pick||t.reduce&&"count"===t.reduce.aggregator)&&(a=c.flatten(a)),t.reduce&&(a=a[0]),a}var c=n(8),l=n(128),d=n(130),f=n(131);e.exports=["stores/visitor_events",function(e){return{getEvents:c.partial(o,e),getByFrequency:c.partial(s,e),query:c.partial(u,e)}}]}),(function(e,t,n){e.exports=function(e){e.registerDependency("sources/browser_id",n(141)),e.registerVisitorProfileProvider(n(145)),e.registerVisitorProfileProvider(n(146)),e.registerAudienceMatcher("browser_version",n(147))}}),(function(e,t,n){var i=n(142),r=n(16);t.getId=function(){return i.parseUA(r.getUserAgent()).browser.id},t.getVersion=function(){return i.parseUA(r.getUserAgent()).browser.version}}),(function(e,t,n){var i=n(143),r=n(8);t.parseUA=function(e){var t=new i(e),n=t.getBrowser(),r=t.getOS(),c=t.getDevice(),l=s(c),d=u(r.name),f=o(c.type,l,d);return{browser:{id:a(n.name),version:n.version},platform:{id:d,version:r.version},device:{id:l,type:c.type||(f?"mobile":"desktop"),isMobile:f}}};var a=function(e){if(e=(e||"").toLowerCase(),e in c)return e;var t=function(t){return t.toLowerCase()===e};for(var n in c)if(r.some(c[n]||[],t))return n;return"unknown"},o=function(e,t,n){if(r.includes(["mobile","tablet"],e))return!0;if(t&&"unknown"!==t)for(var i in l)if(t===l[i])return!0;var a=["android","blackberry","ios","windows phone"];return!!r.includes(a,n)},s=function(e){return e.model in l?l[e.model]:e.type||"unknown"},u=function(e){return(e||"unknown").toLowerCase()},c={gc:["Chrome","chromium","silk","yandex","maxthon"],edge:["Edge"],ie:["Internet Explorer","iemobile"],ff:["Firefox","iceweasel"],opera:["Opera","opera mini","opera tablet"],safari:["Safari","mobile safari","webkit"],ucbrowser:["UC Browser"]},l={iPhone:"iphone",iPad:"ipad"}}),(function(e,t,n){var i;!(function(r,a){"use strict";var o="0.7.9",s="",u="?",c="function",l="undefined",d="object",f="string",g="major",p="model",v="name",h="type",_="vendor",E="version",m="architecture",I="console",y="mobile",S="tablet",A="smarttv",T="wearable",w="embedded",D={extend:function(e,t){for(var n in t)"browser cpu device engine os".indexOf(n)!==-1&&t[n].length%2===0&&(e[n]=t[n].concat(e[n]));return e},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===f?e.split(".")[0]:a}},b={rgx:function(){for(var e,t,n,i,r,o,s,u=0,f=arguments;u<f.length&&!o;){var g=f[u],p=f[u+1];if(typeof e===l){e={};for(i in p)r=p[i],typeof r===d?e[r[0]]=a:e[r]=a}for(t=n=0;t<g.length&&!o;)if(o=g[t++].exec(this.getUA()))for(i=0;i<p.length;i++)s=o[++n],r=p[i],typeof r===d&&r.length>0?2==r.length?typeof r[1]==c?e[r[0]]=r[1].call(this,s):e[r[0]]=r[1]:3==r.length?typeof r[1]!==c||r[1].exec&&r[1].test?e[r[0]]=s?s.replace(r[1],r[2]):a:e[r[0]]=s?r[1].call(this,s,r[2]):a:4==r.length&&(e[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):a):e[r]=s?s:a;u+=2}return e},str:function(e,t){for(var n in t)if(typeof t[n]===d&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(D.has(t[n][i],e))return n===u?a:n}else if(D.has(t[n],e))return n===u?a:n;return e}},O={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},R={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[v,E],[/\s(opr)\/([\w\.]+)/i],[[v,"Opera"],E],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\/([\w\.-]+)/i],[v,E],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[v,"IE"],E],[/(edge)\/((\d+)?[\w\.]+)/i],[v,E],[/(yabrowser)\/([\w\.]+)/i],[[v,"Yandex"],E],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],E],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[v,E],[/(dolfin)\/([\w\.]+)/i],[[v,"Dolphin"],E],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[v,"Chrome"],E],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[E,[v,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[E,[v,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[E,[v,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[E,[v,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[E,v],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[v,[E,b.str,O.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[v,E],[/(navigator|netscape)\/([\w\.-]+)/i],[[v,"Netscape"],E],[/fxios\/([\w\.-]+)/i],[E,[v,"Firefox"]],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[v,E]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,D.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",D.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[m,D.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[p,_,[h,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[p,[_,"Apple"],[h,S]],[/(apple\s{0,1}tv)/i],[[p,"Apple TV"],[_,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[_,p,[h,S]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[p,[_,"Amazon"],[h,S]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[p,b.str,O.device.amazon.model],[_,"Amazon"],[h,y]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[p,_,[h,y]],[/\((ip[honed|\s\w*]+);/i],[p,[_,"Apple"],[h,y]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[_,p,[h,y]],[/\(bb10;\s(\w+)/i],[p,[_,"BlackBerry"],[h,y]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[p,[_,"Asus"],[h,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[_,"Sony"],[p,"Xperia Tablet"],[h,S]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[_,"Sony"],[p,"Xperia Phone"],[h,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[_,p,[h,I]],[/android.+;\s(shield)\sbuild/i],[p,[_,"Nvidia"],[h,I]],[/(playstation\s[3portablevi]+)/i],[p,[_,"Sony"],[h,I]],[/(sprint\s(\w+))/i],[[_,b.str,O.device.sprint.vendor],[p,b.str,O.device.sprint.model],[h,y]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[_,p,[h,S]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[_,[p,/_/g," "],[h,y]],[/(nexus\s9)/i],[p,[_,"HTC"],[h,S]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[p,[_,"Microsoft"],[h,I]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[_,"Microsoft"],[h,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[p,[_,"Motorola"],[h,y]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[p,[_,"Motorola"],[h,S]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[_,"Samsung"],p,[h,S]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[_,"Samsung"],p,[h,y]],[/(samsung);smarttv/i],[_,p,[h,A]],[/\(dtv[\);].+(aquos)/i],[p,[_,"Sharp"],[h,A]],[/sie-(\w+)*/i],[p,[_,"Siemens"],[h,y]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[_,"Nokia"],p,[h,y]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[p,[_,"Acer"],[h,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[_,"LG"],p,[h,S]],[/(lg) netcast\.tv/i],[_,p,[h,A]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[p,[_,"LG"],[h,y]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[p,[_,"Lenovo"],[h,S]],[/linux;.+((jolla));/i],[_,p,[h,y]],[/((pebble))app\/[\d\.]+\s/i],[_,p,[h,T]],[/android.+;\s(glass)\s\d/i],[p,[_,"Google"],[h,T]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[p,/_/g," "],[_,"Xiaomi"],[h,y]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[h,D.lowerize],_,p]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[E,[v,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[v,E],[/rv\:([\w\.]+).*(gecko)/i],[E,v]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[v,E],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[v,[E,b.str,O.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[v,"Windows"],[E,b.str,O.os.windows.version]],[/\((bb)(10);/i],[[v,"BlackBerry"],E],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[v,E],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[v,"Symbian"],E],[/\((series40);/i],[v],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[v,"Firefox OS"],E],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[v,E],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[v,"Chromium OS"],E],[/(sunos)\s?([\w\.]+\d)*/i],[[v,"Solaris"],E],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[v,E],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[v,"iOS"],[E,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[v,"Mac OS"],[E,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[v,E]]},L=function(e,t){if(!(this instanceof L))return new L(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:s),i=t?D.extend(R,t):R;return this.getBrowser=function(){var e=b.rgx.apply(this,i.browser);return e.major=D.major(e.version),e},this.getCPU=function(){return b.rgx.apply(this,i.cpu)},this.getDevice=function(){return b.rgx.apply(this,i.device)},this.getEngine=function(){return b.rgx.apply(this,i.engine)},this.getOS=function(){return b.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this.setUA(n),this};L.VERSION=o,L.BROWSER={NAME:v,MAJOR:g,VERSION:E},L.CPU={ARCHITECTURE:m},L.DEVICE={MODEL:p,VENDOR:_,TYPE:h,CONSOLE:I,MOBILE:y,SMARTTV:A,TABLET:S,WEARABLE:T,EMBEDDED:w},L.ENGINE={NAME:v,VERSION:E},L.OS={NAME:v,VERSION:E},typeof t!==l?(typeof e!==l&&e.exports&&(t=e.exports=L),t.UAParser=L):"function"===c&&n(144)?(i=function(){return L}.call(t,n,t,e),!(i!==a&&(e.exports=i))):r.UAParser=L;var N=r.jQuery||r.Zepto;if(typeof N!==l){var P=new L;N.ua=P.getResult(),N.ua.get=function(){return P.getUA()},N.ua.set=function(e){P.setUA(e);var t=P.getResult();for(var n in t)N.ua[n]=t[n]}}})("object"==typeof window?window:this)}),(function(e,t){(function(t){e.exports=t}).call(t,{})}),(function(e,t){e.exports={provides:"browserId",shouldTrack:!0,getter:["sources/browser_id",function(e){return e.getId()}]}}),(function(e,t){e.exports={provides:"browserVersion",getter:["sources/browser_id",function(e){return e.getVersion()}]}}),(function(e,t,n){var i=n(148).compareVersion;e.exports={fieldsNeeded:["browserVersion","browserId"],match:function(e,t){var n=t.value,r=e.browserId,a=e.browserVersion;if(0===n.indexOf(r)){var o=n.substr(r.length);return 0===i(a,o)}return!1}}}),(function(e,t,n){var i=n(8);t.compareVersion=function(e,t){if(!t)return 0;for(var n=t.toString().split("."),r=e.toString().split("."),a=0;a<n.length;a++){if(i.isUndefined(r[a]))return-1;if(isNaN(Number(r[a]))){if(r[a]!==n[a])return-1}else{if(Number(r[a])<Number(n[a]))return-1;if(Number(r[a])>Number(n[a]))return 1}}return 0}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(150)),e.registerAudienceMatcher("campaign",n(151))}}),(function(e,t,n){var i=n(70);e.exports={provides:"campaign",shouldTrack:!0,isSticky:!0,getter:[function(){return i.getQueryParamValue("utm_campaign")}]}}),(function(e,t,n){var i=n(152);e.exports={fieldsNeeded:["campaign"],match:function(e,t){return i.hasMatch(t.value,t.match,e.campaign)}}}),(function(e,t,n){var i=n(8);t.hasMatch=function(e,t,n){var r=!i.isUndefined(n)&&null!==n,a=!i.isUndefined(e)&&null!==e,o=t||(a?"exact":"exists");switch(o){case"exists":return r;case"exact":return r&&String(n)===e;case"substring":return r&&String(n).indexOf(e)>-1;case"regex":try{if(a&&r){var s=new RegExp(e);return s.test(String(n))}return!1}catch(e){}return!1;case"range":var u=e.split(":"),c=parseFloat(u[0]),l=parseFloat(u[1]),d=parseFloat(n);return d>=c&&d<=l;default:return!1}}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(154));var t=n(155);e.registerAudienceMatcher("custom_attribute",t),e.registerAudienceMatcher("custom_dimension",t)}}),(function(e,t,n){var i=n(8),r=n(11),a=n(12),o=n(19),s=o.get("stores/dimension_data");e.exports={provides:"custom",attributionType:a.AttributionTypes.LAST_TOUCH,restorer:function(e){return i.reduce(e,(function(e,t,n){var a=t;if(!i.isObject(t)){var o=s.getById(n)||s.getByApiName(n);o?a={id:o.segmentId||o.id,value:t}:r.warn("Unable to determine ID for custom attribute:",n,"; segmentation is disabled.")}return e[n]=a,e}),{})},shouldTrack:!0}}),(function(e,t,n){var i=n(8),r=n(152);t.match=function(e,t){var n;return e.custom&&(n=e.custom[t.name]),i.isObject(n)&&(n=n.value),r.hasMatch(t.value,t.match,n)}}),(function(e,t,n){e.exports=function(e){e.registerDependency("sources/device",n(157)),e.registerVisitorProfileProvider(n(158)),e.registerAudienceMatcher("device",n(159))}}),(function(e,t,n){var i=n(142),r=n(16);t.getDevice=function(){var e=i.parseUA(r.getUserAgent()).device;return"unknown"!==e.id?e.id:"tablet"===e.type?"tablet":e.isMobile?"mobile":"desktop"}}),(function(e,t){e.exports={provides:"device",shouldTrack:!0,getter:["sources/device",function(e){return e.getDevice()}]}}),(function(e,t){e.exports={fieldsNeeded:["device"],match:function(e,t){return e.device===t.value}}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(161)),e.registerAudienceMatcher("referrer",n(162))}}),(function(e,t,n){var i=n(65);e.exports={provides:"referrer",shouldTrack:!0,isSticky:!0,getter:["stores/global_state",function(e){var t=e.getEffectiveReferrer()||i.getReferrer();return""===t&&(t=null),t}]}}),(function(e,t,n){var i=n(163);t.fieldsNeeded=["referrer"],t.match=function(e,t){return null!==e.referrer&&i(e.referrer,t)}}),(function(e,t,n){function i(e){var t=e.indexOf("?");return t!==-1&&(e=e.substring(0,t)),t=e.indexOf("#"),t!==-1&&(e=e.substring(0,t)),e}function r(e){return a(i(e))}function a(e,t){e=e.replace("/?","?"),e=e.toLowerCase().replace(/[\/&?]+$/,"");var n=l.slice(0);t||(n=n.concat(u));for(var i=n.length,r=0;r<i;r++){var a=n[r],o=new RegExp("^"+a);e=e.replace(o,"")}return e}function o(e){var t=e.split("?");if(t[1]){var n=t[1].split("&"),i=[];return s.each(n,(function(e){0!==e.indexOf(c)&&i.push(e)})),t[1]=i.join("&"),t.join("?")}return e}var s=n(8);e.exports=function(e,t){switch(e=o(e),t.match){case"exact":return e=a(e),e===a(t.value);case"regex":try{return Boolean(e.match(t.value))}catch(e){}return!1;case"simple":return e=r(e),t.value=r(t.value),e===t.value;case"substring":return e=a(e,!0),t.value=a(t.value,!0),e.indexOf(t.value)!==-1;default:return!1}};var u=["www."],c="optimizely_",l=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"]}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(165)),e.registerAudienceMatcher("source_type",n(167))}}),(function(e,t,n){var i=n(166),r=n(65),a=n(70),o=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","https://(www)?\\.google\\..*?/$","bing\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","yahoo\\.\\w{2,3}(\\.\\w{2,3})?/search","baidu\\.\\w{2,3}(\\.\\w{2,3})?/s?"];e.exports={provides:"source_type",shouldTrack:!0,isSticky:!1,getter:["stores/global_state",function(e){return function(t,n){var s=function(){if(a.getQueryParamValue("utm_source")||a.getQueryParamValue("gclid")||a.getQueryParamValue("otm_source"))return"campaign";for(var t=e.getEffectiveReferrer()||r.getReferrer(),n=0;n<o.length;n++){var s=o[n],u=t.match(s);if(u)return"search"}return t&&i.getDomain(t)!==i.getDomain(a.getUrl())?"referral":"direct"},u=function(e,t){return!e||"direct"!==t},c=t(),l=s();u(c,l)&&n(l)}}]}}),(function(e,t){t.getDomain=function(e){if(!e)return"";try{return e.match(/:\/\/(?:www[0-9]?\.)?(.[^\/:]+)/)[1]}catch(e){return""}}}),(function(e,t,n){var i=n(152);t.fieldsNeeded=["source_type"],t.match=function(e,t){return i.hasMatch(t.value,t.match,e.source_type)}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(169)),e.registerVisitorProfileProvider(n(170)),e.registerAudienceMatcher("time_and_day",n(171))}}),(function(e,t,n){var i=n(14);e.exports={provides:"currentTimestamp",shouldTrack:!0,isLazy:!0,getter:[function(){return i.now()}]}}),(function(e,t){e.exports={provides:"offset",shouldTrack:!0,isLazy:!0,getter:[function(){return(new Date).getTimezoneOffset()}]}}),(function(e,t,n){
var i=n(172);t.fieldsNeeded=["currentTimestamp"],t.match=function(e,t){return i.test(t.value,new Date(e.currentTimestamp))}}),(function(e,t,n){function i(e){var t=e.split(o);if(3!==t.length)throw new Error("Invalid time and day string "+e);var n=t[2].split(s);return{start_time:t[0],end_time:t[1],days:n}}function r(e){var t=e.split(u);if(2!==t.length)throw new Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+e);return 60*parseInt(t[0],10)+parseInt(t[1],10)}var a=n(8),o="_",s=",",u=":";t.test=function(e,t){var n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],o=i(e),s=r(o.start_time),u=r(o.end_time),c=60*t.getHours()+t.getMinutes(),l=n[t.getDay()];return c>=s&&c<=u&&a.includes(o.days,l)}}),(function(e,t,n){e.exports=function(e){e.registerAnalyticsTracker("avro",n(174))}}),(function(e,t,n){function i(e){var t=_.omit(e,x),n=_.pick(e,x),i=[],r=[];return _.forOwn(t,(function(e,t){var n=p({type:D,name:t,value:e});n&&i.push(n)})),_.forOwn(n,(function(e,t){try{e=h(e),r.push({name:t,value:e})}catch(e){m.emitError(new F("Bad value for eventMetrics["+t+"]: "+e.message))}})),{eventFeatures:i,eventMetrics:r}}function r(e,t){var n=u(e,t),r=i(e.eventTags);return r.eventFeatures.push(p({type:w,name:"",value:e.viewCategory})),_.extend(n,r,{eventEntityId:e.viewId,eventType:b,eventName:e.viewId})}function a(e,t,n){var i=u(e,t),r=e.event.viewId,a=[],o=[];if(a.push(p({type:A,name:"selector",value:e.selector})),a.push(p({type:A,name:"view_id",value:e.event.viewId})),r){var s=n.getActivationEventId(e.event.viewId);s&&o.push({eventId:n.getActivationEventId(e.event.viewId),relationship:M.VIEW_ACTIVATED})}return _.forOwn(e.eventTags,(function(e,t){var n=p({type:D,name:t,value:e},L);n&&a.push(n)})),_.extend(i,{eventEntityId:e.event.id,eventType:e.event.category,eventName:e.event.apiName,eventFeatures:a,relatedEvents:o})}function o(e,t){var n=u(e,t),r=i(e.eventTags);return _.extend(n,r,{eventEntityId:e.eventEntityId,eventType:e.eventCategory,eventName:e.eventApiName})}function s(e,t){var n=u(e,t);return _.extend(n,{eventType:R,eventName:O})}function u(e,t){var n=d(e.userFeatures),i=f(e.activeViewStates,t),r=l(e.layerStates),a=_.isNull(V.getAnonymizeIP())?void 0:V.getAnonymizeIP();return{eventId:e.eventId,anonymizeIP:a,timestamp:e.timestamp,revision:e.revision,clientEngine:e.clientEngine,clientVersion:e.clientVersion,projectId:e.projectId,accountId:e.accountId,activationId:e.activationId,sessionId:e.sessionId,visitorId:e.visitorId,visitorUUID:e.visitorUUID,eventFeatures:[],eventMetrics:[],relatedEvents:[],layerStates:r,userFeatures:n,activeViews:i,isGlobalHoldback:e.isGlobalHoldback}}function c(e){var t=e.decisionTicket,n=e.decision,i=_.map(t.audienceIds,(function(e){return{id:e}})),r=d(e.userFeatures),a=_.isNull(V.getAnonymizeIP())?void 0:V.getAnonymizeIP();return{decisionId:e.decisionId,anonymizeIP:a,timestamp:e.timestamp,revision:e.revision,clientEngine:e.clientEngine,clientVersion:e.clientVersion,projectId:e.projectId,accountId:e.accountId,layerId:n.layerId,activationId:e.activationId,sessionId:e.sessionId,visitorId:k.getRandomId(),visitorUUID:k.getUUID(),decisionTicket:{audiences:i,bucketingId:t.bucketingId},decision:g(n),userFeatures:r,isGlobalHoldback:V.isGlobalHoldback()}}function l(e){return _.map(e,(function(e){var t=null,n=e.decisionTicket;if(n){var i=_.map(n.audienceIds,(function(e){return{id:e}}));t={audiences:i,bucketingId:n.bucketingId}}return{layerId:e.layerId,revision:e.revision,decisionTicket:t,decision:g(e.decision),decisionActivationId:e.decisionActivationId,decisionSessionId:e.decisionSessionId,decisionEventId:e.decisionEventId,decisionTimestamp:e.decisionTimestamp,actionTriggered:e.actionTriggered,actionSessionId:e.actionSessionId,actionActivationId:e.actionActivationId,actionTimestamp:e.actionTimestamp}}))}function d(e){return _.reduce(e,(function(e,t){try{v(t.value),e.push(_.pick(t,["id","type","name","shouldIndex","value"]))}catch(e){L.warn("Error evaluating user feature",t,e)}return e}),[])}function f(e,t){return _.map(e,(function(e){var n=[];try{var i=t.get(e.id);n.push(p({type:w,name:"",value:i.category}))}catch(t){L.error("Unable to find Page category for Page with id",e.id)}return _.forOwn(e.metadata,(function(e,t){var i=p({type:T,name:t,value:e},L);i&&n.push(i)})),{viewId:e.id,activatedTimestamp:e.activatedTimestamp,viewFeatures:n}}))}function g(e){return _.pick(e,["experimentId","variationId","isLayerHoldback"])}function p(e){var t=_.extend({id:null,shouldIndex:!0},e);try{v(e.value)}catch(t){return void L.error("Error evaluating feature:",e,t)}return t}function v(e){if(null==e)throw new Error("Feature value is null");if("object"==typeof e){var t;try{t=N.stringify(e)}catch(e){}throw new Error('Feature value is complex: "'+t||'[object]"')}}function h(e){if(null==e)throw new Error("Metric value is null");if(!_.isNumber(e))throw new Error("Metric value is not numeric");return Math.floor(e)}var _=n(8),E=n(2),m=n(67),I="https://logx.optimizely.com",y=I+"/log/decision",S=I+"/log/event",A="event",T="view_tag",w="view_category",D="tags",b="view_activated",O="client_activation",R="client_activation",L=n(11),N=n(18),P=n(59),C=n(19),V=C.get("stores/global"),k=C.get("stores/visitor_id"),F=t.Error=E("AvroError"),x=["revenue","quantity"],M={VIEW_ACTIVATED:"view_activation"};t.onLayerDecision=[function(){return function(e){var t=c(e);P.retryableRequest({url:y,contentType:"application/json",method:"POST",data:t},t.decisionId)}}],t.onPageActivated=["stores/view_data",function(e){return function(t){var n=r(t,e,L);P.retryableRequest({url:S,contentType:"application/json",method:"POST",data:n},n.eventId)}}],t.onClientActivation=["stores/view_data",function(e){return function(t){var n=s(t,e,L);P.retryableRequest({url:S,contentType:"application/json",method:"POST",data:n},n.eventId)}}],t.onCustomEvent=["stores/view_data",function(e){return function(t){var n=o(t,e);P.retryableRequest({url:S,contentType:"application/json",method:"POST",data:n},n.eventId)}}],t.onClickEvent=["stores/view_data","stores/view",function(e,t){return function(n){var i=a(n,e,t);P.retryableRequest({url:S,contentType:"application/json",method:"POST",data:i},i.eventId)}}]}),(function(e,t,n){e.exports=function(e){e.registerViewProvider(n(176)),e.registerViewMatcher("url",n(177))}}),(function(e,t,n){var i=n(70);e.exports={provides:"url",getter:[function(){return i.getUrl()}]}}),(function(e,t,n){var i=n(163);e.exports={fieldsNeeded:["url"],match:function(e,t){return i(e.url,t)}}})]);
window.optimizely2 = SLAVE_CLIENT.optimizely;

}());

</script>
    <!-- Optimizely End -->

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>André Turetta’s References | Couchsurfing</title>

    <meta name="apple-mobile-web-app-title" content="Couchsurfing">
    <meta name="description" content="Get in touch with André Turetta and 14 million other members when you join Couchsurfing! Couchsurfing is the best place to find local accomodation, meetup with friendly locals, and discover events nearby.
">
    <meta property="og:image" content="https://assets.couchsurfing.com/assets/og_image-8ccf1ee35e2d92ffd20af5021bc34924e37b0e31394d0998704b17249a545e43.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:title" content="André Turetta’s References" />
    <meta name="robots" content="nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="https://assets.couchsurfing.com/assets/logo-square-e2d7f22607e27920605d6656b76c78666b948c4bf638cec31c88aa0605a4f00d.png">
    <!-- TODO: use canonical for featured city pages -->
    
    <link rel="prefetch" href="https://assets.couchsurfing.com/assets/couchsurfing-3d734077068d432fc1d416a53c48d5e9c361183a1182c08dcf021bb135b0c1ef.woff">
    <link rel="shortcut icon" href="https://assets.couchsurfing.com/assets/favicon-3c494547ebeda33dea8d2259a8f2d626103de3e0dc1b1da58fa067b5128eafed.ico" />

    <!-- TODO ensive: rewrite -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>WebFont.load({google: {families: ['Lato:400,700,300:latin,latin-ext']}});</script>

    <!-- TODO ensive: rewrite, combine with bottom statement -->
      <script>
        var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];

        (function() {
          var gads = document.createElement('script'); gads.async = true; gads.type = 'text/javascript';
          gads.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';

          var node = document.getElementsByTagName('script')[0]; node.parentNode.insertBefore(gads, node);
        })();
      </script>


    
    
    	<script>
	  optimizely.push(['setDimensionValue', 'user_id', '2005631397']);
	  optimizely.push(['setDimensionValue', 'account_created_date', '2017-04-10 23:39:05 UTC']);
	  optimizely.push(['setDimensionValue', 'birth_date', '1995-04-15 00:00:00 UTC']);
	  optimizely.push(['setDimensionValue', 'gender', 'male']);
	  optimizely.push(['setDimensionValue', 'has_hosted', 'false']);
	  optimizely.push(['setDimensionValue', 'has_surfed', 'false']);
	  optimizely.push(['setDimensionValue', 'is_verified', 'false']);
	  optimizely.push(['setDimensionValue', 'locale', '']);
	  optimizely.push(['setDimensionValue', 'profile_location', 'Curitiba, State of Paraná BRA']);
	</script>


    <link href="https://assets.couchsurfing.com/assets/couchsurfing/couchsurfing_version_7-8dce6a44fe84507e045842628da15413a327261318e1e114edfcaa2599f30199.css" media="all" rel="stylesheet" />

    <script src="https://assets.couchsurfing.com/assets/couchsurfing/vendor/modernizr-9b40e6952cfd709c82dcf79d9b07a701762a7c13395808057cd6e893820dc45c.js"></script>
    <!--[if lt IE 9]>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/es5-shim/2.0.8/es5-shim.min.js"></script>
    <![endif]-->

    <meta content="authenticity_token" name="csrf-param" />
<meta content="a2CNT5XIB9IsNWr4yhnf2l/+CzlP6yCRNR0sllmKVVQ=" name="csrf-token" />
  </head>

  <body class="user_profiles_references">


      
<!-- TODO: move to the helper or find out another way how to log those events -->

<header class="header">

  <div class="header-wrapper">
    <a data-pjax="true" href="/" title="Couchsurfing">
      <img alt="Couchsurfing" class="header-logo" src="https://assets.couchsurfing.com/assets/logo-orange-58ccd2edda8895d1e1742f7744683e61f2c6fa069290a9ff012ef09d51ea643b.png" title="Couchsurfing" />
</a>

      <ul class="header-nav-buttons-list">
        <li class="header-nav-buttons-list-item mod-space">
          <a href="#"
            class="header-nav-button mod-no-underline mod-search"
            data-toggle="header-search"
            title="Search">
            <span aria-hidden="true" data-icon="&#xe628;"
        class="icon mod-search"></span>
          </a>
        </li>

        <li class="header-nav-buttons-list-item mod-space">
          <a href="#"
            class="header-nav-button mod-no-underline mod-menu"
            data-toggle="header-menu"
            title="Menu">
            <span aria-hidden="true" data-icon="&#xe62c;"
        class="icon mod-side-menu"></span>
          </a>
        </li>
      </ul>


      <nav class="header-nav" data-toggleable="header-menu">
        <ul class="header-nav-links-list">
          <li class="header-nav-links-list-item">
            <a class="header-nav-link" data-toggle-close="true" href="/events">Events</a>
          </li>

          <li class="header-nav-links-list-item">
            <a class="header-nav-link" data-toggle-close="true" href="/groups">Groups</a>
          </li>

          <li class="header-nav-links-list-item">
            <a class="header-nav-link mod-icon mod-inbox" data-toggle-close="true" href="/messages" title="Inbox">
              <span aria-hidden="true" data-icon="&#xe637;"
        class="icon mod-inbox"></span>
</a>          </li>

          <li class="header-nav-links-list-item">
            <a href="#" class="header-nav-link mod-avatar mod-dropdown-arrow" data-toggle="header-submenu">
              <img alt="Menu" class="mod-round" src="https://tcdn.couchsurfing.com/_BA5QbwEuOVerKa3--MgMnk3Guw=/40x40/smart/https://ht-cdn.couchsurfing.com/assets/profile-picture-placeholder.png" title="Menu" />
            </a>

            <ul class="header-nav-submenu-links-list" data-toggleable="header-submenu">
              <li class="header-nav-submenu-links-list-item">
                <a class="header-nav-submenu-link" data-pjax="true" data-toggle-close="true" href="/dashboard">My Dashboard</a>
              </li>

                <li class="header-nav-submenu-links-list-item">
                  <a class="header-nav-submenu-link mod-get-verified mod-no-underline" data-amplitude-click="getverified_ad" data-amplitude-properties="{&quot;placement&quot;:&quot;nav&quot;}" data-toggle-close="true" href="/get_verified?ctid=15">
                    <span aria-hidden="true" data-icon="&#xe600;"
        class="icon mod-verified mod-on-left"></span> Get Verified
</a>                </li>

              <li class="header-nav-submenu-links-list-item">
                <a class="header-nav-submenu-link" data-pjax="true" data-toggle-close="true" href="/people/jordy-antunes">My Profile</a>
              </li>

              <li class="header-nav-submenu-links-list-item">
                <a class="header-nav-submenu-link" data-toggle-close="true" href="/preferences/account">Account &amp; Settings</a>
              </li>

              <li class="header-nav-submenu-links-list-item">
                  <a class="header-nav-submenu-link" data-amplitude-click="logout" data-method="delete" data-toggle-close="true" href="/users/sign_out" rel="nofollow">Log Out</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="header-search" data-toggleable="header-search">
        <form accept-charset="UTF-8" action="/place" class="header-destination-search-form js-global-search-form" data-global-search="true" method="get" role="search"><div style="display:none"><input name="utf8" type="hidden" value="&#x2713;" /></div>
          <fieldset class="mod-inline-block-web">
            <select class="header-destination-search-type mod-transparent mod-with-arrow" data-destination-search-type="true" data-placeholder-groups="Name or keyword" data-placeholder-members="Name, username, or keyword" id="search_type" name="search_type"><option value="place">Explore</option>
<option value="host">Find Hosts</option>
<option value="member">Find Members</option>
<option value="traveler">Find Travelers</option>
<option value="event">Find Events</option>
<option value="group">Find Groups</option>
<option value="advice">Find Local Advice</option></select>
          </fieldset>

          <div class="header-search-oval mod-inline-block js-header-search-container">
            <div class="mod-inline-block" data-search-query-container>
              <fieldset>
                <input class="header-destination-search mod-google mod-transparent" data-auto-submit="true" data-destination-search="true" id="search_query" name="search_query" placeholder="Where are you going?" type="search" />

                <input data-destination-country="true" id="country" name="country" type="hidden" />
                <input data-destination-lat="true" id="latitude" name="latitude" type="hidden" value="" />
                <input data-destination-lon="true" id="longitude" name="longitude" type="hidden" value="" />
                <input data-destination-region="true" id="region" name="region" type="hidden" />
              </fieldset>
            </div>

            <button class="header-destination-search-submit mod-transparent" name="button" title="Search" type="submit">
              <span aria-hidden="true" data-icon="&#xe628;"
        class="icon mod-search"></span>
</button>
          </div>
</form>      </div>
  </div>
</header>

  <div class="banner is-hidden" data-banner data-cookie-disclaimer>
    <p class="banner-text">
      We use cookies to enhance your experience. By using our site, you agree to our use of cookies.


      <a class="mod-on-right" href="http://www.couchsurfing.com/about/privacy-policy" target="_blank">Learn More</a>
    </p>

    <div class="banner-buttons">
      <button class="button mod-on-right mod-small" data-banner-dismiss="true" data-cookie-value="true" data-set-cookie="cookie_ack" name="button" type="submit">Got It</button>
    </div>
  </div>



    

  <div class="flash mod-error is-hidden" data-flash data-error data-global-flash>
      <span aria-hidden="true" data-icon="&#xe60e;"
        class="icon mod-error mod-on-left"></span>

    <span data-flash-msg>
      
    </span>
  </div>


    
  <div class="dash-to-do hidden u-hidden js-install-app-banner">
    <div class="to-do-body-full">
      <div class="to-do-logo dismissible">
        <a class="to-do-dismiss" data-remote="true" href="/users/hide_app_banner"><span aria-hidden="true" data-icon="&#xe605;"
        class="icon mod-close"></span></a>
        <img alt="Couchsurfing" src="https://assets.couchsurfing.com/assets/logo-square-e2d7f22607e27920605d6656b76c78666b948c4bf638cec31c88aa0605a4f00d.png" title="Couchsurfing" />
      </div>

      <div class="to-do-text">
          <div class="js-android hidden u-hidden">
            <span>Couchsurfing for Android.</span>
            <div class="rating-wrap">
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-off"></span>
              <span class="rating-number">(31,895)</span>
            </div>
            <div class="to-do-actions-bottom">
              <a href="https://play.google.com/store/apps/details?id=com.couchsurfing.mobile.android&amp;utm_source=site&amp;utm_campaign=android_mobileweb" class="button mod-small cs-button cs-button-small">Install</a>
            </div>
          </div>
          <div class="js-ios hidden u-hidden">
            <span>Couchsurfing for iOS.</span>
            <div class="rating-wrap">
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-big star-on"></span>
              <span class="rating-number">(2,137)</span>
            </div>
            <div class="to-do-actions-bottom">
              <a href="https://itunes.apple.com/app/apple-store/id525642917?pt=1067410&amp;ct=Mobile%20Web&amp;mt=8" class="button mod-small cs-button cs-button-small">Install</a>
            </div>
          </div>
      </div>

    </div>
  </div>

    
    

    <main class="main mod-references-user_profile" data-pjax-container>
      
<div class="column mod-sidebar">

  <div class="box">
    
  <div class="profile-sidebar__user-status u-text-center u-clear">
    


      <a class="mod-no-underline" data-pjax="true" href="/users/2004008142">
        <img alt="André Turetta&#39;s Photo" class="box-image-image mod-thread-avatar mod-round" src="https://tcdn.couchsurfing.com/v_gaLsqTgjGgbyJFCP7s9gov6Vw=/200x200/smart/https://s3.amazonaws.com/ht-images.couchsurfing.com/u/2004008142/222cf23d-5cc0-4cb8-9c96-5ae4b1d7930c" />
</a>




    <div class="profile-sidebar__user-info">
      <span class="text mod-relative">
        <!-- TODO: refactor & simplify (use helpers) -->

    <a class="mod-black profile-sidebar__username-link text" data-pjax="true" href="/users/2004008142"><span class="mod-black profile-sidebar__username-link text">André Turetta</span></a>


      </span>

      
  <a class="profile-sidebar__city text mod-regular mod-block" href="/places/south-america/brazil/curitiba">Curitiba, State of Paraná, Brazil</a>

    </div>



      <div class="profile-sidebar__verification u-text-left u-clear">

        <!-- Verification status title -->
        <h3 class="profile-sidebar__verification-title">
          <span class="text mod-big mod-normal">Partially Verified</span>

          <!-- Verification checkmark icon -->

          <!-- TODO: remove cs_new_fe param ? -->
          <!-- Verification info icon -->
            <a class="mod-no-underline" data-modal="true" data-overlay-close="true" href="/verifications/info?cs_new_fe=true">
              <span aria-hidden="true" data-icon="&#xe615;"
        class="icon mod-info mod-large mod-on-right "></span>
</a>        </h3>

        
  <!-- New user profile verification actions -->
    <ul class="actions-list">



      <!-- Payment Verification -->

        <!-- Phone Verification -->
        <li class="actions-list-item">
          <span aria-hidden="true" data-icon="&#xe600;"
        class="icon mod-verified mod-on-left mod-medium mod-not-verified"></span>

          <span class="text mod-verification mod-regular"
                data-phone-verification-status
                
                data-verified-text="Phone verified">
              Phone not verified
          </span>
        </li>

      <!-- Government ID Verification -->
      <li class="actions-list-item">
        <span aria-hidden="true" data-icon="&#xe600;"
        class="icon mod-verified mod-on-left mod-medium mod-not-verified"></span>

        <span class="text mod-verification mod-regular"
              data-payment-verification-status
              >
            Government ID not verified
        </span>
      </li>

      <!-- Address Verification -->
      <li class="actions-list-item">
        <span aria-hidden="true" data-icon="&#xe600;"
        class="icon mod-verified mod-on-left mod-medium mod-not-verified"></span>

        <span class="text mod-verification mod-regular"
              data-address-verification-status
              data-verification-pending-path="/postcard/code/new?cs_new_fe=true&amp;user=2004008142&amp;verify_flow=true"
              data-verification-pending-text="Address Verification Pending"
              
              data-verified-text="Address Verified">
            Address not verified
        </span>
      </li>



    </ul>


        <!-- Upgrade to Verify Profile Button -->

      </div>
  </div>


  </div>

  


    <div id='div-gpt-ad-1423247180333-0' class="gpt-ad cs-ad ad-medium-rectangle" data-gpt-path='/46272094/ROS_300x250_ad1' data-gpt-sizes='[[], [300, 250]]' style='display:none;'><script type='text/javascript'>googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423247180333-0'); });</script></div>
    <div id='div-gpt-ad-1423247180333-0' class="gpt-ad cs-ad ad-medium-rectangle" data-gpt-path='/46272094/ROS_300x250_ad1' data-gpt-sizes='[[], [300, 250]]' style='display:none;'><script type='text/javascript'>googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423247180333-0'); });</script></div>
</div>

<div class="column mod-main"
  data-amplitude-pageview="profile_page"
  data-amplitude-properties='{"type":"other","other_user_id":2004008142}'
  
  >

    <div id='div-gpt-ad-1423247180333-1' class="gpt-ad cs-ad ad-atf-leaderboard" data-gpt-path='/46272094/ROS_728x90_ATF' data-gpt-sizes='[[320, 50], [728, 90]]' style='display:none;'><script type='text/javascript'>googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423247180333-1'); });</script></div>

  
  <section class="box">
    <div class="box-content mod-padded">
      <div class="multicolumn">
        <div class="multicolumn-column mod-3-5">
            <h1>
              <span class="mod-large mod-positive">Accepting Guests</span>
            </h1>

            <ul class="mod-tight">

              <li class="text mod-gray mod-medium">
                Last login 12 days ago
              </li>
            </ul>
        </div>

        <div class="multicolumn-column mod-2-5">
          <ul class="mod-inline mod-buttons">

              <!-- TODO: refactor & dry -->

                    <li>
                      <a class="button" data-modal="true" href="/couch_visits/new?cs_new_fe=true&amp;to_id=2004008142">
                        <span aria-hidden="true" data-icon="&#xe606;"
        class="icon mod-couch mod-on-left"></span>
                        Send Request
</a>                    </li>
                    <li>
  <a class="button mod-small-min-width" data-modal="true" href="/messages/new?cs_new_fe=true&amp;id=2004008142">
    <span aria-hidden="true" data-icon="&#xe637;"
        class="icon mod-inbox"></span>
</a></li>



                <li>
                  <div class="dropdown test-profile-more-actions" data-dropdown>
                    <a href="#" class="dropdown-button mod-button mod-dropdown-arrow" data-dropdown-button>
                      More
                    </a>

                    <ul class="dropdown-menu mod-r2l" role="menu" data-dropdown-menu>
                      <li class="dropdown-menu-item">
                          <a class="dropdown-link" data-amplitude-click="friend_request" data-amplitude-properties="{&quot;user_id&quot;:2004008142}" data-dropdown-close="true" data-method="post" href="/friends/2004008142/add" rel="nofollow">Add Friend</a>
                      </li>

                      <li class="dropdown-menu-item">
                          <a class="dropdown-link" data-dropdown-close="true" href="/users/2004008142/user_references/new?cs_new_fe=true">Write Reference</a>
                      </li>



                      <li class="dropdown-menu-item">
                        <a class="dropdown-link" data-dropdown-close="true" data-modal="true" href="/flags/report/profile/2004008142?cs_new_fe=true">Report</a>
                      </li>

                      <li class="dropdown-menu-item">
                          <a class="dropdown-link" data-dropdown-close="true" data-modal="true" data-overlay-close="true" href="/friends/2004008142/confirm_block?cs_new_fe=true">Block</a>
                      </li>
                    </ul>
                  </div>
                </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  
  <nav class="box">
    <div class="box-actions">
      <ul class="tabs-list" role="tablist">
          <li class="tabs-list-tab" role="tab">
            <a class="tab-link" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142">About</a>
          </li>

            <li class="tabs-list-tab" role="tab">
              <a class="tab-link" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/couch">My Home</a>
            </li>

          <li class="tabs-list-tab" role="tab">
            <a class="tab-link" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/photos">
              Photos <span class="badge">13</span>
</a>          </li>

        <li class="tabs-list-tab" role="tab">
          <a class="tab-link is-selected" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/references">
            References
            <span class="badge">1</span>
</a>        </li>

          <li class="tabs-list-tab" role="tab">
            <a class="tab-link" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/friends">
              Friends <span class="badge">8</span>
</a>          </li>


        <li class="tabs-list-tab" role="tab">
          <a class="tab-link" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/favorites">
            Favorites
            <span class="badge">0</span>
</a>        </li>

      </ul>
    </div>
  </nav>

  
  <span data-amplitude-pageview="profile_references_page"
    data-amplitude-properties='{"type":"other","other_user_id":2004008142}'></span>

  
  <section class="box">
    <header class="box-header">
      <h3 class="box-header-title">
        References
      </h3>
    </header>

    <nav>
      <ul class="tabs-list mod-internal" role="tablist">
        <li class="tabs-list-tab" role="tab">
          <a class="tab-link is-selected" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/references?type=surf">
            From Surfers
            <span class="badge">
              1
            </span>
</a>        </li>

        <li class="tabs-list-tab" role="tab">
          <a class="tab-link " data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/references?type=host">
            From Hosts
            <span class="badge">
              0
            </span>
</a>        </li>

        <li class="tabs-list-tab" role="tab">
          <a class="tab-link " data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/references?type=friend%2Cother">
            Personal
            <span class="badge">
              0
            </span>
</a>        </li>
      </ul>
    </nav>

      <nav>
  <ul class="tabs-list mod-internal mod-filter-list mod-tight">
    <li class="tags-list-item">
      <a class="badge mod-tag mod-filter is-selected" data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/references?type=surf">
          All (1)
</a>    </li>
    <li class="tags-list-item">
      <a class="badge mod-tag mod-filter " data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/references?experience=positive&amp;type=surf">
          <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled mod-verified mod-on-left"></span>
          Would Stay Again/Positive (1)
</a>    </li>
    <li class="tags-list-item">
      <a class="badge mod-tag mod-filter " data-pjax="true" data-save-scroll-position="true" href="/users/2004008142/references?experience=neutral%2Cnegative&amp;type=surf">
          Would Not Stay Again/Neutral/Negative (0)
</a>    </li>
  </ul>
</nav>


      <div class="box-content mod-ovh">
                <div class="card mod-reference mod-stacked-content-actions">
    <div class="card-image mod-small">
      


      <a class="mod-no-underline" data-pjax="true" href="/people/riccastilhos">
        <img alt="Ricardo Castilhos&#39;s Photo" class="card-image-image mod-round" src="https://tcdn.couchsurfing.com/kDYfPHonPKixexwdAkEgFJJ9Ia4=/70x70/smart/https://s3.amazonaws.com/ht-images.couchsurfing.com/u/2004343613/d4429ab2-63b2-4538-bbbc-5bbd6b645734" />
</a>

    </div>

    <div class="card-content">
      <h3 class="card-content-title mod-tight">
        <!-- TODO: refactor & simplify (use helpers) -->

    <a class="mod-black " data-pjax="true" href="/people/riccastilhos"><span class="mod-black ">Ricardo Castilhos</span></a>

      
  <a class=" mod-no-underline" data-modal="true" data-overlay-close="true" href="/verifications/badge?has_no_actions_list=false&amp;user_id=2004343613"><span aria-hidden="true" data-icon="&#xe600;"
        class="icon mod-verified "></span></a>


      </h3>

        <p class="card-content-subtitle">
          
  <a class="mod-black" href="/place?latitude=-24.9350831&amp;location_text=Cascavel%2C+Paran%C3%A1%2C+Brazil&amp;longitude=-53.4517718">Cascavel, Paraná, Brazil</a>

        </p>

        <ul class="mod-tight">
          <li class="card-content-date">
            <small>
              Mar 2017
            </small>
          </li>


          <li>
            <span class="mod-positive">

                <span aria-hidden="true" data-icon="&#xe62e;"
        class="icon mod-star-filled"></span>

                  Confirmed Stay - Would Stay With André Again

            </span>
          </li>
        </ul>

        <div data-truncate
          data-truncate-more="Read more"
          data-truncate-less="Read less">
            <p>André é um cara super bacana! Atencioso, simpático e legal, com certeza fez a minha estada em Curitiba a melhor possível. Ele foi super flexível e compreensivo. Ajudou no que eu precisei, realmente foi super prestativo. As portas da minha casa estão abertas para essa pessoa maravilhosa que ele é! Super educado, conversamos bastante e sempre conversas bem inteligentes e reflexivas sobre a vida. Foi ótimo! Obrigado pela experiência de Curitiba, meu amigo!
<br />Obs.: Casa super bem arrumada, limpa e organizada. O sofá é super confortável.</p>
        </div>

    </div>

    <div class="card-actions">
        <ul class="card-actions-list">
        </ul>
    </div>
  </div>

      </div>

  </section>


  

    <div id='div-gpt-ad-1423247180333-2' class="gpt-ad cs-ad ad-btf-leaderboard" data-gpt-path='/46272094/ROS_728x90_BTF' data-gpt-sizes='[[320, 50], [728, 90]]' style='display:none;'><script type='text/javascript'>googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423247180333-2'); });</script></div>

</div>

  <div class="column mod-ads">
    <div id='div-gpt-ad-1425598297307-0' class="gpt-ad cs-ad ad-wide-skyscraper" data-gpt-path='/46272094/ROS_160x600' data-gpt-sizes='[[], [160, 600]]' style='display:none;'><script type='text/javascript'>googletag.cmd.push(function() { googletag.display('div-gpt-ad-1425598297307-0'); });</script></div>
  </div>

    </main>

      <footer class="footer js-footer flexbox">
  <div class="footer-wrap">

    <ul class="footer-links-list mod-footer-links-list-main">
      <li class="footer-links-list-item">
        <a class="footer-link" href="http://www.couchsurfing.com/about/about-us">About</a>
      </li>
      <li class="footer-links-list-item">
        <a class="footer-link" href="http://www.couchsurfing.com/about/safety">Safety</a>
      </li>
      <li class="footer-links-list-item">
        <a class="footer-link" href="https://support.couchsurfing.com" target="_blank">Support</a>
      </li>
      <li class="footer-links-list-item">
        <a class="footer-link" href="http://blog.couchsurfing.com/" target="_blank">Blog</a>
      </li>
      <li class="footer-links-list-item">
        <a class="footer-link" href="http://store.couchsurfing.com/" target="_blank">Shop</a>
      </li>
    </ul>

    <div class="footer-language">
      <!-- Language dropdown -->
      <form accept-charset="UTF-8" action="/locale" method="post"><div style="display:none"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="a2CNT5XIB9IsNWr4yhnf2l/+CzlP6yCRNR0sllmKVVQ=" /></div>
        <div class="select-dropdown">
          <select class="select-dropdown__language" data-set-locale-path="/locale" id="locale" name="locale"><option selected="selected" value="en_US">English</option>
<option value="es_ES">Español</option>
<option value="fr_FR">Français</option>
<option value="it_IT">Italiano</option>
<option value="pl_PL">Polski</option>
<option value="pt_BR">Português</option>
<option value="zh_CN">中文 (简化字)</option>
<option value="ru_RU">Русский</option></select>
        </div>
        <input type="submit" value="Change" class="change-language-button">
</form>    </div>

    <!-- Social & Mobile Icons -->
    <div class="footer-icons">
      <section class="footer-block">
  <h3 class="footer-header">
    Connect With Us
  </h3>

  <ul class="icons-list">
    <li class="icons-list-item">
      <a class="mod-icon mod-circled mod-social mod-facebook" href="http://facebook.com/couchsurfing" target="_blank" title="Facebook">
        <span aria-hidden="true" data-icon="&#xe610;"
        class="icon mod-facebook"></span>
</a>    </li>
    <li class="icons-list-item">
      <a class="mod-icon mod-circled mod-social mod-twitter" href="http://twitter.com/couchsurfing" target="_blank" title="Twitter">
        <span aria-hidden="true" data-icon="&#xe632;"
        class="icon mod-twitter"></span>
</a>    </li>
    <li class="icons-list-item">
      <a class="mod-icon mod-circled mod-social mod-tumblr" href="http://couchsurfing.tumblr.com/" target="_blank" title="Tumblr">
        <span aria-hidden="true" data-icon="&#xe631;"
        class="icon mod-tumblr"></span>
</a>    </li>
    <li class="icons-list-item">
      <a class="mod-icon mod-circled mod-social mod-instagram" href="http://instagram.com/couchsurfing" target="_blank" title="Instagram">
        <span aria-hidden="true" data-icon="&#xe616;"
        class="icon mod-instagram"></span>
</a>    </li>
  </ul>
</section>
      <div class="footer-block mod-mobile-apps">
        <section>
          <h3 class="footer-header">Mobile Apps</h3>
          <ul class="icons-list">
            <li class="icons-list-item">
              <a class="mod-icon mod-circled mod-social mod-apple" href="https://itunes.apple.com/us/app/couchsurfing/id525642917" target="_blank" title="iOS App Store">
                  <span aria-hidden="true" data-icon="&#xe63b;"
        class="icon mod-apple"></span>
</a>            </li>
            <li class="icons-list-item">
              <a class="mod-icon mod-circled mod-social mod-android" href="https://play.google.com/store/apps/details?id=com.couchsurfing.mobile.android" target="_blank" title="Google Play Store">
                  <span aria-hidden="true" data-icon="&#xe63c;"
        class="icon mod-android"></span>
</a>            </li>
          </ul>
        </section>
      </div>
    </div>

    <p class="footer-copyright u-text-left">
      <ul class="footer-links-list mod-small">
        <li class="footer-links-list-item">
            © 1999 - 2017 Couchsurfing International, Inc.

        </li>
        <li class="footer-links-list-item">
          <a class="footer-link" href="http://www.couchsurfing.com/about/terms-of-use">Terms</a>
        </li>
        <li class="footer-links-list-item">
          <a class="footer-link" href="http://www.couchsurfing.com/about/privacy-policy">Privacy</a>
        </li>
        <li class="footer-links-list-item">
          <a class="footer-link" href="/places">Sitemap</a>
        </li>
      </ul>
    </p>
  </div>
</footer>


    <!-- TODO: investigate and eliminate (related to layout) -->
    <div data-max-width></div>

    <!-- TODO ensive: rewrite (move to separte file) -->
    <script>
      (function(e,t){var r=e.amplitude||{};var n=t.createElement("script");n.type="text/javascript";
      n.async=true;n.src="https://d24n15hnbwhuhn.cloudfront.net/libs/amplitude-2.2.1-min.gz.js";
      var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s);r._q=[];function a(e){
      r[e]=function(){r._q.push([e].concat(Array.prototype.slice.call(arguments,0)))}}var i=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties"];
      for(var o=0;o<i.length;o++){a(i[o])}e.amplitude=r})(window,document);

      var userProperties = {};

        amplitude.init('c331db178b6b127c461c49aba343f762', '2005631397', { includeUtm: true, includeReferrer: true });
        userProperties.gender = 'male';
        userProperties.age = 22;
        userProperties.canHost = 'maybe';
        userProperties.paymentVerified = false;
        userProperties.profileCountry = 'Brazil';

          var user_age = '22';
          var user_gender = 'male';




      amplitude.setUserProperties(userProperties);
      amplitude.setVersionName('0.0');
    </script>

    <!-- TODO ensive: rewrite -->
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle" style="display: none;"
        data-ad-channel="1522856634"
        data-ad-client="pub-5344143540872666"
        data-ad-slot="8499794033"
        data-reactive-ad-format="1"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

    <script src="https://assets.couchsurfing.com/assets/couchsurfing/couchsurfing_body-1f3f0e1e9e9dd703b61be8578fec3a6ae763238d192743fc3088505e806fbfd7.js"></script>



    <script>
      (function () {

        // TODO ensive: hot fix for pjax container (city page)
        // TODO ensive: refactor
        $(document).on('pjax:success', function () {
          var $main = $('main');
          var path = window.location.pathname;

          if (!path.match(/place/) && $main.hasClass('mod-city-place')) {
            $('.js-city-page-header').remove();
            $main.removeClass('mod-city-place');
          } else if (path.match(/dashboard|\//)) {
            $main.removeClass().addClass('main');
          }

        });

      })();
    </script>

    <script>
  (function(a, ns, cb, l) {
    l = document.createElement('link');
    l.rel = "stylesheet"
    l.type = "text/css"
    l.href = "//fast.appcues.com/appcues.css"
    l.id = 'appcues-css'
    document.getElementsByTagName('head')[0].appendChild(l);
    window[ns] = function(callback) {
      (window[ns].q = window[ns].q || []).push(callback);
      if (window[a] != null) {
        while (window[ns].q.length) {
          cb = window[ns].q.shift();
          if (typeof cb === 'function') cb();
        }
      }
    };
  })('Appcues', 'AppcuesReady');
</script>

    <script>
    AppcuesReady(function() {
        Appcues.identify("2005631397", {
            name: "Jordy Antunes",
            location: "Curitiba, State of Paraná BRA",
            gender: "male",
            date_of_birth: "1995-04-15 00:00:00 UTC",
            account_creation_date: "2017-04-10 23:39:05 UTC",
            has_surfed: "false",
            has_hosted: "false",
            is_verified: "false",
            test_group: "18",
            locale: "",
            mobile_user: "false",
            profile_completeness: "10"
        });

        $(document).on('pjax:success', function() {
            Appcues.start()
        });
    });

    </script>

<script src="//fast.appcues.com/22666.js" async defer onload="AppcuesReady()"></script>


  </body>
</html>
